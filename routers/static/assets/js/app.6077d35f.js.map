{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?6b61","webpack:///./src/views/FlipMode.vue?8dd4","webpack:///./src/App.vue","webpack:///./src/views/ScrollMode.vue","webpack:///./src/components/Header.vue","webpack:///./src/components/Header.vue?54b6","webpack:///./src/components/Drawer.vue","webpack:///./src/components/Drawer.vue?26eb","webpack:///./src/views/ScrollMode.vue?ba6c","webpack:///./src/views/FlipMode.vue","webpack:///./src/views/FlipMode.vue?ee43","webpack:///./src/views/BookShelf.vue","webpack:///./src/views/BookShelf.vue?aed6","webpack:///./src/App.vue?8ecf","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/locales/index.js","webpack:///./src/main.js","webpack:///./src/views/ScrollMode.vue?c970","webpack:///./src/views/BookShelf.vue?a39c","webpack:///./src/components/Header.vue?9033"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","class","selectTemplate","book","nowTemplate","OnSetTemplate","id","showHeaderFlag","bookIsFolder","IsFolder","bookName","size","drawerActivate","pages","page","url","onMouseClick","$event","onMouseMove","onMouseLeave","alt","imageParametersString","showPageNumFlag_ScrollMode","all_page_num","initDrawerActive","drawerActive","initDrawerPlacement","drawerPlacement","saveConfigToLocalStorage","startSketchMode","drawerDeactivate","$t","model","color","onBackgroundColorChange","modes","show-alpha","vertical","imageWidth_usePercentFlag","show-button","singlePageWidth_Percent","max","min","update-value-on-input","prefix","suffix","step","format-tooltip","doublePageWidth_Percent","singlePageWidth_PX","imageMaxWidth","doublePageWidth_PX","setImageWidthUsePercentFlag","rail-style","railStyle","checked","unchecked","setShowHeaderChange","setShowPageNumChange","imageParameters","gray","setImageParameters_Gray","do_auto_crop","setImageParameters_DoAutoCrop","auto_crop","do_auto_resize","setImageParameters_DoAutoResize","resize_max_width","show","showBackTopFlag","right","bottom","scrollToTop","secondary","strong","style","href","props","components","NSpace","NIcon","NEllipsis","BookOutline","setup","cookies","someflag","methods","__exports__","saveConfigToCookie","height","width","placement","closable","header","footer","placeholder","$i18n","locale","OnChangeLanguage","options","languageOptions","stopSketchMode","nowTemplateLocal","onChangeTemplate","handlePositiveClick","handleNegativeClick","trigger","emits","NDrawer","NDrawerContent","NDivider","NRadioGroup","NRadioButton","NButton","NSelect","NPopconfirm","localStorage","clear","location","reload","label","beforeMount","lang","this","computed","onClearLocalSetting","set","$emit","Header","Drawer","NBackTop","NSlider","NSwitch","NInputNumber","SettingsOutline","NColorPicker","colorHeader","resize_width","resize_height","resize_max_height","source_url","substr","focused","background","boxShadow","marks","30","50","75","95","debugModeFlag","scrollDownFlag","scrollTopSave","syncScrollFlag","clickX","clickY","isLandscapeMode","isPortraitMode","aspectRatio","clientWidth","clientHeight","created","addEventListener","onScroll","onResize","innerWidth","getItem","saveNum","Number","isNaN","onMounted","inLandscapeModeCheck","$nextTick","beforeUnmount","removeEventListener","place","g","b","subR","subG","subB","r2","parseInt","g2","b2","toString","setItem","log","documentElement","scrollTop","body","Math","abs","x","y","innerHeight","MinX","MaxX","MinY","MaxY","currentTarget","cursor","scrollDuration","scrollStep","scrollY","scrollInterval","setInterval","scrollBy","clearInterval","sPWL","dPWL","sPWP","dPWP","showHeaderFlag_FlipMode","nowPageNum","autoDoublePageModeFlag","simpleDoublePageModeFlag","nowAndNextPageIsSingle","showPageHintFlag_FlipMode","pageNumOrSketchHint","showFooterFlag_FlipMode","rightToLeftFlag","saveNowPageNumOnUpdate","reverse","setShowFooterFlagChange","saveNowPageNumFlag_FlipMode","setSavePageNumFlag","setFlipScreenFlag","setSimpleDoublePage_FlipMode","setDebugModeFlag","setAutoDoublePage_FlipMode","sketchFlipSecond","resetSketchSecondCount","60","90","120","sketchModeFlag","sketchSecondCount","interval","nowPageIsDouble","nextPageIsDouble","nowAndNextPageIsSingleFlag","handleKeyup","mounted","setNowPageNumByCookie","updated","checkImageIsDoublePage_byPageNum","cookieValue","uuid","success","sketchCount","nowSecond","flipPage","toPage","randomBackgroundColor","R","ceil","random","G","B","RGB","onMouseOver","onMouseEnter","toPerviousPage","toNextPage","checkMergedStatus_ByPageNum","pervIsDouble","PervPervIsDouble","pageNum","now_page_is_double_page","next_page_is_double_page","image_type","image","Image","temp_flag","complete","num","info","donePage","totalMinutes","MinutesAndHourString","AllTimeString","mangaAreaHeight","Height","mangaImageHeight","sketchHintHeight","sketchHintFontSize","get_flex_direction","showPageNumFlag_BookShelf","ScrollMode","FlipMode","BookShelf","NMessageProvider","$store","dispatch","getDefaultTemplate","getNumber","number","state","setting","localValue","render","routes","path","component","router","createRouter","history","createWebHashHistory","store","createStore","count","todos","text","done","now_page","bookshelf","template","sketch_count_seconds","user_uuid","server_status","now_book_uuid","read_percent","msg","mutations","change_template_to_scroll","change_template_to_flip","change_template_to_sketch","increment","syncSettingData","payload","syncBookData","syncBookShelfData","actions","incrementAction","context","commit","syncSettingDataAction","axios","then","res","syncBookDataAction","syncBookShelfDataAction","getters","doneTodos","filter","todo","messages","en","enLocale","zh","cnLocale","ja","jaLocale","i18n","createI18n","globalInjection","defaults","baseURL","app","createApp","App","use","VueAxios","VueLazyLoad","preLoad","loading","attempt","observerOptions","rootMargin","threshold","lifecycle","el","loaded","mount"],"mappings":"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","file":"assets/js/app.6077d35f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d0de531\":\"493aafcb\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=31a4c7b2&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FlipMode.vue?vue&type=style&index=0&id=671604bb&scoped=true&lang=css\"","<template>\r\n  <div class=\"app\">\r\n    <n-message-provider>\r\n      <ScrollMode\r\n        v-if=\"selectTemplate === 'scroll'\"\r\n        :book=\"this.book\"\r\n        :nowTemplate=\"this.selectTemplate\"\r\n        @setTemplate=\"OnSetTemplate\"\r\n      ></ScrollMode>\r\n      <FlipMode\r\n        v-if=\"selectTemplate === 'flip' || selectTemplate === 'sketch'\"\r\n        :book=\"this.book\"\r\n        :nowTemplate=\"this.selectTemplate\"\r\n        @setTemplate=\"OnSetTemplate\"\r\n      ></FlipMode>\r\n      <BookShelf\r\n        v-if=\"selectTemplate === 'bookshelf'\"\r\n        :book=\"this.book\"\r\n        :nowTemplate=\"this.selectTemplate\"\r\n        @setTemplate=\"OnSetTemplate\"\r\n      ></BookShelf>\r\n    </n-message-provider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport ScrollMode from \"@/views/ScrollMode.vue\";\r\nimport FlipMode from \"@/views/FlipMode.vue\";\r\nimport BookShelf from \"@/views/BookShelf.vue\";\r\nimport { useCookies } from \"vue3-cookies\";\r\nimport { defineComponent } from 'vue'\r\nimport { NMessageProvider } from 'naive-ui'\r\n\r\nexport default defineComponent({\r\n  name: \"Home\", //默认为 default。如果 <router-view>设置了名称，则会渲染对应的路由配置中 components 下的相应组件。\r\n  components: {\r\n    ScrollMode,\r\n    FlipMode,\r\n    BookShelf,\r\n    NMessageProvider,\r\n  },\r\n  setup() {\r\n    const { cookies } = useCookies();\r\n    return { cookies };\r\n  },\r\n  data() {\r\n    return {\r\n      selectTemplate: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"syncBookDataAction\");\r\n    this.$store.dispatch(\"syncSettingDataAction\");\r\n    this.$store.dispatch(\"syncBookShelfDataAction\");\r\n    this.selectTemplate = this.getDefaultTemplate;\r\n  },\r\n  beforeMount() {\r\n  },\r\n\r\n  methods: {\r\n    OnSetTemplate(value) {\r\n      localStorage.setItem(\"nowTemplate\", value);\r\n      this.selectTemplate = value;\r\n    },\r\n    getNumber: function (number) {\r\n      this.page = number;\r\n      console.log(number);\r\n    },\r\n  },\r\n  //计算属性\r\n  computed: {\r\n    book() {\r\n      return this.$store.state.book;\r\n    },\r\n    setting() {\r\n      return this.$store.state.setting;\r\n    },\r\n    getDefaultTemplate: function () {\r\n      var localValue = localStorage.getItem(\"nowTemplate\");\r\n      if (localValue !== null) {\r\n        return localValue;\r\n      }\r\n      //不管服务器设置，完全按照本地值来\r\n      // if (this.setting.template) {\r\n      //   localStorage.setItem(\"nowTemplate\", this.setting.template)\r\n      //   return this.setting.template;\r\n      // }\r\n      return \"scroll\";\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  /* 整体颜色，做成用户设定？ */\r\n  background-color: #f6f7eb;\r\n  align-items: center;\r\n}\r\n/* 覆盖8px的浏览器默认值 */\r\n* {\r\n  /* 外边距，不指定的话，浏览器默认设置成8px */\r\n  margin: 0px;\r\n  /* 内边框 */\r\n  padding: 0px;\r\n}\r\n</style>\r\n","<template>\r\n\t<div id=\"ScrollMode\" v-if=\"this.book\" class=\"manga\">\r\n\t\t<Header\r\n\t\t\tclass=\"footer\"\r\n\t\t\tv-if=\"this.showHeaderFlag\"\r\n\t\t\t:bookIsFolder=\"book.IsFolder\"\r\n\t\t\t:bookName=\"book.name\"\r\n\t\t>\r\n\t\t\t<!-- 右边的设置图标，点击屏幕中央也可以打开 -->\r\n\t\t\t<n-icon size=\"40\" @click=\"drawerActivate('right')\">\r\n\t\t\t\t<settings-outline />\r\n\t\t\t</n-icon>\r\n\t\t</Header>\r\n\r\n\t\t<!-- 渲染漫画部分 -->\r\n\t\t<div\r\n\t\t\tclass=\"main_manga\"\r\n\t\t\tv-for=\"(page, key) in book.pages\"\r\n\t\t\t:key=\"page.url\"\r\n\t\t\t@click=\"onMouseClick($event)\"\r\n\t\t\t@mousemove=\"onMouseMove\"\r\n\t\t\t@mouseleave=\"onMouseLeave\"\r\n\t\t>\r\n\t\t\t<img v-lazy=\"imageParametersString(page.url)\" v-bind:alt=\"key + 1\" v-bind:key=\"key\" />\r\n\t\t\t<div class=\"page_hint\" v-if=\"showPageNumFlag_ScrollMode\">{{ key + 1 }}/{{ book.all_page_num }}</div>\r\n\t\t</div>\r\n\r\n\t\t<Drawer\r\n\t\t\t:initDrawerActive=\"this.drawerActive\"\r\n\t\t\t:initDrawerPlacement=\"this.drawerPlacement\"\r\n\t\t\t@saveConfig=\"this.saveConfigToLocalStorage\"\r\n\t\t\t@startSketch=\"this.startSketchMode\"\r\n\t\t\t@closeDrawer=\"this.drawerDeactivate\"\r\n\t\t\t@setT=\"this.OnSetTemplate\"\r\n\t\t\t:nowTemplate=\"this.nowTemplate\"\r\n\t\t>\r\n\t\t\t<span>{{ $t(\"setBackColor\") }}</span>\r\n\t\t\t<n-color-picker\r\n\t\t\t\tv-model:value=\"model.color\"\r\n\t\t\t\t:modes=\"['rgb']\"\r\n\t\t\t\t:show-alpha=\"false\"\r\n\t\t\t\t@update:value=\"onBackgroundColorChange\"\r\n\t\t\t/>\r\n\r\n\t\t\t<!-- 分割线 -->\r\n\t\t\t<n-divider />\r\n\r\n\t\t\t<n-space vertical>\r\n\t\t\t\t<!-- 单页-漫画宽度-使用百分比 -->\r\n\t\t\t\t<!-- 数字输入% -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\tv-if=\"this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-model:value=\"this.singlePageWidth_Percent\"\r\n\t\t\t\t\t:max=\"100\"\r\n\t\t\t\t\t:min=\"10\"\r\n\t\t\t\t\t:update-value-on-input=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>{{ $t('singlePageWidth') }}</template>\r\n\t\t\t\t\t<template #suffix>%</template>\r\n\t\t\t\t</n-input-number>\r\n\t\t\t\t<!-- 滑动选择% -->\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\tv-if=\"this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tv-model:value=\"this.singlePageWidth_Percent\"\r\n\t\t\t\t\t:step=\"1\"\r\n\t\t\t\t\t:max=\"100\"\r\n\t\t\t\t\t:min=\"10\"\r\n\t\t\t\t\t:format-tooltip=\"value => `${value}%`\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<!-- 开页-漫画宽度-使用百分比  -->\r\n\t\t\t\t<!-- 数字输入% -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\tv-if=\"this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-model:value=\"this.doublePageWidth_Percent\"\r\n\t\t\t\t\t:max=\"100\"\r\n\t\t\t\t\t:min=\"10\"\r\n\t\t\t\t\t:update-value-on-input=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>{{ $t('doublePageWidth') }}</template>\r\n\t\t\t\t\t<template #suffix>%</template>\r\n\t\t\t\t</n-input-number>\r\n\t\t\t\t<!-- 滑动选择% -->\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\tv-if=\"this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tv-model:value=\"this.doublePageWidth_Percent\"\r\n\t\t\t\t\t:step=\"1\"\r\n\t\t\t\t\t:max=\"100\"\r\n\t\t\t\t\t:min=\"10\"\r\n\t\t\t\t\t:format-tooltip=\"value => `${value}%`\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<!-- 单页-漫画宽度-使用固定值PX -->\r\n\r\n\t\t\t\t<!-- 数字输入框 -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\tv-if=\"!this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-model:value=\"this.singlePageWidth_PX\"\r\n\t\t\t\t\t:max=\"this.imageMaxWidth\"\r\n\t\t\t\t\t:min=\"50\"\r\n\t\t\t\t\t:update-value-on-input=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>{{ $t('singlePageWidth') }}</template>\r\n\t\t\t\t\t<template #suffix>px</template>\r\n\t\t\t\t</n-input-number>\r\n\t\t\t\t<!-- 滑动选择PX -->\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\tv-if=\"!this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tv-model:value=\"this.singlePageWidth_PX\"\r\n\t\t\t\t\t:step=\"10\"\r\n\t\t\t\t\t:max=\"this.imageMaxWidth\"\r\n\t\t\t\t\t:min=\"50\"\r\n\t\t\t\t\t:format-tooltip=\"value => `${value}px`\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<!-- 数字输入框 -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\tv-if=\"!this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-model:value=\"this.doublePageWidth_PX\"\r\n\t\t\t\t\t:max=\"this.imageMaxWidth\"\r\n\t\t\t\t\t:min=\"50\"\r\n\t\t\t\t\t:update-value-on-input=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>{{ $t('doublePageWidth') }}</template>\r\n\t\t\t\t\t<template #suffix>px</template>\r\n\t\t\t\t</n-input-number>\r\n\r\n\t\t\t\t<!-- 滑动选择PX -->\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\tv-if=\"!this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\tv-model:value=\"this.doublePageWidth_PX\"\r\n\t\t\t\t\t:step=\"10\"\r\n\t\t\t\t\t:max=\"this.imageMaxWidth\"\r\n\t\t\t\t\t:min=\"50\"\r\n\t\t\t\t\t:format-tooltip=\"value => `${value}px`\"\r\n\t\t\t\t/>\r\n\t\t\t</n-space>\r\n\r\n\t\t\t<p></p>\r\n\t\t\t<!-- 开关：横屏状态下，宽度单位是百分比还是固定值 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model:value=\"this.imageWidth_usePercentFlag\"\r\n\t\t\t\t\t:rail-style=\"railStyle\"\r\n\t\t\t\t\t@update:value=\"this.setImageWidthUsePercentFlag\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #checked>{{ $t('width_usePercent') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('width_useFixedValue') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t</n-space>\r\n\r\n\t\t\t<!-- 分割线 -->\r\n\t\t\t<n-divider />\r\n\r\n\t\t\t<!-- 开关：是否显示页头 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch size=\"large\" v-model:value=\"this.showHeaderFlag\" @update:value=\"setShowHeaderChange\">\r\n\t\t\t\t\t<template #checked>{{ $t('showHeader') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('showHeader') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t\t<p></p>\r\n\t\t\t</n-space>\r\n\r\n\t\t\t<!-- 开关：是否显示当前页数 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model:value=\"this.showPageNumFlag_ScrollMode\"\r\n\t\t\t\t\t@update:value=\"setShowPageNumChange\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #checked>{{ $t('showPageNum') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('showPageNum') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t</n-space>\r\n\r\n\t\t\t<!-- 开关：显示原图 黑白 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model:value=\"this.imageParameters.gray\"\r\n\t\t\t\t\t@update:value=\"setImageParameters_Gray\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #checked>{{ $t('gray_image') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('gray_image') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t</n-space>\r\n\t\t\t<!-- 分割线 -->\r\n\t\t\t<n-divider />\r\n\t\t\t<!-- 开关：自动切边 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model:value=\"this.imageParameters.do_auto_crop\"\r\n\t\t\t\t\t@update:value=\"setImageParameters_DoAutoCrop\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #checked>{{ $t('auto_crop') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('auto_crop') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t\t<!-- 切白边阈值 -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-if=\"this.imageParameters.do_auto_crop\"\r\n\t\t\t\t\tv-model:value=\"this.imageParameters.auto_crop\"\r\n\t\t\t\t\t:max=\"10\"\r\n\t\t\t\t\t:min=\"0\"\r\n\t\t\t\t></n-input-number>\r\n\t\t\t</n-space>\r\n\t\t\t<!-- 开关：压缩图片 -->\r\n\t\t\t<n-space>\r\n\t\t\t\t<n-switch\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t:rail-style=\"railStyle\"\r\n\t\t\t\t\tv-model:value=\"this.imageParameters.do_auto_resize\"\r\n\t\t\t\t\t@update:value=\"setImageParameters_DoAutoResize\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #checked>{{ $t('image_width_limit') }}</template>\r\n\t\t\t\t\t<template #unchecked>{{ $t('raw_resolution') }}</template>\r\n\t\t\t\t</n-switch>\r\n\t\t\t\t<!-- 压缩图片参数：数字输入框 -->\r\n\t\t\t\t<n-input-number\r\n\t\t\t\t\tv-if=\"this.imageParameters.do_auto_resize\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t:show-button=\"false\"\r\n\t\t\t\t\tv-model:value=\"this.imageParameters.resize_max_width\"\r\n\t\t\t\t\t:max=\"this.imageMaxWidth\"\r\n\t\t\t\t\t:min=\"100\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>{{ $t('max_width') }}</template>\r\n\t\t\t\t\t<template #suffix>px</template>\r\n\t\t\t\t</n-input-number>\r\n\t\t\t</n-space>\r\n\t\t</Drawer>\r\n\r\n\t\t<n-back-top :show=\"showBackTopFlag\" type=\"info\" color=\"#8a2be2\" :right=\"20\" :bottom=\"20\" />\r\n\t\t<n-button @click=\"scrollToTop(90);\" size=\"large\" secondary strong>{{ $t('back-to-top') }}</n-button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n// 直接导入组件并使用它。这种情况下，只有导入的组件才会被打包。\r\nimport { NButton, NBackTop, NSpace, NSlider, NSwitch, NIcon, NInputNumber, NDivider, NColorPicker, } from 'naive-ui'\r\nimport Header from \"@/components/Header.vue\";\r\nimport Drawer from \"@/components/Drawer.vue\";\r\nimport { defineComponent, reactive } from 'vue'\r\nimport { useCookies } from \"vue3-cookies\";// https://github.com/KanHarI/vue3-cookies\r\nimport { SettingsOutline } from '@vicons/ionicons5'\r\n\r\nexport default defineComponent({\r\n\tname: \"ScrollMode\",\r\n\tprops: ['book', 'nowTemplate'],\r\n\temits: [\"setTemplate\"],\r\n\tcomponents: {\r\n\t\tHeader,//自定义页头，有点丑\r\n\t\tDrawer,//自定义抽屉，还行\r\n\t\tNButton,//按钮，来自:https://www.naiveui.com/zh-CN/os-theme/components/button\r\n\t\tNBackTop,//回到顶部按钮，来自:https://www.naiveui.com/zh-CN/os-theme/components/back-top\r\n\t\t// NDrawer,//抽屉，可以从上下左右4个方向冒出. https://www.naiveui.com/zh-CN/os-theme/components/drawer\r\n\t\t// NDrawerContent,//抽屉内容\r\n\t\tNSpace,//间距 https://www.naiveui.com/zh-CN/os-theme/components/space\r\n\t\t// NRadio,//单选  https://www.naiveui.com/zh-CN/os-theme/components/radio\r\n\t\t// NRadioButton,//单选  用按钮显得更优雅一点\r\n\t\t// NRadioGroup,\r\n\t\tNSlider,//滑动选择  Slider https://www.naiveui.com/zh-CN/os-theme/components/slider\r\n\t\tNSwitch,//开关   https://www.naiveui.com/zh-CN/os-theme/components/switch\r\n\t\t// NLayout,//布局 https://www.naiveui.com/zh-CN/os-theme/components/layout\r\n\t\t// NLayoutSider,\r\n\t\t// NLayoutContent,\r\n\t\tNIcon,//图标  https://www.naiveui.com/zh-CN/os-theme/components/icon\r\n\t\t// NPageHeader,//页头 https://www.naiveui.com/zh-CN/os-theme/components/page-header\r\n\t\t// NAvatar, //头像 https://www.naiveui.com/zh-CN/os-theme/components/avatar\r\n\t\tNInputNumber,//数字输入 https://www.naiveui.com/zh-CN/os-theme/components/input-number\r\n\t\tSettingsOutline,//图标,来自 https://www.xicons.org/#/   需要安装（npm i -D @vicons/ionicons5）\r\n\t\tNDivider,//分割线  https://www.naiveui.com/zh-CN/os-theme/components/divider\r\n\t\tNColorPicker,\r\n\t},\r\n\tsetup() {\r\n\t\t//此处不能使用this\r\n\t\tconst { cookies } = useCookies();\r\n\t\t//背景颜色，颜色选择器用\r\n\t\t//reactive({}) 创建并返回一个响应式对象: https://www.bilibili.com/video/av925511720/?p=4  也讲到了toRefs()\r\n\t\tconst model = reactive({\r\n\t\t\tcolor: \"#f6f7eb\",\r\n\t\t\tcolorHeader: \"#d1c9c1\",\r\n\t\t});\r\n\r\n\t\tconst imageParameters = reactive({\r\n\t\t\tresize_width: -1,// 缩放图片，指定宽度\r\n\t\t\tresize_height: -1,// 指定高度，缩放图片\r\n\t\t\tdo_auto_resize: false,\r\n\t\t\tresize_max_width: 800,//图片宽度大于这个上限时缩小 \r\n\t\t\tresize_max_height: -1,//图片高度大于这个上限时缩小\r\n\t\t\tdo_auto_crop: false,\r\n\t\t\tauto_crop: 1,// 自动切白边阈值，范围是0~100,其实为1就够了\t\r\n\t\t\tgray: false,//黑白化\r\n\t\t});\r\n\r\n\t\t//单选按钮绑定的数值,ref函数：返回一个响应式的引用\r\n\t\t// const checkedValueRef = ref(null)\r\n\t\treturn {\r\n\t\t\tcookies,\r\n\t\t\t//背景色\r\n\t\t\tmodel,\r\n\t\t\timageParameters,//获取图片所用的参数\r\n\t\t\timageParametersString: (source_url) => {\r\n\t\t\t\t// var temp =\r\n\t\t\t\tif (source_url.substr(0, 12) == \"api/getfile?\") {\r\n\t\t\t\t\treturn source_url + \"&resize_width=\" + imageParameters.resize_width + \"&resize_height=\" + imageParameters.resize_height + \"&resize_max_width=\" + (imageParameters.do_auto_resize ? imageParameters.resize_max_width : -1) + \"&resize_max_height=\" + imageParameters.resize_max_height + \"&auto_crop=\" + (imageParameters.do_auto_crop ? imageParameters.auto_crop : -1) + \"&gray=\" + (imageParameters.gray ? 'true' : 'false')\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn source_url\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t//开关的颜色\r\n\t\t\trailStyle: ({ focused, checked }) => {\r\n\t\t\t\tconst style = {}\r\n\t\t\t\tif (checked) {\r\n\t\t\t\t\tstyle.background = '#d03050'\r\n\t\t\t\t\tif (focused) {\r\n\t\t\t\t\t\tstyle.boxShadow = '0 0 0 2px #d0305040'\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.background = '#2080f0'\r\n\t\t\t\t\tif (focused) {\r\n\t\t\t\t\t\tstyle.boxShadow = '0 0 0 2px #2080f040'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn style\r\n\t\t\t},\r\n\t\t\t//滑动选择用建议值\r\n\t\t\tmarks: {\r\n\t\t\t\t30: '25%',\r\n\t\t\t\t50: '50%',\r\n\t\t\t\t75: '75%',\r\n\t\t\t\t95: '95%',\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdrawerActive: false,\r\n\t\t\tdrawerPlacement: 'right',\r\n\t\t\t//开发模式 还没有做的功能与设置，设置Debug以后才能见到\r\n\t\t\tdebugModeFlag: true,\r\n\t\t\t//书籍数据，需要从远程拉取\r\n\t\t\t//是否显示顶部页头\r\n\t\t\tshowHeaderFlag: true,\r\n\t\t\t//是否显示页数\r\n\t\t\tshowPageNumFlag_ScrollMode: false,\r\n\t\t\t//是否显示回到顶部按钮\r\n\t\t\tshowBackTopFlag: false,\r\n\t\t\t//是否正在向下滚动\r\n\t\t\tscrollDownFlag: false,\r\n\t\t\t//存储现在滚动的位置\r\n\t\t\tscrollTopSave: 0,\r\n\t\t\t//同步滚动，目前还没做\r\n\t\t\tsyncScrollFlag: false,\r\n\t\t\t//鼠标点击或触摸的位置\r\n\t\t\tclickX: 0,\r\n\t\t\tclickY: 0,\r\n\t\t\t//可见范围是否是横向\r\n\t\t\tisLandscapeMode: true,\r\n\t\t\tisPortraitMode: false,\r\n\t\t\timageMaxWidth: 10,\r\n\t\t\t//屏幕宽横比，inLandscapeMode的判断依据\r\n\t\t\taspectRatio: 1.2,\r\n\r\n\t\t\t//状态驱动的动态 CSS!!!!!\r\n\t\t\t// https://v3.cn.vuejs.org/api/sfc-style.html#%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-css\r\n\t\t\t//图片宽度的单位，是否使用百分比\r\n\t\t\timageWidth_usePercentFlag: false,\r\n\r\n\t\t\t//横屏(Landscape)状态的漫画页宽度，百分比\r\n\t\t\tsinglePageWidth_Percent: 50,\r\n\t\t\tdoublePageWidth_Percent: 95,\r\n\r\n\t\t\t//横屏(Landscape)状态的漫画页宽度，PX\r\n\t\t\tsinglePageWidth_PX: 720,\r\n\t\t\tdoublePageWidth_PX: 1080,\r\n\r\n\t\t\t//可见范围宽高的具体值\r\n\t\t\tclientWidth: 0,\r\n\t\t\tclientHeight: 0,\r\n\t\t};\r\n\t},\r\n\t//Vue3生命周期:  https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#beforecreate\r\n\t// created : 在绑定元素的属性或事件监听器被应用之前调用。\r\n\t// beforeMount : 指令第一次绑定到元素并且在挂载父组件之前调用。\r\n\t// mounted : 在绑定元素的父组件被挂载后调用。\r\n\t// beforeUpdate: 在更新包含组件的 VNode 之前调用。。\r\n\t// updated: 在包含组件的 VNode 及其子组件的 VNode 更新后调用。\r\n\t// beforeUnmount: 当指令与在绑定元素父组件卸载之前时，只调用一次。\r\n\t// unmounted: 当指令与元素解除绑定且父组件已卸载时，只调用一次。\r\n\r\n\tcreated() {\r\n\t\twindow.addEventListener(\"scroll\", this.onScroll);\r\n\t\t//文档视图调整大小时会触发 resize 事件。 https://developer.mozilla.org/zh-CN/docs/Web/API/Window/resize_event\r\n\t\twindow.addEventListener(\"resize\", this.onResize);\r\n\t\tthis.imageMaxWidth = window.innerWidth;\r\n\t\t//根据cookie初始化默认值,或初始化cookie值,cookie读取出来的都是字符串，不要直接用\r\n\r\n\t\t//是否显示页头\r\n\t\tif (localStorage.getItem(\"showHeaderFlag\") === \"true\") {\r\n\t\t\tthis.showHeaderFlag = true;\r\n\t\t} else if (localStorage.getItem(\"showHeaderFlag\") === \"false\") {\r\n\t\t\tthis.showHeaderFlag = false;\r\n\t\t}\r\n\t\t//console.log(\"读取设置并初始化: showHeaderFlag=\" + this.showHeaderFlag);\r\n\r\n\t\t//是否显示页数\r\n\t\tif (localStorage.getItem(\"showPageNumFlag_ScrollMode\") === \"true\") {\r\n\t\t\tthis.showPageNumFlag_ScrollMode = true;\r\n\t\t} else if (localStorage.getItem(\"showPageNumFlag_ScrollMode\") === \"false\") {\r\n\t\t\tthis.showPageNumFlag_ScrollMode = false;\r\n\t\t}\r\n\t\t//console.log(\"读取设置并初始化: showPageNumFlag_ScrollMode=\" + this.showPageNumFlag_ScrollMode);\r\n\r\n\t\t//是否获取黑白图片\r\n\t\tif (localStorage.getItem(\"ImageParameters_Gray\") === \"true\") {\r\n\t\t\tthis.imageParameters.gray = true;\r\n\t\t} else if (localStorage.getItem(\"ImageParameters_Gray\") === \"false\") {\r\n\t\t\tthis.imageParameters.gray = false;\r\n\t\t}\r\n\t\t// console.log(\"读取设置并初始化: ImageParameters_Gray=\" + this.imageParameters.gray);\r\n\r\n\t\t//是否压缩图片\r\n\t\tif (localStorage.getItem(\"ImageParameters_DoAutoResize\") === \"true\") {\r\n\t\t\tthis.imageParameters.do_auto_resize = true;\r\n\t\t} else if (localStorage.getItem(\"ImageParameters_DoAutoResize\") === \"false\") {\r\n\t\t\tthis.imageParameters.do_auto_resize = false;\r\n\t\t}\r\n\r\n\t\t//启用压缩的Width下限\r\n\t\tif (localStorage.getItem(\"ImageParametersResizeMaxWidth\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"ImageParametersResizeMaxWidth\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.imageParameters.resize_max_width = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//是否自动切白边\r\n\t\tif (localStorage.getItem(\"ImageParameters_DoAutoCrop\") === \"true\") {\r\n\t\t\tthis.imageParameters.do_auto_crop = true;\r\n\t\t} else if (localStorage.getItem(\"ImageParameters_DoAutoCrop\") === \"false\") {\r\n\t\t\tthis.imageParameters.do_auto_crop = false;\r\n\t\t}\r\n\r\n\t\t//切白边参数\r\n\t\tif (localStorage.getItem(\"ImageParameters_DoAutoCrop\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"ImageParameters_DoAutoCrop\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.imageParameters.auto_crop = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//宽度是否使用百分比\r\n\t\tif (localStorage.getItem(\"imageWidth_usePercentFlag\") === \"true\") {\r\n\t\t\tthis.imageWidth_usePercentFlag = true;\r\n\t\t} else if (localStorage.getItem(\"imageWidth_usePercentFlag\") === \"false\") {\r\n\t\t\tthis.imageWidth_usePercentFlag = false;\r\n\t\t}\r\n\r\n\t\t//javascript 数字类型转换：https://www.runoob.com/js/js-type-conversion.html\r\n\t\t// NaN不能通过相等操作符（== 和 ===）来判断\r\n\r\n\t\t//漫画页宽度，Percent\r\n\t\tif (localStorage.getItem(\"singlePageWidth_Percent\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"singlePageWidth_Percent\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.singlePageWidth_Percent = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"doublePageWidth_Percent\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"doublePageWidth_Percent\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.doublePageWidth_Percent = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//漫画页宽度，PX\r\n\t\tif (localStorage.getItem(\"singlePageWidth_PX\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"singlePageWidth_PX\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.singlePageWidth_PX = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"doublePageWidth_PX\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"doublePageWidth_PX\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.doublePageWidth_PX = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//当前颜色\r\n\t\tif (localStorage.getItem(\"ScrollModeDefaultColor\") != null) {\r\n\t\t\tthis.model.color = localStorage.getItem(\"ScrollModeDefaultColor\");\r\n\t\t\tthis.onBackgroundColorChange(this.model.color);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// //挂载前\r\n\tbeforeMount() {\r\n\r\n\t},\r\n\tonMounted() {\r\n\t\t//console.log('mounted in the composition api!')\r\n\t\tthis.isLandscapeMode = this.inLandscapeModeCheck();\r\n\t\tthis.isPortraitMode = !this.inLandscapeModeCheck();\r\n\t\t// https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#beforemount\r\n\t\tthis.$nextTick(function () {\r\n\t\t\t//视图渲染之后运行的代码\r\n\t\t})\r\n\t},\r\n\t//卸载前\r\n\tbeforeUnmount() {\r\n\t\t//组件销毁前，销毁监听事件\r\n\t\twindow.removeEventListener(\"scroll\", this.onScroll);\r\n\t\twindow.removeEventListener('resize', this.onResize)\r\n\t},\r\n\tmethods: {\r\n\t\t//打开抽屉\r\n\t\tdrawerActivate(place) {\r\n\t\t\tthis.drawerActive = true\r\n\t\t\tthis.drawerPlacement = place\r\n\t\t},\r\n\t\t//关闭抽屉\r\n\t\tdrawerDeactivate() {\r\n\t\t\tthis.drawerActive = false\r\n\t\t},\r\n\t\t//开始素描模式\r\n\t\tstartSketchMode() {\r\n\t\t\tthis.$emit(\"setTemplate\", \"sketch\");\r\n\t\t},\r\n\t\t//接收Draw的参数，继续往父组件传\r\n\t\tOnSetTemplate(value) {\r\n\t\t\tthis.$emit(\"setTemplate\", value);\r\n\t\t},\r\n\t\tonBackgroundColorChange(value) {\r\n\t\t\t// value #997E50\r\n\t\t\t// 16进制转10进制\r\n\t\t\tlet r = Number('0x' + value.substr(1, 2))\r\n\t\t\tlet g = Number('0x' + value.substr(3, 2))\r\n\t\t\tlet b = Number('0x' + value.substr(5, 2))\r\n\t\t\t// console.log(value);\r\n\t\t\t// console.log(\"R:\" + r + \" G:\" + g + \" B:\" + b);\r\n\t\t\t//题头在背景色的基础上亮一些\r\n\t\t\tlet subR = 40\r\n\t\t\tlet subG = 30\r\n\t\t\tlet subB = 42\r\n\t\t\tlet r2 = (r < 255 - subR) ? (r + subR) : (r + parseInt((255 - r) / 2))\r\n\t\t\tlet g2 = (g < 255 - subG) ? (g + subG) : (g + parseInt((255 - g) / 2))\r\n\t\t\tlet b2 = (b < 255 - subB) ? (b + subB) : (b + parseInt((255 - b) / 2))\r\n\t\t\tif (r > 250) {\r\n\t\t\t\tr2 = r - subR\r\n\t\t\t}\r\n\t\t\tif (g > 250) {\r\n\t\t\t\tg2 = g - subG\r\n\t\t\t}\r\n\t\t\tif (b > 250) {\r\n\t\t\t\tb2 = b - subB\r\n\t\t\t}\r\n\t\t\tif (r < 50) {\r\n\t\t\t\tr2 = r + 3 * subR\r\n\t\t\t}\r\n\t\t\tif (g < 50) {\r\n\t\t\t\tg2 = g + 3 * subG\r\n\t\t\t}\r\n\t\t\tif (b < 50) {\r\n\t\t\t\tb2 = b + 3 * subB\r\n\t\t\t}\r\n\t\t\t// //背景亮的时候，页头暗。背景暗的时候，页头亮。\r\n\t\t\t// let subR = 40\r\n\t\t\t// let subG = 30\r\n\t\t\t// let subB = 42\r\n\t\t\t// let r2 = (r < 125) ? (r + subR) : (r - subR)\r\n\t\t\t// let g2 = (g < 255) ? (g + subG) : (g - subG)\r\n\t\t\t// let b2 = (b < 255) ? (b + subB) : (b - subB)\r\n\r\n\r\n\t\t\t// console.log(\"R2:\" + r2 + \" G2:\" + g2 + \" B2:\" + b2);\r\n\t\t\t// 10进制转16进制\r\n\t\t\tthis.model.colorHeader = \"#\" + r2.toString(16) + g2.toString(16) + b2.toString(16)\r\n\t\t},\r\n\t\t//关闭抽屉的时候保存配置 \r\n\t\t//如果在一个组件上使用了 v-model:xxx，应该使用 @update:xxx  https://www.naiveui.com/zh-CN/os-theme/docs/common-issues\r\n\t\tsaveConfigToLocalStorage() {\r\n\t\t\t// 储存配置\r\n\t\t\tlocalStorage.setItem(\"showHeaderFlag\", this.showHeaderFlag);\r\n\t\t\tlocalStorage.setItem(\"showPageNumFlag_ScrollMode\", this.showPageNumFlag_ScrollMode);\r\n\t\t\tlocalStorage.setItem(\"imageWidth_usePercentFlag\", this.imageWidth_usePercentFlag);\r\n\t\t\tlocalStorage.setItem(\"singlePageWidth_Percent\", this.singlePageWidth_Percent);\r\n\t\t\tlocalStorage.setItem(\"doublePageWidth_Percent\", this.doublePageWidth_Percent);\r\n\t\t\tlocalStorage.setItem(\"singlePageWidth_PX\", this.singlePageWidth_PX);\r\n\t\t\tlocalStorage.setItem(\"doublePageWidth_PX\", this.doublePageWidth_PX);\r\n\t\t\tlocalStorage.setItem(\"ScrollModeDefaultColor\", this.model.color);\r\n\t\t\t//set对有setXXXChange函数的来说有些多余，但没有set函数的话就有必要了\r\n\t\t\tlocalStorage.setItem(\"ImageParameters_DoAutoCrop\", this.imageParameters.auto_crop);\r\n\t\t\tlocalStorage.setItem(\"ImageParametersResizeMaxWidth\", this.imageParameters.resize_max_width);\r\n\t\t},\r\n\t\tsetShowHeaderChange(value) {\r\n\t\t\t// console.log(\"value:\" + value);\r\n\t\t\tthis.showHeaderFlag = value;\r\n\t\t\tlocalStorage.setItem(\"showHeaderFlag\", value);\r\n\t\t\tconsole.log(\"成功保存设置: showHeaderFlag=\" + localStorage.getItem(\"showHeaderFlag\"));\r\n\t\t},\r\n\t\tsetShowPageNumChange(value) {\r\n\t\t\t// console.log(\"value:\" + value);\r\n\t\t\tthis.showPageNumFlag_ScrollMode = value;\r\n\t\t\tlocalStorage.setItem(\"showPageNumFlag_ScrollMode\", value);\r\n\t\t\tconsole.log(\"成功保存设置: showPageNumFlag_ScrollMode=\" + localStorage.getItem(\"showPageNumFlag_ScrollMode\"));\r\n\t\t},\r\n\t\tsetImageParameters_Gray(value) {\r\n\t\t\t// console.log(\"value:\" + value);\r\n\t\t\tthis.imageParameters.gray = value;\r\n\t\t\tlocalStorage.setItem(\"ImageParameters_Gray\", value);\r\n\t\t\tconsole.log(\"成功保存设置: ImageParameters_Gray=\" + localStorage.getItem(\"ImageParameters_Gray\"));\r\n\t\t},\r\n\r\n\t\tsetImageParameters_DoAutoResize(value) {\r\n\t\t\tthis.imageParameters.do_auto_resize = value;\r\n\t\t\tlocalStorage.setItem(\"ImageParameters_DoAutoResize\", value);\r\n\t\t\tconsole.log(\"成功保存设置: ImageParameters_DoAutoResize=\" + localStorage.getItem(\"ImageParameters_DoAutoResize\"));\r\n\t\t},\r\n\r\n\t\tsetImageParameters_DoAutoCrop(value) {\r\n\t\t\tthis.imageParameters.do_auto_crop = value;\r\n\t\t\tlocalStorage.setItem(\"ImageParameters_DoAutoCrop\", this.imageParameters.do_auto_crop);\r\n\t\t\tconsole.log(\"成功保存设置: ImageParameters_DoAutoCrop=\" + localStorage.getItem(\"ImageParameters_DoAutoCrop\"));\r\n\t\t},\r\n\r\n\t\tsetImageWidthUsePercentFlag(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.imageWidth_usePercentFlag = value;\r\n\t\t\tlocalStorage.setItem(\"imageWidth_usePercentFlag\", value);\r\n\t\t\tconsole.log(\"成功保存设置: imageWidth_usePercentFlag=\" + this.imageWidth_usePercentFlag);\r\n\t\t},\r\n\r\n\t\t//可见区域变化的时候改变页面状态\r\n\t\tonResize() {\r\n\t\t\tthis.imageMaxWidth = window.innerWidth\r\n\t\t\t// document.querySelectorAll(\".name\");\r\n\t\t\tthis.clientWidth = document.documentElement.clientWidth\r\n\t\t\tthis.clientHeight = document.documentElement.clientHeight\r\n\t\t\t// var aspectRatio = window.innerWidth / window.innerHeight\r\n\t\t\tthis.aspectRatio = this.clientWidth / this.clientHeight\r\n\t\t\t//console.log(\"OnReSize,aspectRatio=\" + this.aspectRatio);\r\n\t\t\t// 为了调试的时候方便，阈值是正方形\r\n\t\t\tif (this.aspectRatio > (19 / 19)) {\r\n\t\t\t\tthis.isLandscapeMode = true\r\n\t\t\t\tthis.isPortraitMode = false\r\n\t\t\t} else {\r\n\t\t\t\tthis.isLandscapeMode = false\r\n\t\t\t\tthis.isPortraitMode = true\r\n\t\t\t}\r\n\t\t},\r\n\t\t//页面滚动的时候改变各种值\r\n\t\tonScroll() {\r\n\t\t\tlet scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n\t\t\tthis.scrollDownFlag = scrollTop > this.scrollTopSave;\r\n\t\t\t//防手抖，小于一定数值状态就不变\r\n\t\t\tlet step = Math.abs(this.scrollTopSave - scrollTop);\r\n\t\t\t// console.log(\"step:\", step);\r\n\t\t\tthis.scrollTopSave = scrollTop\r\n\t\t\tif (step > 5) {\r\n\t\t\t\tthis.showBackTopFlag = (scrollTop > 400) && !this.scrollDownFlag;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取鼠标位置，决定是否打开设置面板\r\n\t\tonMouseClick(e) {\r\n\t\t\tthis.clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n\t\t\tthis.clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n\t\t\t//浏览器的视口，不包括工具栏和滚动条:\r\n\t\t\tlet innerWidth = window.innerWidth\r\n\t\t\tlet innerHeight = window.innerHeight\r\n\t\t\tlet MinX = innerWidth * 0.4\r\n\t\t\tlet MaxX = innerWidth * 0.6\r\n\t\t\tlet MinY = innerHeight * 0.4\r\n\t\t\tlet MaxY = innerHeight * 0.6\r\n\t\t\tif ((this.clickX > MinX && this.clickX < MaxX) && (this.clickY > MinY && this.clickY < MaxY)) {\r\n\t\t\t\t//alert(\"点中了设置区域！\")\r\n\t\t\t\t//console.log(\"点中了设置区域！\");\r\n\t\t\t\tthis.drawerActivate('right')\r\n\t\t\t}\r\n\t\t\t// console.log(\"window.innerWidth=\", window.innerWidth, \"window.innerHeight=\", window.innerHeight);\r\n\t\t\t// console.log(\"MinX=\", MinX, \"MaxX=\", MaxX);\r\n\t\t\t// console.log(\"MinY=\", MinY, \"MaxY=\", MaxY);\r\n\t\t\t// console.log(\"x=\", e.x, \"y=\", e.y);\r\n\t\t},\r\n\r\n\t\tonMouseMove(e) {\r\n\t\t\tthis.clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n\t\t\tthis.clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n\t\t\t//浏览器的视口，不包括工具栏和滚动条:\r\n\t\t\tlet innerWidth = window.innerWidth\r\n\t\t\tlet innerHeight = window.innerHeight\r\n\t\t\tlet MinX = innerWidth * 0.4\r\n\t\t\tlet MaxX = innerWidth * 0.6\r\n\t\t\tlet MinY = innerHeight * 0.4\r\n\t\t\tlet MaxY = innerHeight * 0.6\r\n\t\t\tif ((this.clickX > MinX && this.clickX < MaxX) && (this.clickY > MinY && this.clickY < MaxY)) {\r\n\t\t\t\t//console.log(\"在设置区域！\");\r\n\t\t\t\te.currentTarget.style.cursor = 'url(/images/SettingsOutline.png), pointer';\r\n\t\t\t} else {\r\n\t\t\t\te.currentTarget.style.cursor = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseLeave(e) {\r\n\t\t\t//离开区域的时候，清空鼠标样式\r\n\t\t\te.currentTarget.style.cursor = '';\r\n\t\t},\r\n\r\n\t\tscrollToTop(scrollDuration) {\r\n\t\t\tlet scrollStep = -window.scrollY / (scrollDuration / 15),\r\n\t\t\t\tscrollInterval = setInterval(function () {\r\n\t\t\t\t\tif (window.scrollY !== 0) {\r\n\t\t\t\t\t\twindow.scrollBy(0, scrollStep);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse clearInterval(scrollInterval);\r\n\t\t\t\t}, 15);\r\n\t\t},\r\n\t\t//根据可视区域(viewport)长宽比，确认是横屏还是竖屏\r\n\t\t// aspect-ratio https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/aspect-ratio\r\n\t\t// window.innerWidth  不是响应式依赖，所以不能用计算属性\r\n\t\tinLandscapeModeCheck() {\r\n\t\t\t//避免除数等于0，虽然正常情况下不会触发\r\n\t\t\t// if (window.innerHeight == 0) {\r\n\t\t\t// \treturn false\r\n\t\t\t// }\r\n\t\t\t// var aspectRatio = document.documentElement.clientWidth / document.documentElement.clientHeight\r\n\t\t\tthis.aspectRatio = window.innerWidth / window.innerHeight\r\n\t\t\t// console.log(\"aspectRatio=\" + this.aspectRatio);\r\n\t\t\t// 为了测试方便，阈值是正方形\r\n\t\t\treturn this.aspectRatio > (19 / 19);\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tsPWL() {\r\n\t\t\tif (this.imageWidth_usePercentFlag) {\r\n\t\t\t\treturn this.singlePageWidth_Percent + '%';\r\n\t\t\t} else {\r\n\t\t\t\treturn this.singlePageWidth_PX + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\tdPWL() {\r\n\t\t\tif (this.imageWidth_usePercentFlag) {\r\n\t\t\t\treturn this.doublePageWidth_Percent + '%';\r\n\t\t\t} else {\r\n\t\t\t\treturn this.doublePageWidth_PX + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\tsPWP() {\r\n\t\t\tif (this.imageWidth_usePercentFlag) {\r\n\t\t\t\treturn this.singlePageWidth_Percent + '%';\r\n\t\t\t} else {\r\n\t\t\t\treturn this.singlePageWidth_PX + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\tdPWP() {\r\n\t\t\tif (this.imageWidth_usePercentFlag) {\r\n\t\t\t\treturn this.doublePageWidth_Percent + '%';\r\n\t\t\t} else {\r\n\t\t\t\treturn this.doublePageWidth_PX + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n});\r\n</script>\r\n\r\n<style></style>\r\n\r\n<style scoped>\r\n.manga {\r\n\tmax-width: 100%;\r\n\tbackground: v-bind(\"model.color\");\r\n}\r\n\r\n.header {\r\n\tpadding: 0px;\r\n\twidth: 100%;\r\n\theight: 7vh;\r\n\tbackground: v-bind(\"model.colorHeader\");\r\n}\r\n\r\n/* https://developer.mozilla.org/zh-CN/docs/Web/CSS/object-fit */\r\n.manga img {\r\n\tmargin: auto;\r\n\t/* object-fit: scale-down; */\r\n\tpadding: 3px 0px;\r\n\tborder-radius: 7px;\r\n\tbox-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.page_hint {\r\n\t/* 文字颜色 */\r\n\tcolor: #ffffff;\r\n\t/* 文字阴影：https://www.w3school.com.cn/css/css3_shadows.asp*/\r\n\ttext-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\r\n}\r\n\r\n.LoadingImage {\r\n\twidth: 90vw;\r\n\tmax-width: 90vw;\r\n}\r\n.ErrorImage {\r\n\twidth: 90vw;\r\n\tmax-width: 90vw;\r\n}\r\n\r\n/* 横屏（显示区域）时的CSS样式，IE无效 */\r\n@media screen and (min-aspect-ratio: 19/19) {\r\n\t.SinglePageImage {\r\n\t\twidth: v-bind(sPWL);\r\n\t\tmax-width: 100%;\r\n\t}\r\n\t.DoublePageImage {\r\n\t\twidth: v-bind(dPWL);\r\n\t\tmax-width: 100%;\r\n\t}\r\n}\r\n\r\n/* 竖屏(显示区域)CSS样式，IE无效 */\r\n@media screen and (max-aspect-ratio: 19/19) {\r\n\t.SinglePageImage {\r\n\t\t/* width: 100%; */\r\n\t\twidth: v-bind(sPWP);\r\n\t\tmax-width: 100%;\r\n\t}\r\n\t.DoublePageImage {\r\n\t\t/* width: 100%; */\r\n\t\twidth: v-bind(dPWP);\r\n\t\tmax-width: 100%;\r\n\t}\r\n}\r\n</style>\r\n","<template>\r\n  <header class=\"header\">\r\n    <!-- 以后放返回箭头？ -->\r\n    <!-- SVG资源来自 https://www.xicons.org/#/ -->\r\n    <n-icon size=\"40\">\r\n      <book-outline />\r\n    </n-icon>\r\n    <!-- 标题，可下载压缩包 -->\r\n    <n-space>\r\n      <n-ellipsis style=\"max-width: 60vw;\">\r\n        <h2 v-if=\"bookIsFolder\" :href=\"'raw/' + bookName\">{{ bookName }}</h2>\r\n        <h2>\r\n          <a v-if=\"!this.bookIsFolder\" :href=\"'raw/' + bookName\">{{ bookName }}</a>\r\n        </h2>\r\n      </n-ellipsis>\r\n    </n-space>\r\n    <!-- slot，用来插入右边的设置图标 -->\r\n    <slot></slot>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { useCookies } from \"vue3-cookies\";\r\nimport { NSpace, NIcon, NEllipsis, } from 'naive-ui'\r\nimport { BookOutline } from '@vicons/ionicons5'\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n  name: \"Header\",\r\n  props: ['bookIsFolder', 'bookName'],\r\n  components: {\r\n    NSpace,\r\n    NIcon,\r\n    NEllipsis,\r\n    BookOutline,//图标,来自 https://www.xicons.org/#/   需要安装（npm i -D @vicons/ionicons5）与导入\r\n  },\r\n  setup() {\r\n    const { cookies } = useCookies();\r\n    return { cookies };\r\n  },\r\n  data() {\r\n    return {\r\n      someflag: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n  },\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.header {\r\n  /* background: #f2f3df; */\r\n  color: #111;\r\n  text-align: center;\r\n  padding: 12px;\r\n  font-size: 12px;\r\n  display: flex;\r\n  /* https://www.w3school.com.cn/tiy/t.asp?f=css3_flexbox_justify-content_space-between */\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n","import { render } from \"./Header.vue?vue&type=template&id=bf37a460&scoped=true\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\n\nimport \"./Header.vue?vue&type=style&index=0&id=bf37a460&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bf37a460\"]])\n\nexport default __exports__","<template>\r\n  <n-drawer\r\n    v-bind:show=\"drawerActive\"\r\n    @update:show=\"saveConfigToCookie\"\r\n    :height=\"275\"\r\n    :width=\"251\"\r\n    :placement=\"drawerPlacement\"\r\n  >\r\n    <n-drawer-content closable>\r\n      <!-- 抽屉：自定义头部 -->\r\n      <template #header>\r\n        <span>{{ $t('ReaderSettings') }}</span>\r\n      </template>\r\n      <!-- 选择：切换页面模式 -->\r\n      <n-space>\r\n        <n-radio-group v-model:value=\"nowTemplateLocal\">\r\n          <!-- 卷軸模式 -->\r\n          <n-radio-button\r\n            :checked=\"nowTemplateLocal === 'scroll'\"\r\n            @change=\"onChangeTemplate\"\r\n            value=\"scroll\"\r\n            name=\"basic-demo\"\r\n          >{{ $t('scroll_mode') }}</n-radio-button>\r\n          <!-- 翻頁模式 -->\r\n          <n-radio-button\r\n            :checked=\"nowTemplateLocal === 'flip'\"\r\n            @change=\"onChangeTemplate\"\r\n            value=\"flip\"\r\n            name=\"basic-demo\"\r\n          >{{ $t('flip_mode') }}</n-radio-button>\r\n        </n-radio-group>\r\n      </n-space>\r\n      <!-- 分割线 -->\r\n      <n-divider />\r\n      <!-- 父组件在此处插入自定义内容 -->\r\n      <slot></slot>\r\n      <n-divider />\r\n      <n-popconfirm @positive-click=\"handlePositiveClick\" @negative-click=\"handleNegativeClick\">\r\n        <template #trigger>\r\n          <n-button>{{ $t('reset_all_settings') }}</n-button>\r\n        </template>\r\n        {{ $t('do_you_reset_all_settings') }}\r\n      </n-popconfirm>\r\n      <!-- 抽屉：自定义底部 -->\r\n      <template #footer>\r\n        <n-select\r\n          placeholder=\"select language\"\r\n          v-model:value=\"this.$i18n.locale\"\r\n          :options=\"this.languageOptions\"\r\n          @update:value=\"OnChangeLanguage\"\r\n        />\r\n        <n-button\r\n          v-if=\"nowTemplate == 'flip' || nowTemplate == 'scroll'\"\r\n          @click=\"startSketchMode\"\r\n        >{{ $t('startSketchMode') }}</n-button>\r\n        <n-button v-if=\"nowTemplate == 'sketch'\" @click=\"stopSketchMode\">{{ $t('stopSketchMode') }}</n-button>\r\n      </template>\r\n    </n-drawer-content>\r\n  </n-drawer>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { useCookies } from \"vue3-cookies\";\r\nimport { NDrawer, NDivider, NDrawerContent, NSpace, NRadioGroup, NRadioButton, NButton, NSelect, NPopconfirm, } from 'naive-ui'\r\nimport { defineComponent, } from 'vue'\r\n// import { useI18n } from 'vue-i18n'\r\n\r\n\r\nexport default defineComponent({\r\n  name: \"Drawer\",\r\n  props: ['book', 'initDrawerActive', 'initDrawerPlacement', 'nowTemplate'],\r\n  emits: [\"setT\", \"saveConfig\", \"startSketch\", \"stopSketch\", \"closeDrawer\"],\r\n  components: {\r\n    NDrawer,//抽屉，可以从上下左右4个方向冒出. https://www.naiveui.com/zh-CN/os-theme/components/drawer\r\n    NDrawerContent,//抽屉内容\r\n    NSpace,//间距 https://www.naiveui.com/zh-CN/os-theme/components/space\r\n    NDivider,//间隔\r\n    NRadioGroup,//单选  https://www.naiveui.com/zh-CN/os-theme/components/radio\r\n    NRadioButton,//单选 用按钮显得更优雅一点\r\n    NButton,//按钮，来自:https://www.naiveui.com/zh-CN/os-theme/components/button\r\n    // NAvatar,//头像 https://www.naiveui.com/zh-CN/os-theme/components/avatar\r\n    NSelect, //选择器 https://www.naiveui.com/zh-CN/os-theme/components/select\r\n    NPopconfirm, //弹出确认 https://www.naiveui.com/zh-CN/os-theme/components/popconfirm\r\n  },\r\n  setup() {\r\n    const { cookies } = useCookies();\r\n    // const message = useMessage(); 需要导入 'naive-ui'的useMessage\r\n\r\n    return {\r\n      handlePositiveClick() {\r\n        // message.info(\"是的\");\r\n        //清除localStorage保存的设定\r\n        localStorage.clear();\r\n        //刷新当前页面\r\n        location.reload();\r\n      },\r\n      handleNegativeClick() {\r\n        // message.info(\"并不\");\r\n      },\r\n      cookies,\r\n      languageOptions: [\r\n        {\r\n          label: \"English\",\r\n          value: 'en',\r\n        },\r\n        {\r\n          label: '日本語',\r\n          value: 'ja'\r\n        },\r\n        {\r\n          label: '中文',\r\n          value: 'zh'\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      someflag: \"\",\r\n      nowTemplateLocal: \"\",\r\n    };\r\n  },\r\n  //挂载前\r\n  beforeMount() {\r\n    var lang = this.cookies.get(\"userLanguageSetting\");\r\n    if (lang) {\r\n      this.$i18n.locale = lang;\r\n    }\r\n    this.nowTemplateLocal = this.nowTemplate;\r\n  },\r\n  computed: {\r\n    drawerActive() {\r\n      return this.initDrawerActive;\r\n    },\r\n    drawerPlacement() {\r\n      return this.initDrawerPlacement;\r\n    },\r\n  },\r\n  methods: {\r\n\r\n    onClearLocalSetting() {\r\n      // //清除localStorage保存的设定\r\n      // localStorage.clear();\r\n      // //刷新当前页面\r\n      // location.reload();\r\n      //载入新文档替换当前页面\r\n      //window.location.replace(\"http://www.example.com\")\r\n    },\r\n\r\n    OnChangeLanguage(value) {\r\n      this.cookies.set(\"userLanguageSetting\", value);\r\n    },\r\n    // 关闭抽屉时，保存设置到cookies\r\n    saveConfigToCookie(show) {\r\n      if (show == false) {\r\n        this.$emit('closeDrawer');\r\n        this.$emit('saveConfig');\r\n      }\r\n    },\r\n    startSketchMode() {\r\n      this.$emit('startSketch');\r\n    },\r\n    stopSketchMode() {\r\n      this.$emit('stopSketch');\r\n    },\r\n    //切换模板的函数，需要配合vue-router\r\n    onChangeTemplate() {\r\n      // this.$emit(\"greet\", this.nowTemplateLocal);\r\n      // console.log(\"onChangeTemplate:\"+value);\r\n      if (this.nowTemplateLocal === \"scroll\") {\r\n        this.$emit(\"setT\", \"scroll\");\r\n      }\r\n      if (this.nowTemplateLocal === \"flip\") {\r\n        this.$emit(\"setT\", \"flip\");\r\n      }\r\n      if (this.nowTemplateLocal === \"sketch\") {\r\n        this.$emit(\"setT\", \"sketch\");\r\n      }\r\n      // location.reload(); //需要刷新？ 以后研究VueRouter并去掉\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n\r\n\r\n\r\n\r\n","import { render } from \"./Drawer.vue?vue&type=template&id=0fc0b4c0\"\nimport script from \"./Drawer.vue?vue&type=script&lang=js\"\nexport * from \"./Drawer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ScrollMode.vue?vue&type=template&id=f2b889c0&scoped=true\"\nimport script from \"./ScrollMode.vue?vue&type=script&lang=js\"\nexport * from \"./ScrollMode.vue?vue&type=script&lang=js\"\n\nimport \"./ScrollMode.vue?vue&type=style&index=0&id=f2b889c0&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f2b889c0\"]])\n\nexport default __exports__","<template>\r\n\t<div class=\"body\" v-if=\"this.book\">\r\n\t\t<!-- 顶部，标题页头 -->\r\n\t\t<Header\r\n\t\t\tclass=\"header\"\r\n\t\t\tv-if=\"this.showHeaderFlag_FlipMode\"\r\n\t\t\t:bookIsFolder=\"book.IsFolder\"\r\n\t\t\t:bookName=\"book.name\"\r\n\t\t>\r\n\t\t\t<!-- 右边的设置图标，点击屏幕中央也可以打开 -->\r\n\t\t\t<n-icon size=\"40\" @click=\"drawerActivate('right')\">\r\n\t\t\t\t<settings-outline />\r\n\t\t\t</n-icon>\r\n\t\t</Header>\r\n\r\n\t\t<!-- 主题，漫画div -->\r\n\t\t<!-- 事件修饰符： https://v3.cn.vuejs.org/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6 -->\r\n\t\t<div\r\n\t\t\tclass=\"manga_area\"\r\n\t\t\tid=\"MangaMain\"\r\n\t\t\t@click.stop=\"onMouseClick\"\r\n\t\t\t@mousemove.stop=\"onMouseMove\"\r\n\t\t\t@mouseleave.stop=\"onMouseLeave\"\r\n\t\t>\r\n\t\t\t<div class=\"manga_area_img_div\">\r\n\t\t\t\t<!-- 非自动拼合模式最简单，直接显示一张图 -->\r\n\t\t\t\t<img v-bind:src=\"this.book.pages[nowPageNum - 1].url\" v-bind:alt=\"nowPageNum\" />\r\n\r\n\t\t\t\t<!-- 简单拼合双页，不管单双页什么的 -->\r\n\t\t\t\t<img\r\n\t\t\t\t\tv-if=\"(!this.autoDoublePageModeFlag) && this.simpleDoublePageModeFlag && this.nowPageNum < this.book.all_page_num\"\r\n\t\t\t\t\tv-bind:src=\"this.book.pages[nowPageNum].url\"\r\n\t\t\t\t\tv-bind:alt=\"nowPageNum + 1\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<!-- 自动拼合模式当前页，如果开启自动拼合，右边可能显示拼合页 -->\r\n\t\t\t\t<img\r\n\t\t\t\t\tv-if=\"this.autoDoublePageModeFlag && this.nowPageNum < this.book.all_page_num && this.nowAndNextPageIsSingle()\"\r\n\t\t\t\t\tv-bind:src=\"this.book.pages[nowPageNum].url\"\r\n\t\t\t\t\tv-bind:alt=\"nowPageNum + 1\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div v-if=\"this.showPageHintFlag_FlipMode\" class=\"sketch_hint\">{{ pageNumOrSketchHint }}</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 页脚 拖动条 -->\r\n\t\t<div class=\"footer\" v-if=\"this.showFooterFlag_FlipMode\">\r\n\t\t\t<!-- 右手模式用 ，底部滑动条 -->\r\n\t\t\t<div v-if=\"this.rightToLeftFlag\">\r\n\t\t\t\t<span>{{ this.nowPageNum }}</span>\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\tv-model:value=\"nowPageNum\"\r\n\t\t\t\t\t:max=\"this.book.all_page_num\"\r\n\t\t\t\t\t:min=\"1\"\r\n\t\t\t\t\t:step=\"1\"\r\n\t\t\t\t\t:format-tooltip=\"(value) => `${value}`\"\r\n\t\t\t\t\t@update:value=\"this.saveNowPageNumOnUpdate\"\r\n\t\t\t\t/>\r\n\t\t\t\t<span>{{ this.book.all_page_num }}</span>\r\n\t\t\t</div>\r\n\t\t\t<!-- 左手模式用 底部滑动条，设置reverse翻转计数方向 -->\r\n\t\t\t<div v-if=\"!this.rightToLeftFlag\">\r\n\t\t\t\t<span>{{ this.book.all_page_num }}</span>\r\n\t\t\t\t<n-slider\r\n\t\t\t\t\treverse\r\n\t\t\t\t\tv-model:value=\"nowPageNum\"\r\n\t\t\t\t\t:max=\"this.book.all_page_num\"\r\n\t\t\t\t\t:min=\"1\"\r\n\t\t\t\t\t:step=\"1\"\r\n\t\t\t\t\t:format-tooltip=\"(value) => `${value}`\"\r\n\t\t\t\t\t@update:value=\"this.saveNowPageNumOnUpdate\"\r\n\t\t\t\t/>\r\n\t\t\t\t<span>{{ this.nowPageNum }}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!-- 设置抽屉，一开始隐藏 -->\r\n\t<Drawer\r\n\t\t:initDrawerActive=\"this.drawerActive\"\r\n\t\t:initDrawerPlacement=\"this.drawerPlacement\"\r\n\t\t@saveConfig=\"this.saveConfigToCookie\"\r\n\t\t@startSketch=\"this.startSketchMode\"\r\n\t\t@stopSketch=\"this.stopSketchMode\"\r\n\t\t@closeDrawer=\"this.drawerDeactivate\"\r\n\t\t@setT=\"OnSetTemplate\"\r\n\t\t:nowTemplate=\"this.nowTemplate\"\r\n\t>\r\n\t\t<span>{{ $t(\"setBackColor\") }}</span>\r\n\t\t<n-color-picker\r\n\t\t\tv-model:value=\"model.color\"\r\n\t\t\t:modes=\"['rgb']\"\r\n\t\t\t:show-alpha=\"false\"\r\n\t\t\t@update:value=\"onBackgroundColorChange\"\r\n\t\t/>\r\n\r\n\t\t<!-- 分割线 -->\r\n\t\t<n-divider />\r\n\r\n\t\t<!-- 开关：页头与书名 -->\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.showHeaderFlag_FlipMode\"\r\n\t\t\t\t@update:value=\"setShowHeaderChange\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t(\"showHeader\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"showHeader\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 开关：显示阅读进度条） -->\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.showFooterFlag_FlipMode\"\r\n\t\t\t\t@update:value=\"setShowFooterFlagChange\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t(\"readingProgressBar\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"readingProgressBar\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 开关：显示当前页数 -->\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.showPageHintFlag_FlipMode\"\r\n\t\t\t\t@update:value=\"setShowPageNumChange\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t(\"showPageNum\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"showPageNum\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 分割线 -->\r\n\t\t<n-divider />\r\n\r\n\t\t<!-- 保存阅读进度 -->\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.saveNowPageNumFlag_FlipMode\"\r\n\t\t\t\t@update:value=\"this.setSavePageNumFlag\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t(\"savePageNum\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"savePageNum\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 开关：翻页模式，默认右半屏-->\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.rightToLeftFlag\"\r\n\t\t\t\t:rail-style=\"railStyle\"\r\n\t\t\t\t@update:value=\"this.setFlipScreenFlag\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t(\"rightScreenToNext\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"leftScreenToNext\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<n-space>\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.simpleDoublePageModeFlag\"\r\n\t\t\t\t@update:value=\"this.setSimpleDoublePage_FlipMode\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t('simpleDoublePage') }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t('simpleDoublePage') }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 分割线 -->\r\n\t\t<n-divider />\r\n\r\n\t\t<!-- 开关：Debug，开启一些不稳定功能 -->\r\n\t\t<n-space>\r\n\t\t\t<n-switch size=\"large\" v-model:value=\"this.debugModeFlag\" @update:value=\"this.setDebugModeFlag\">\r\n\t\t\t\t<template #checked>{{ $t(\"debugMode\") }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t(\"debugMode\") }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<n-space v-if=\"this.debugModeFlag\">\r\n\t\t\t<n-switch\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-model:value=\"this.autoDoublePageModeFlag\"\r\n\t\t\t\t@update:value=\"this.setAutoDoublePage_FlipMode\"\r\n\t\t\t>\r\n\t\t\t\t<template #checked>{{ $t('autoDoublePage') }}</template>\r\n\t\t\t\t<template #unchecked>{{ $t('autoDoublePage') }}</template>\r\n\t\t\t</n-switch>\r\n\t\t</n-space>\r\n\r\n\t\t<!-- 分割线 -->\r\n\t\t<n-divider v-if=\"this.nowTemplate == 'sketch'\" />\r\n\t\t<!-- 自动翻页秒数 -->\r\n\t\t<!-- 数字输入% -->\r\n\t\t<n-input-number\r\n\t\t\tv-if=\"this.nowTemplate == 'sketch'\"\r\n\t\t\tsize=\"small\"\r\n\t\t\t:show-button=\"false\"\r\n\t\t\tv-model:value=\"this.sketchFlipSecond\"\r\n\t\t\t:max=\"65535\"\r\n\t\t\t:min=\"1\"\r\n\t\t\t:update-value-on-input=\"false\"\r\n\t\t\t@update:value=\"this.resetSketchSecondCount\"\r\n\t\t>\r\n\t\t\t<template #prefix>{{ $t('pageTurningSeconds') }}</template>\r\n\t\t\t<template #suffix>{{ $t(\"second\") }}</template>\r\n\t\t</n-input-number>\r\n\t\t<!-- 滑动选择% -->\r\n\t\t<n-slider\r\n\t\t\tv-if=\"this.nowTemplate == 'sketch'\"\r\n\t\t\tv-model:value=\"this.sketchFlipSecond\"\r\n\t\t\t:step=\"1\"\r\n\t\t\t:max=\"120\"\r\n\t\t\t:min=\"1\"\r\n\t\t\t:marks=\"marks\"\r\n\t\t\t:format-tooltip=\"value => `${value}s`\"\r\n\t\t\t@update:value=\"this.resetSketchSecondCount\"\r\n\t\t/>\r\n\t</Drawer>\r\n</template>\r\n\r\n<script>\r\nimport { useCookies } from \"vue3-cookies\";\r\n// 自定义组件\r\nimport Header from \"@/components/Header.vue\";\r\nimport Drawer from \"@/components/Drawer.vue\";\r\nimport { defineComponent, reactive } from \"vue\";\r\n// 直接导入组件并使用它。这种情况下，只有导入的组件才会被打包。\r\nimport { NColorPicker, NDivider, NIcon, NInputNumber, NSlider, NSpace, NSwitch, useMessage, } from \"naive-ui\";\r\nimport { SettingsOutline } from \"@vicons/ionicons5\";\r\n\r\nexport default defineComponent({\r\n\tname: \"FlipMode\",\r\n\tprops: [\"book\", \"nowTemplate\"],\r\n\temits: [\"setTemplate\"],\r\n\tcomponents: {\r\n\t\tHeader,\r\n\t\tDrawer,\r\n\t\tNSpace, //间距 https://www.naiveui.com/zh-CN/os-theme/components/space\r\n\t\tNSlider, //滑动选择  Slider https://www.naiveui.com/zh-CN/os-theme/components/slider\r\n\t\tNSwitch, //开关   https://www.naiveui.com/zh-CN/os-theme/components/switch\r\n\t\t// NLayout,//布局 https://www.naiveui.com/zh-CN/os-theme/components/layout\r\n\t\t// NLayoutSider,\r\n\t\t// NLayoutContent,\r\n\t\tNIcon, //图标  https://www.naiveui.com/zh-CN/os-theme/components/icon\r\n\t\tSettingsOutline, //图标,来自 https://www.xicons.org/#/   需要安装（npm i -D @vicons/ionicons5）\r\n\t\tNColorPicker, //颜色选择器 Color Picker https://www.naiveui.com/zh-CN/os-theme/components/color-picker\r\n\t\tNDivider, //分割线  https://www.naiveui.com/zh-CN/os-theme/components/divider\r\n\t\tNInputNumber,///  https://www.naiveui.com/zh-CN/os-theme/components/input-number\r\n\t\t// useNotification, // https://www.naiveui.com/zh-CN/os-theme/components/notification\r\n\t},\r\n\tsetup() {\r\n\t\tconst { cookies } = useCookies();\r\n\t\t//背景颜色，颜色选择器用\r\n\t\tconst model = reactive({\r\n\t\t\tcolor: \"#f6f7eb\",\r\n\t\t\tcolorHeader: \"#d1c9c1\",\r\n\t\t});\r\n\t\t//警告信息\r\n\t\tconst message = useMessage()\r\n\t\t// const notification = useNotification()\r\n\t\treturn {\r\n\t\t\tmessage,\r\n\t\t\t//背景色\r\n\t\t\tmodel,\r\n\t\t\tcookies,\r\n\t\t\t//开关的颜色\r\n\t\t\trailStyle: ({ focused, checked }) => {\r\n\t\t\t\tconst style = {};\r\n\t\t\t\tif (checked) {\r\n\t\t\t\t\tstyle.background = \"#18a058\";\r\n\t\t\t\t\tif (focused) {\r\n\t\t\t\t\t\tstyle.boxShadow = \"0 0 0 2px #d0305040\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.background = \"#2080f0\";\r\n\t\t\t\t\tif (focused) {\r\n\t\t\t\t\t\tstyle.boxShadow = \"0 0 0 2px #2080f040\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn style;\r\n\t\t\t},\r\n\t\t\t//滑动秒数建议值\r\n\t\t\tmarks: {\r\n\t\t\t\t30: '30',\r\n\t\t\t\t60: '60',\r\n\t\t\t\t90: '90',\r\n\t\t\t\t120: '120',\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdrawerActive: false,\r\n\t\t\tdrawerPlacement: \"right\",\r\n\t\t\t//开发模式 未完成的功能与设置，开启Debug以后才能见到\r\n\t\t\tdebugModeFlag: true,\r\n\t\t\t//是否显示页头\r\n\t\t\tshowHeaderFlag_FlipMode: true,\r\n\t\t\t//是否显示页脚\r\n\t\t\tshowFooterFlag_FlipMode: true,\r\n\t\t\t//是否是右半屏翻页（从右到左）?日本漫画从左到右\r\n\t\t\trightToLeftFlag: true,\r\n\t\t\t//简单拼合双叶\r\n\t\t\tsimpleDoublePageModeFlag: false,\r\n\t\t\t//自动拼合双叶，效果不太好\r\n\t\t\tautoDoublePageModeFlag: false,\r\n\t\t\t//是否保存当前页数\r\n\t\t\tsaveNowPageNumFlag_FlipMode: true,\r\n\t\t\t//当前页数，注意语义，直接就是1开始的页数，不是数组下标，在pages数组当中用的时候需要-1\r\n\t\t\tnowPageNum: 1,\r\n\t\t\t//素描模式标记\r\n\t\t\tsketchModeFlag: false,\r\n\t\t\t//是否显示素描提示\r\n\t\t\tshowPageHintFlag_FlipMode: false,\r\n\t\t\t//翻页间隔时间\r\n\t\t\tsketchFlipSecond: 30,\r\n\t\t\t//计时用，从0开始\r\n\t\t\tsketchSecondCount: 0,\r\n\t\t\t//计时器ID\r\n\t\t\tinterval: null,\r\n\t\t\tnowPageIsDouble: false,\r\n\t\t\tnextPageIsDouble: false,\r\n\t\t\tnowAndNextPageIsSingleFlag: true,\r\n\t\t};\r\n\t},\r\n\t//在选项API中使用 Vue 生命周期钩子：\r\n\tcreated() {\r\n\t\t//初始化默认值\r\n\t\t// https://www.developers.pub/wiki/1006381/1013545\r\n\t\t// https://developer.mozilla.org/zh-CN/docs/Web/API/Storage/setItem\r\n\t\t//一个域名下存放的cookie的个数有限制，不同的浏览器存放的个数不一样,一般为20个。因为不需要上传，使用localStorage（本地存储）存储在浏览器，永不过期。\r\n\t\tif (localStorage.getItem(\"debugModeFlag\") == \"true\") {\r\n\t\t\tthis.debugModeFlag = true;\r\n\t\t} else if (localStorage.getItem(\"debugModeFlag\") == \"false\") {\r\n\t\t\tthis.debugModeFlag = false;\r\n\t\t}\r\n\t\t//是否显示标题\r\n\t\tif (localStorage.getItem(\"showHeaderFlag_FlipMode\") == \"true\") {\r\n\t\t\tthis.showHeaderFlag_FlipMode = true;\r\n\t\t} else if (localStorage.getItem(\"showHeaderFlag_FlipMode\") == \"false\") {\r\n\t\t\tthis.showHeaderFlag_FlipMode = false;\r\n\t\t}\r\n\t\t//是否显示页脚\r\n\t\tif (localStorage.getItem(\"showFooterFlag_FlipMode_FlipMode\") == \"true\") {\r\n\t\t\tthis.showFooterFlag_FlipMode = true;\r\n\t\t} else if (localStorage.getItem(\"showFooterFlag_FlipMode_FlipMode\") == \"false\") {\r\n\t\t\tthis.showFooterFlag_FlipMode = false;\r\n\t\t}\r\n\t\t//是否显示页数\r\n\t\tif (localStorage.getItem(\"showPageHintFlag_FlipMode\") == \"true\") {\r\n\t\t\tthis.showPageHintFlag_FlipMode = true;\r\n\t\t} else if (localStorage.getItem(\"showPageHintFlag_FlipMode\") == \"false\") {\r\n\t\t\tthis.showPageHintFlag_FlipMode = false;\r\n\t\t}\r\n\t\t//翻页方向、是否用右半屏翻页\r\n\t\tif (localStorage.getItem(\"rightToLeftFlag\") == \"true\") {\r\n\t\t\tthis.rightToLeftFlag = true;\r\n\t\t} else if (localStorage.getItem(\"rightToLeftFlag\") == \"false\") {\r\n\t\t\tthis.rightToLeftFlag = false;\r\n\t\t}\r\n\t\t//简单合并单页\r\n\t\tif (localStorage.getItem(\"simpleDoublePageModeFlag\") == \"true\") {\r\n\t\t\tthis.simpleDoublePageModeFlag = true;\r\n\t\t} else if (localStorage.getItem(\"simpleDoublePageModeFlag\") == \"false\") {\r\n\t\t\tthis.simpleDoublePageModeFlag = false;\r\n\t\t}\r\n\t\t//自动合并单页\r\n\t\tif (localStorage.getItem(\"autoDoublePageModeFlag\") == \"true\") {\r\n\t\t\tthis.autoDoublePageModeFlag = true;\r\n\t\t} else if (localStorage.getItem(\"autoDoublePageModeFlag\") == \"false\") {\r\n\t\t\tthis.autoDoublePageModeFlag = false;\r\n\t\t}\r\n\t\t//是否保存阅读进度\r\n\t\tif (localStorage.getItem(\"saveNowPageNumFlag_FlipMode\") == \"true\") {\r\n\t\t\tthis.saveNowPageNumFlag_FlipMode = true;\r\n\t\t} else if (localStorage.getItem(\"saveNowPageNumFlag_FlipMode\") == \"false\") {\r\n\t\t\tthis.saveNowPageNumFlag_FlipMode = false;\r\n\t\t}\r\n\t\t//当前背景色\r\n\t\tif (localStorage.getItem(\"FlipModeDefaultColor\") != null) {\r\n\t\t\tthis.model.color = localStorage.getItem(\"FlipModeDefaultColor\");\r\n\t\t\tthis.onBackgroundColorChange(this.model.color);\r\n\t\t}\r\n\t\t//倒计时秒数\r\n\t\tif (localStorage.getItem(\"sketchFlipSecond\") != null) {\r\n\t\t\tlet saveNum = Number(localStorage.getItem(\"sketchFlipSecond\"));\r\n\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\tthis.sketchFlipSecond = saveNum;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t// beforeMount : 指令第一次绑定到元素并且在挂载父组件之前调用。\r\n\tbeforeMount() {\r\n\t\t// 注册监听\r\n\t\twindow.addEventListener(\"keyup\", this.handleKeyup);\r\n\t\t// 自动开始Sketch模式\r\n\t\tif (this.nowTemplate == \"sketch\") {\r\n\t\t\tthis.startSketchMode();\r\n\t\t}\r\n\t},\r\n\t//卸载前\r\n\tbeforeUnmount() {\r\n\t\t// 销毁监听\r\n\t\twindow.removeEventListener(\"keyup\", this.handleKeyup);\r\n\t},\r\n\t// mounted : 在绑定元素的父组件被挂载后调用。\r\n\tmounted() {\r\n\t\t//需要得书籍远程数据，避免初始化失败，所以延迟0.5秒执行\r\n\t\tsetTimeout(this.setNowPageNumByCookie, 500);\r\n\t},\r\n\tupdated() {\r\n\t\t//界面有更新就会调用，随便乱放会引起难以调试的BUG\r\n\t},\r\n\tmethods: {\r\n\t\tonBackgroundColorChange(value) {\r\n\t\t\t// value #997E50\r\n\t\t\t// 16进制转10进制\r\n\t\t\tlet r = Number('0x' + value.substr(1, 2))\r\n\t\t\tlet g = Number('0x' + value.substr(3, 2))\r\n\t\t\tlet b = Number('0x' + value.substr(5, 2))\r\n\t\t\t// console.log(value);\r\n\t\t\t// console.log(\"R:\" + r + \" G:\" + g + \" B:\" + b);\r\n\t\t\t//题头在背景色的基础上亮一些\r\n\t\t\tlet subR = 40\r\n\t\t\tlet subG = 30\r\n\t\t\tlet subB = 42\r\n\t\t\tlet r2 = (r < 255 - subR) ? (r + subR) : (r + parseInt((255 - r) / 2))\r\n\t\t\tlet g2 = (g < 255 - subG) ? (g + subG) : (g + parseInt((255 - g) / 2))\r\n\t\t\tlet b2 = (b < 255 - subB) ? (b + subB) : (b + parseInt((255 - b) / 2))\r\n\t\t\tif (r > 250) {\r\n\t\t\t\tr2 = r - subR\r\n\t\t\t}\r\n\t\t\tif (g > 250) {\r\n\t\t\t\tg2 = g - subG\r\n\t\t\t}\r\n\t\t\tif (b > 250) {\r\n\t\t\t\tb2 = b - subB\r\n\t\t\t}\r\n\t\t\tif (r < 50) {\r\n\t\t\t\tr2 = r + 3 * subR\r\n\t\t\t}\r\n\t\t\tif (g < 50) {\r\n\t\t\t\tg2 = g + 3 * subG\r\n\t\t\t}\r\n\t\t\tif (b < 50) {\r\n\t\t\t\tb2 = b + 3 * subB\r\n\t\t\t}\r\n\t\t\t// //背景亮的时候，页头暗。背景暗的时候，页头亮。\r\n\t\t\t// let subR = 40\r\n\t\t\t// let subG = 30\r\n\t\t\t// let subB = 42\r\n\t\t\t// let r2 = (r < 125) ? (r + subR) : (r - subR)\r\n\t\t\t// let g2 = (g < 255) ? (g + subG) : (g - subG)\r\n\t\t\t// let b2 = (b < 255) ? (b + subB) : (b - subB)\r\n\t\t\t// console.log(\"R2:\" + r2 + \" G2:\" + g2 + \" B2:\" + b2);\r\n\t\t\t// 10进制转16进制\r\n\t\t\tthis.model.colorHeader = \"#\" + r2.toString(16) + g2.toString(16) + b2.toString(16)\r\n\t\t},\r\n\t\t// 分析单双页用\r\n\t\tnowAndNextPageIsSingle() {\r\n\t\t\tthis.nowPageIsDouble = this.checkImageIsDoublePage_byPageNum(this.nowPageNum);\r\n\t\t\tthis.nextPageIsDouble = this.checkImageIsDoublePage_byPageNum(this.nowPageNum + 1);\r\n\t\t\tif (this.nowPageIsDouble || this.nextPageIsDouble) {\r\n\t\t\t\tthis.nowAndNextPageIsSingleFlag = false;\r\n\t\t\t\treturn false\r\n\t\t\t} else {\r\n\t\t\t\tthis.nowAndNextPageIsSingleFlag = false;\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t},\r\n\t\t//根据书籍UUID，设定当前页数，因为需要取得远程书籍数据（this.book），所以延迟执行\r\n\t\tsetNowPageNumByCookie() {\r\n\t\t\tif (this.saveNowPageNumFlag_FlipMode) {\r\n\t\t\t\tlet cookieValue = localStorage.getItem(\"nowPageNum\" + this.book.uuid);\r\n\t\t\t\tif (cookieValue != null) {\r\n\t\t\t\t\tlet saveNum = Number(cookieValue);\r\n\t\t\t\t\tif (!isNaN(saveNum)) {\r\n\t\t\t\t\t\tthis.nowPageNum = saveNum;\r\n\t\t\t\t\t\t// console.log(\"成功读取页数\" + saveNum);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"读取页数失败，this.nowPageNum=\" + this.nowPageNum);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"cookie里面没找到:\" + \"nowPageNum\" + this.book.uuid);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//console.log(\"不读取页数，this.saveNowPageNumFlag_FlipMode=\" + this.saveNowPageNumFlag_FlipMode);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//设置当前模板-接收Drawer的参数，继续往父组件传\r\n\t\tOnSetTemplate(value) {\r\n\t\t\tthis.$emit(\"setTemplate\", value);\r\n\t\t},\r\n\t\t//打开抽屉\r\n\t\tdrawerActivate(place) {\r\n\t\t\tthis.drawerActive = true;\r\n\t\t\tthis.drawerPlacement = place;\r\n\t\t},\r\n\t\t//关闭抽屉\r\n\t\tdrawerDeactivate() {\r\n\t\t\tthis.drawerActive = false;\r\n\t\t},\r\n\t\t//开始速写倒计时\r\n\t\tstartSketchMode() {\r\n\t\t\tthis.message.success(this.$t('startSketchMessage'));\r\n\t\t\tthis.drawerActive = false; //关闭设置抽屉\r\n\t\t\tthis.sketchModeFlag = true;\r\n\t\t\tthis.showPageHintFlag_FlipMode = true;\r\n\t\t\t//是否显示页头\r\n\t\t\tthis.showHeaderFlag_FlipMode = false;\r\n\t\t\t//是否显示页脚\r\n\t\t\tthis.showFooterFlag_FlipMode = false;\r\n\t\t\tthis.$emit(\"setTemplate\", \"sketch\");\r\n\t\t\t//setTimeout和setInterval函数，都返回一个表示计数器编号的整数值，将该整数传入clearTimeout和clearInterval函数，就可以取消对应的定时器。setInterval指定某个任务每隔一段时间就执行一次。setTimeout()用于在指定的毫秒数后调用函数或计算表达式  setTimeout('console.log(2)',1000);\r\n\t\t\tthis.interval = setInterval(this.sketchCount, 1000);\r\n\t\t},\r\n\t\t//修改间隔的时候重新计秒数\r\n\t\tresetSketchSecondCount() {\r\n\t\t\tthis.sketchSecondCount = 0;\r\n\t\t},\r\n\t\t//停止速写倒计时\r\n\t\tstopSketchMode() {\r\n\t\t\tthis.message.success(this.$t('goodjob_and_byebye'));\r\n\t\t\tthis.sketchModeFlag = false;\r\n\t\t\tthis.showPageHintFlag_FlipMode = false;\r\n\t\t\tthis.sketchSecondCount = 0;\r\n\t\t\t//是否显示页头\r\n\t\t\tthis.showHeaderFlag_FlipMode = true;\r\n\t\t\t//是否显示页脚\r\n\t\t\tthis.showFooterFlag_FlipMode = true;\r\n\t\t\tthis.$emit(\"setTemplate\", \"flip\");\r\n\t\t\tclearInterval(this.interval); // 清除定时器\r\n\t\t},\r\n\t\t//开始速写（quick sketch），每秒执行一次\r\n\t\tsketchCount() {\r\n\t\t\tif (this.sketchModeFlag == false || this.nowTemplate != \"sketch\") {\r\n\t\t\t\tthis.stopSketchMode();\r\n\t\t\t}\r\n\t\t\tthis.sketchSecondCount = this.sketchSecondCount + 1;\r\n\t\t\tlet nowSecond = this.sketchSecondCount % this.sketchFlipSecond;\r\n\t\t\t// console.log(\"sketchSecondCount=\" + this.sketchSecondCount + \" nowSecond:\" + nowSecond)\r\n\t\t\tif (nowSecond == 0) {\r\n\t\t\t\tif (this.nowPageNum < this.book.all_page_num) {\r\n\t\t\t\t\tthis.flipPage(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toPage(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭抽屉时，保存设置到cookies\r\n\t\tsaveConfigToCookie() {\r\n\t\t\tlocalStorage.setItem(\"debugModeFlag\", this.debugModeFlag);\r\n\t\t\tlocalStorage.setItem(\"showHeaderFlag_FlipMode\", this.showHeaderFlag_FlipMode);\r\n\t\t\tlocalStorage.setItem(\"showFooterFlag_FlipMode\", this.showFooterFlag_FlipMode);\r\n\t\t\tlocalStorage.setItem(\"showPageHintFlag_FlipMode\", this.showPageHintFlag_FlipMode);\r\n\t\t\tlocalStorage.setItem(\"rightToLeftFlag\", this.rightToLeftFlag);\r\n\t\t\tlocalStorage.setItem(\"simpleDoublePageModeFlag\", this.simpleDoublePageModeFlag);\r\n\t\t\tlocalStorage.setItem(\"autoDoublePageModeFlag\", this.autoDoublePageModeFlag);\r\n\t\t\tlocalStorage.setItem(\"saveNowPageNumFlag_FlipMode\", this.saveNowPageNumFlag_FlipMode);\r\n\t\t\tlocalStorage.setItem(\"nowPageNum\" + this.book.uuid, this.nowPageNum);\r\n\t\t\tlocalStorage.setItem(\"FlipModeDefaultColor\", this.model.color);\r\n\t\t\tlocalStorage.setItem(\"sketchFlipSecond\", this.sketchFlipSecond);\r\n\t\t},\r\n\t\t// 随即换一下背景色\r\n\t\trandomBackgroundColor() {\r\n\t\t\tlet R = Math.ceil(Math.random() * 155) + 100;\r\n\t\t\tlet G = Math.ceil(Math.random() * 155) + 100;\r\n\t\t\tlet B = Math.ceil(Math.random() * 100) + 100;\r\n\t\t\t//rgb(185,175,145)\r\n\t\t\tlet RGB = \"rgb(\" + R + \",\" + G + \",\" + B + \")\";\r\n\t\t\t// console.log(RGB);\r\n\t\t\tthis.model.color = RGB;\r\n\t\t},\r\n\t\t//HTML DOM 事件 https://www.runoob.com/jsref/dom-obj-event.html\r\n\t\t// 进入绑定该事件的元素和其子元素均会触发该事件，所以有一个重复触发，冒泡过程。其对应的离开事件 mouseout\r\n\t\tonMouseOver() { },\r\n\t\t// 只有进入绑定该事件的元素才会触发事件，也就是不会冒泡。其对应的离开事件mouseleave\r\n\t\tonMouseEnter() {\r\n\t\t\t// this.randomColor = 'background-color: rgb(235,235,235)';\r\n\t\t},\r\n\t\tonMouseLeave(e) {\r\n\t\t\t//离开区域的时候，清空鼠标样式\r\n\t\t\te.currentTarget.style.cursor = \"\";\r\n\t\t},\r\n\t\t//事件修饰符: https://v3.cn.vuejs.org/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6\r\n\t\tonMouseMove(e) {\r\n\t\t\t// // offsetX/Y获取到是触发点相对被触发dom的左上角距离\r\n\t\t\t// let offsetX = e.offsetX;\r\n\t\t\t// let offsetY = e.offsetY;\r\n\t\t\t//根据ID获取元素\r\n\t\t\t// let mangaDiv =document.getElementById(\"MangaMain\")\r\n\t\t\t//不用自己获取元素\r\n\t\t\t// let offsetWidth = e.currentTarget.offsetWidth;\r\n\t\t\t// let offsetHeight = e.currentTarget.offsetHeight;\r\n\t\t\tlet clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n\t\t\tlet clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n\t\t\t//浏览器的视口，不包括工具栏和滚动条:\r\n\t\t\tlet innerWidth = window.innerWidth;\r\n\t\t\tlet innerHeight = window.innerHeight;\r\n\t\t\tlet MinX = innerWidth * 0.4;\r\n\t\t\tlet MaxX = innerWidth * 0.6;\r\n\t\t\tlet MinY = innerHeight * 0.4;\r\n\t\t\tlet MaxY = innerHeight * 0.6;\r\n\t\t\tif (clickX > MinX && clickX < MaxX && clickY > MinY && clickY < MaxY) {\r\n\t\t\t\t//设置区域;\r\n\t\t\t\te.currentTarget.style.cursor = \"url(/images/SettingsOutline.png), pointer\";\r\n\t\t\t} else {\r\n\t\t\t\tif (clickX < innerWidth * 0.5) {\r\n\t\t\t\t\t//设置左边的鼠标指针\r\n\t\t\t\t\tif (this.rightToLeftFlag && this.nowPageNum == 1) {\r\n\t\t\t\t\t\t//右边翻下一页，且目前是第一页的时候，左边的鼠标指针，设置为禁止翻页\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/Prohibited28Filled.png), pointer\";\r\n\t\t\t\t\t} else if (!this.rightToLeftFlag && this.nowPageNum == this.book.all_page_num) {\r\n\t\t\t\t\t\t//左边翻下一页，且目前是最后一页的时候，左边的鼠标指针，设置为禁止翻页\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/Prohibited28Filled.png), pointer\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//正常情况下，左边是向左的箭头\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/ArrowLeft.png), pointer\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//设置右边的鼠标指针\r\n\t\t\t\t\tif (this.rightToLeftFlag && this.nowPageNum == this.book.all_page_num) {\r\n\t\t\t\t\t\t//右边翻下一页，且目前是最后页的时候，右边的鼠标指针，设置为禁止翻页\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/Prohibited28Filled.png), pointer\";\r\n\t\t\t\t\t} else if (!this.rightToLeftFlag && this.nowPageNum == 1) {\r\n\t\t\t\t\t\t//左边翻下一页，且目前是第一页的时候，右边的鼠标指针，设置为禁止翻页\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/Prohibited28Filled.png), pointer\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//正常情况下，右边是向右的箭头\r\n\t\t\t\t\t\te.currentTarget.style.cursor = \"url(/images/ArrowRight.png), pointer\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//根据鼠标点击事件的位置，决定是左右翻页还是打开设置\r\n\t\tonMouseClick(e) {\r\n\t\t\t//元素自身的宽高，会有子元素问题\r\n\t\t\t// let offsetX = e.offsetX;\r\n\t\t\t// let offsetY = e.offsetY;\r\n\t\t\t// let offsetWidth = e.currentTarget.offsetWidth;\r\n\t\t\t// let offsetHeight = e.currentTarget.offsetHeight;\r\n\t\t\t// //随机一下背景色，只是为了好玩\r\n\t\t\t// if (this.debugModeFlag) {\r\n\t\t\t// \tthis.randomBackgroundColor();\r\n\t\t\t// }\r\n\t\t\tlet clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n\t\t\tlet clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n\t\t\t//浏览器的可视区域宽高，不包括工具栏和滚动条:\r\n\t\t\tlet innerHeight = window.innerHeight;\r\n\t\t\tlet innerWidth = window.innerWidth;\r\n\t\t\tlet MinX = innerWidth * 0.4;\r\n\t\t\tlet MaxX = innerWidth * 0.6;\r\n\t\t\tlet MinY = innerHeight * 0.4;\r\n\t\t\tlet MaxY = innerHeight * 0.6;\r\n\t\t\t// console.log(\"鼠标点击：e.offsetX=\" + offsetX, \"e.offsetY=\" + offsetY);\r\n\t\t\tif (clickX > MinX && clickX < MaxX && clickY > MinY && clickY < MaxY) {\r\n\t\t\t\t//点中了设置区域\r\n\t\t\t\tthis.drawerActivate(\"right\");\r\n\t\t\t} else {\r\n\t\t\t\t//决定如何翻页\r\n\t\t\t\tif (clickX < innerWidth * 0.5) {\r\n\t\t\t\t\t//左边的翻页\r\n\t\t\t\t\tif (this.rightToLeftFlag == true) {\r\n\t\t\t\t\t\tthis.toPerviousPage();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toNextPage();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//右边的翻页\r\n\t\t\t\t\tif (this.rightToLeftFlag == true) {\r\n\t\t\t\t\t\tthis.toNextPage();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toPerviousPage();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoNextPage() {\r\n\t\t\t//简单合并模式\r\n\t\t\tif (this.simpleDoublePageModeFlag) {\r\n\t\t\t\tif (this.nowPageNum < this.book.all_page_num - 1) {\r\n\t\t\t\t\tthis.flipPage(2);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.flipPage(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//如果开启了自动合并模式，并且当前页应该被合并\r\n\t\t\tif (this.autoDoublePageModeFlag && this.checkMergedStatus_ByPageNum(this.nowPageNum)) {\r\n\t\t\t\tif (this.nowPageNum < this.book.all_page_num - 1) {\r\n\t\t\t\t\tthis.flipPage(2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.flipPage(1);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.flipPage(1);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoPerviousPage() {\r\n\t\t\t//错误值,第0或第1页。\r\n\t\t\tif (this.nowPageNum <= 1) {\r\n\t\t\t\tconsole.log(\"Error toPerviousPage\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//简单合并模式\r\n\t\t\tif (this.simpleDoublePageModeFlag) {\r\n\t\t\t\tif (this.nowPageNum - 2 > 0) {\r\n\t\t\t\t\tthis.flipPage(-2);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.flipPage(-1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//自动合并模式\r\n\t\t\t//如果没有开启自动合并模式，或现在是第2页\r\n\t\t\tif (this.nowPageNum == 2 || !this.autoDoublePageModeFlag) {\r\n\t\t\t\tthis.flipPage(-1);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//如果前一页是双开叶\r\n\t\t\tlet pervIsDouble = this.checkImageIsDoublePage_byPageNum(this.nowPageNum - 1)\r\n\t\t\tif (pervIsDouble) {\r\n\t\t\t\tthis.flipPage(-1);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//如果前前页是双开叶\r\n\t\t\tlet PervPervIsDouble = this.checkImageIsDoublePage_byPageNum(this.nowPageNum - 2)\r\n\t\t\tif (PervPervIsDouble) {\r\n\t\t\t\tthis.flipPage(-1);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//都没return掉，那么前两张可以合并，减两页\r\n\t\t\tthis.flipPage(-2);\r\n\t\t},\r\n\r\n\t\t//给一个页数，然后判断自动双页模式下，是否应该预读并合并显示下一页\r\n\t\tcheckMergedStatus_ByPageNum(pageNum) {\r\n\t\t\t//如果没有开启自动双页模式，当然不需要\r\n\t\t\tif (!this.autoDoublePageModeFlag) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t//可能传入的错误值，打印到控制台\r\n\t\t\tif (pageNum <= 0 || pageNum >= this.book.all_page_num) {\r\n\t\t\t\tconsole.log(\"Error pageNum :\" + pageNum);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t//已经是最后一页了，显然不需要自动合并下一页\r\n\t\t\tif (pageNum == this.book.all_page_num) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t//分析现在这张图片的宽高比,看是不是双开页\r\n\t\t\tlet now_page_is_double_page = this.checkImageIsDoublePage_byPageNum(pageNum);\r\n\t\t\t//分析下一张漫画的宽高比,看是不是双开页\r\n\t\t\tlet next_page_is_double_page = this.checkImageIsDoublePage_byPageNum(pageNum + 1);\r\n\t\t\t//如果现在这张就是开页漫画，直接不用比\r\n\t\t\t//如果下一张漫画是开页，显然也没法合并\r\n\t\t\treturn !(now_page_is_double_page || next_page_is_double_page);\r\n\t\t},\r\n\t\tcheckImageIsDoublePage_byPageNum(pageNum) {\r\n\t\t\t//如果传进了错误值\r\n\t\t\tif (pageNum <= 0 || pageNum > this.book.all_page_num) {\r\n\t\t\t\tconsole.log(\"Error checkImageIsDoublePage_byPageNum:\" + pageNum);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.book.pages[pageNum - 1].image_type == \"SinglePage\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.book.pages[pageNum - 1].image_type == \"DoublePage\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet image = new Image();\r\n\t\t\tlet temp_flag = false;//返回结果用\r\n\t\t\timage.src = this.book.pages[pageNum - 1].url;\r\n\t\t\t// image.complete 图片是否完全加载完成。\r\n\t\t\t//https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement/complete\r\n\r\n\t\t\t// https://corbusier.github.io/2017/06/29/%E5%9B%BE%E7%89%87%E7%9A%84%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E4%B8%8Eonload%E5%87%BD%E6%95%B0/\r\n\t\t\t// onload函数要写在改变src前,这样确保了onload函数一定会被调用\r\n\t\t\t// complete只是变向的在判断img是否已经触发了load事件,而且是不精准的判断\r\n\t\t\t// complete在不同浏览器下,表现不一致,不建议使用\r\n\t\t\t// 无论浏览器是否存在图片缓存,重新请求图片地址,都会触发onload事件\r\n\r\n\t\t\t// 牵扯到加载资源，这段代码需要改进……\r\n\t\t\tif (image.complete) {\r\n\t\t\t\treturn image.width >= image.height;\r\n\t\t\t} else {\r\n\t\t\t\t//否则加载图片\r\n\t\t\t\timage.onload = function () {\r\n\t\t\t\t\t//是单页漫画\r\n\t\t\t\t\tif (image.width < image.height) {\r\n\t\t\t\t\t\timage.onload = null;\t// 避免重复加载\r\n\t\t\t\t\t\ttemp_flag = false;//宽小于高，是是竖着的，单页漫画\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//是双页漫画\r\n\t\t\t\t\t\timage.onload = null;\t// 避免重复加载\r\n\t\t\t\t\t\ttemp_flag = true;//宽大于高，很可能是开页\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn temp_flag;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//翻页，其实不限页数\r\n\t\tflipPage: function (num) {\r\n\t\t\tif (\r\n\t\t\t\tthis.nowPageNum + num <= this.book.all_page_num &&\r\n\t\t\t\tthis.nowPageNum + num >= 1\r\n\t\t\t) {\r\n\t\t\t\tthis.nowPageNum = this.nowPageNum + num;\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"无法继续翻，Num:\" + num)\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tthis.message.info(this.$t(\"hintLastPage\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.message.info(this.$t(\"hintFirstPage\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//保存页数\r\n\t\t\tthis.saveNowPageNumOnUpdate(this.nowPageNum);\r\n\t\t},\r\n\t\t//拖动进度条,或翻页的时候保存页数\r\n\t\tsaveNowPageNumOnUpdate(value) {\r\n\t\t\tif (this.saveNowPageNumFlag_FlipMode) {\r\n\t\t\t\tlocalStorage.setItem(\"nowPageNum\" + this.book.uuid, value);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//跳转到指定页数\r\n\t\ttoPage: function (num) {\r\n\t\t\tif (num <= this.book.all_page_num && num >= 1) {\r\n\t\t\t\tthis.nowPageNum = num;\r\n\t\t\t}\r\n\t\t\tif (this.saveNowPageNumFlag_FlipMode) {\r\n\t\t\t\tlocalStorage.setItem(\"nowPageNum\" + this.book.uuid, this.nowPageNum);\r\n\t\t\t}\r\n\t\t\t// console.log(num);\r\n\t\t},\r\n\r\n\t\t// 键盘事件\r\n\t\thandleKeyup(event) {\r\n\t\t\t//错误:(815, 49) 不允许从实参中引用 'caller' 和 'callee'\r\n\t\t\tconst e = event || window.event;\r\n\t\t\tif (!e) return;\r\n\t\t\t//https://developer.mozilla.org/zh-CN/docs/Web/API/KeyboardEvent/keyCode\r\n\t\t\tswitch (e.key) {\r\n\t\t\t\tcase \"ArrowUp\":\r\n\t\t\t\tcase \"PageUp\":\r\n\t\t\t\tcase \"ArrowLeft\":\r\n\t\t\t\t\tthis.flipPage(-1); //上一页\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Space\":\r\n\t\t\t\tcase \"ArrowDown\":\r\n\t\t\t\tcase \"PageDown\":\r\n\t\t\t\tcase \"ArrowRight\":\r\n\t\t\t\t\tthis.flipPage(1); //下一页\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Home\":\r\n\t\t\t\t\tthis.toPage(1); //跳转到第一页\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"End\":\r\n\t\t\t\t\tthis.toPage(this.book.all_page_num); //跳转到最后一页\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Ctrl\":\r\n\t\t\t\t\t// Ctrl key pressed //组合键？\r\n\t\t\t\t\t//openOverlay();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t// console.log(e.keyCode);\r\n\t\t\t// console.log(e.key);\r\n\t\t},\r\n\r\n\t\tsetShowHeaderChange(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.showHeaderFlag_FlipMode = value;\r\n\t\t\tlocalStorage.setItem(\"showHeaderFlag_FlipMode\", value);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"cookie设置完毕: showHeaderFlag_FlipMode=\" +\r\n\t\t\t\tlocalStorage.getItem(\"showHeaderFlag_FlipMode\")\r\n\t\t\t);\r\n\t\t},\r\n\t\tsetShowFooterFlagChange(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.showFooterFlag_FlipMode = value;\r\n\t\t\tlocalStorage.setItem(\"showFooterFlag_FlipMode\", value);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"cookie设置完毕: showFooterFlag_FlipMode=\" +\r\n\t\t\t\tlocalStorage.getItem(\"showFooterFlag_FlipMode\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tsetShowPageNumChange(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.showPageHintFlag_FlipMode = value;\r\n\t\t\tlocalStorage.setItem(\"showPageHintFlag_FlipMode\", value);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"cookie设置完毕: showPageHintFlag_FlipMode=\" +\r\n\t\t\t\tlocalStorage.getItem(\"showPageHintFlag_FlipMode\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tsetFlipScreenFlag(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.rightToLeftFlag = value;\r\n\t\t\tlocalStorage.setItem(\"rightToLeftFlag\", value);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"cookie设置完毕: rightToLeftFlag=\" +\r\n\t\t\t\tlocalStorage.getItem(\"rightToLeftFlag\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tsetSavePageNumFlag(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.saveNowPageNumFlag_FlipMode = value;\r\n\t\t\tlocalStorage.setItem(\"saveNowPageNumFlag_FlipMode\", value);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"cookie设置完毕: saveNowPageNumFlag_FlipMode=\" +\r\n\t\t\t\tlocalStorage.getItem(\"saveNowPageNumFlag_FlipMode\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tsetDebugModeFlag(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.debugModeFlag = value;\r\n\t\t\t//关闭Debug模式的时候顺便也关上“自动合并单双页”的功能（因为还有BUG）\r\n\t\t\tif (value == false) {\r\n\t\t\t\tthis.autoDoublePageModeFlag = false;\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"debugModeFlag\", value);\r\n\t\t\tconsole.log(\"cookie设置完毕: debugModeFlag=\" + localStorage.getItem(\"debugModeFlag\"));\r\n\t\t},\r\n\r\n\t\tsetAutoDoublePage_FlipMode(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.autoDoublePageModeFlag = value;\r\n\t\t\tif (value == true) {\r\n\t\t\t\tthis.simpleDoublePageModeFlag = false;\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"autoDoublePageModeFlag\", value);\r\n\t\t\tconsole.log(\"cookie设置完毕: autoDoublePageModeFlag=\" + localStorage.getItem(\"autoDoublePageModeFlag\"));\r\n\t\t},\r\n\r\n\t\tsetSimpleDoublePage_FlipMode(value) {\r\n\t\t\tconsole.log(\"value:\" + value);\r\n\t\t\tthis.simpleDoublePageModeFlag = value;\r\n\t\t\tif (value == true) {\r\n\t\t\t\tthis.autoDoublePageModeFlag = false;\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"simpleDoublePageModeFlag\", value);\r\n\t\t\tconsole.log(\"cookie设置完毕: simpleDoublePageModeFlag=\" + localStorage.getItem(\"simpleDoublePageModeFlag\"));\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t//页数或素描模式的提示\r\n\t\tpageNumOrSketchHint() {\r\n\t\t\tif (this.sketchModeFlag) {\r\n\t\t\t\tlet nowSecond = (this.sketchSecondCount % this.sketchFlipSecond) + 1;\r\n\t\t\t\tlet donePage = parseInt(this.sketchSecondCount / this.sketchFlipSecond);\r\n\t\t\t\tlet totalMinutes = parseInt((this.sketchSecondCount + 1) / 60);\r\n\t\t\t\t//计算几小时几分\r\n\t\t\t\tlet MinutesAndHourString = \"\";\r\n\t\t\t\t//如果不满意1小时，就不显示小时\r\n\t\t\t\tif (parseInt(totalMinutes / 60) == 0) {\r\n\t\t\t\t\tMinutesAndHourString = totalMinutes + this.$t(\"minute\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tMinutesAndHourString =\r\n\t\t\t\t\t\tparseInt(totalMinutes / 60) +\r\n\t\t\t\t\t\tthis.$t(\"hour\") +\r\n\t\t\t\t\t\t(totalMinutes % 60) +\r\n\t\t\t\t\t\tthis.$t(\"minute\");\r\n\t\t\t\t}\r\n\t\t\t\tlet AllTimeString =\r\n\t\t\t\t\tMinutesAndHourString + ((this.sketchSecondCount + 1) % 60) + this.$t(\"second\");\r\n\t\t\t\treturn this.$t(\"now_is\") +\r\n\t\t\t\t\tnowSecond +\r\n\t\t\t\t\tthis.$t(\"second\") +\r\n\t\t\t\t\t\"  \" +\r\n\t\t\t\t\tthis.$t(\"total_is\") +\r\n\t\t\t\t\tdonePage +\r\n\t\t\t\t\tthis.$t(\"page\") +\r\n\t\t\t\t\t\"  \" +\r\n\t\t\t\t\tthis.$t(\"totalTime\") +\r\n\t\t\t\t\tAllTimeString +\r\n\t\t\t\t\t\"  \" +\r\n\t\t\t\t\tthis.$t(\"interval\") +\r\n\t\t\t\t\tthis.sketchFlipSecond +\r\n\t\t\t\t\tthis.$t(\"second\");\r\n\t\t\t} else {\r\n\t\t\t\treturn this.nowPageNum + \"/\" + this.book.all_page_num;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmangaAreaHeight() {\r\n\t\t\tlet Height = 95;\r\n\t\t\t//页头和底部拖动条都显示,或有一个显示的时候，95%\r\n\t\t\tif (this.showFooterFlag_FlipMode && this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\tif (this.showFooterFlag_FlipMode && !this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\tif (!this.showFooterFlag_FlipMode && this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\t//页头和底部拖动条都不显示的时候，漫画占满屏幕\r\n\t\t\tif (!this.showFooterFlag_FlipMode && !this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 100;\r\n\t\t\t}\r\n\t\t\treturn Height + \"vh\";\r\n\t\t},\r\n\t\tmangaImageHeight() {\r\n\t\t\tlet Height = 95;\r\n\t\t\t//页头和底部拖动条都显示,或有一个显示的时候，95%\r\n\t\t\tif (this.showFooterFlag_FlipMode && this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\tif (this.showFooterFlag_FlipMode && !this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\tif (!this.showFooterFlag_FlipMode && this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 95;\r\n\t\t\t}\r\n\t\t\t//页头和拖动条都不显示的时候，漫画占满屏幕\r\n\t\t\tif (!this.showFooterFlag_FlipMode && !this.showHeaderFlag_FlipMode) {\r\n\t\t\t\tHeight = 100;\r\n\t\t\t}\r\n\t\t\t//与上面唯一的不同，减去素描提示的空间\r\n\t\t\tif (this.showPageHintFlag_FlipMode) {\r\n\t\t\t\tif (this.nowTemplate == \"sketch\") {\r\n\t\t\t\t\tHeight = Height - 6;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tHeight = Height - 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn Height + \"vh\";\r\n\t\t},\r\n\t\t//进入素描模式的时候，把高度放大一倍\r\n\t\tsketchHintHeight() {\r\n\t\t\tif (this.nowTemplate == \"sketch\") {\r\n\t\t\t\treturn \"6vh\";\r\n\t\t\t} else {\r\n\t\t\t\treturn \"3vh\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t//进入素描模式的时候，把字体放大\r\n\t\tsketchHintFontSize() {\r\n\t\t\tif (this.nowTemplate == \"sketch\") {\r\n\t\t\t\treturn \"24px\";\r\n\t\t\t} else {\r\n\t\t\t\treturn \"16px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t//从左到右还是从右到左\r\n\t\tget_flex_direction() {\r\n\t\t\tif (this.rightToLeftFlag == true) {\r\n\t\t\t\treturn \"row\"\r\n\t\t\t} else {\r\n\t\t\t\treturn \"row-reverse\"\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* 参考CSS盒子模型慢慢改 */\r\n/* https://www.runoob.com/css/css-boxmodel.html */\r\n/* CSS 高度和宽度 */\r\n/* https://www.w3school.com.cn/css/css_dimension.asp */\r\n/* CSS Flexbox 布局 */\r\n/* https://www.w3school.com.cn/css/css3_flexbox.asp */\r\n\r\n* {\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.body {\r\n\tfont-family: Arial;\r\n\tmargin: 0;\r\n\tpadding: 0px;\r\n\tdisplay: flex;\r\n\tmax-width: 100%;\r\n\t/* flex-direction: column垂直堆叠 flex 项目（从上到下），column-reverse从下到上 row从左到右 row-reverse从右到左 */\r\n\tflex-direction: column;\r\n\t/* justify-content 属性用于对齐 flex 项目。 将 justify-content 和 align-items 属性设置为居中，flex 项目将完美居中： */\r\n\tjustify-content: center;\r\n\t/* center 值将 flex 项目在容器中间对齐： */\r\n\talign-items: center;\r\n\tbackground: v-bind(\"model.color\");\r\n}\r\n\r\n.header {\r\n\tpadding: 0px;\r\n\twidth: 100%;\r\n\theight: 5vh;\r\n\tbackground: v-bind(\"model.colorHeader\");\r\n}\r\n\r\n/* 漫画div */\r\n.manga_area {\r\n\twidth: 100vw;\r\n\theight: v-bind(mangaAreaHeight);\r\n\tmax-height: 100vh;\r\n\tmax-width: 100vw;\r\n\tpadding: 0px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: baseline;\r\n\tuser-select: none; /* 不可以被选中 */\r\n\t-moz-user-select: none; /* 火狐 */\r\n\t-webkit-user-select: none; /* 谷歌 */\r\n\tborder-radius: 3px;\r\n\tbox-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n/* 漫画div中的图片div*/\r\n.manga_area_img_div {\r\n\twidth: 100vw;\r\n\theight: v-bind(mangaAreaHeight);\r\n\tdisplay: flex;\r\n\tflex-direction: v-bind(get_flex_direction);\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmargin: 0px;\r\n}\r\n\r\n/* 最后的一或两张图片*/\r\n.manga_area_img_div img {\r\n\t/* max-height: inherit 继承 */\r\n\t/* max-height: inherit; */\r\n\tmax-height: v-bind(mangaImageHeight);\r\n\tmax-width: 100vw;\r\n\tmargin: 0px; /* 两张图片之间不要留空间*/\r\n\tpadding: 0px;\r\n\tbackground-color: #aaa;\r\n\r\n\t/* flex-grow: 100; */\r\n}\r\n\r\n/* 漫画div图片下面的页数*/\r\n.sketch_hint {\r\n\theight: v-bind(sketchHintHeight);\r\n\tpadding: 0px;\r\n\ttext-align: center;\r\n\tfont-size: v-bind(sketchHintFontSize);\r\n\t/* 文字颜色 */\r\n\tcolor: #7e6e6e;\r\n\t/* 文字阴影：https://www.w3school.com.cn/css/css3_shadows.asp*/\r\n\ttext-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\r\n\twidth: 100vw;\r\n}\r\n\r\n/* 页脚 */\r\n.footer {\r\n\theight: 5vh;\r\n\ttext-align: center;\r\n\tbackground: v-bind(\"model.colorHeader\");\r\n\twidth: 80vw;\r\n\tpadding: 0px;\r\n}\r\n\r\n.footer div {\r\n\theight: 5vh;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t/* center 值将 flex 项目在容器中间对齐： */\r\n\talign-items: center;\r\n\tcolor: rgb(80, 80, 255);\r\n\ttext-shadow: 2px 2px 5px yellowgreen;\r\n}\r\n\r\n.footer div > span {\r\n\twidth: 10vw;\r\n}\r\n</style>\r\n","import { render } from \"./FlipMode.vue?vue&type=template&id=671604bb&scoped=true\"\nimport script from \"./FlipMode.vue?vue&type=script&lang=js\"\nexport * from \"./FlipMode.vue?vue&type=script&lang=js\"\n\nimport \"./FlipMode.vue?vue&type=style&index=0&id=671604bb&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-671604bb\"]])\n\nexport default __exports__","<template>\r\n    <div id=\"BookShelf\" v-if=\"this.book\" class=\"manga\">\r\n        <Header\r\n            class=\"footer\"\r\n            v-if=\"this.showHeaderFlag\"\r\n            :bookIsFolder=\"book.IsFolder\"\r\n            :bookName=\"book.name\"\r\n        >\r\n            <!-- 右边的设置图标，点击屏幕中央也可以打开 -->\r\n            <n-icon size=\"40\" @click=\"drawerActivate('right')\">\r\n                <settings-outline />\r\n            </n-icon>\r\n        </Header>\r\n\r\n        <!-- 渲染漫画部分 -->\r\n        <div\r\n            class=\"main_manga\"\r\n            v-for=\"(page, key) in book.pages\"\r\n            :key=\"page.url\"\r\n            @click=\"onMouseClick($event)\"\r\n            @mousemove=\"onMouseMove\"\r\n            @mouseleave=\"onMouseLeave\"\r\n        >\r\n            <img v-lazy=\"page.url\" v-bind:alt=\"key + 1\" v-bind:key=\"key\" />\r\n            <div\r\n                class=\"page_hint\"\r\n                v-if=\"showPageNumFlag_BookShelf\"\r\n            >{{ key + 1 }}/{{ book.all_page_num }}</div>\r\n        </div>\r\n\r\n        <Drawer\r\n            :initDrawerActive=\"this.drawerActive\"\r\n            :initDrawerPlacement=\"this.drawerPlacement\"\r\n            @saveConfig=\"this.saveConfigToCookie\"\r\n            @startSketch=\"this.startSketchMode\"\r\n            @closeDrawer=\"this.drawerDeactivate\"\r\n            @setT=\"this.OnSetTemplate\"\r\n            :nowTemplate=\"this.nowTemplate\"\r\n        >\r\n            <span>{{ $t(\"setBackColor\") }}</span>\r\n            <n-color-picker v-model:value=\"model.color\" :modes=\"['rgb']\" :show-alpha=\"false\" />\r\n\r\n            <!-- 分割线 -->\r\n            <n-divider />\r\n        </Drawer>\r\n\r\n        <n-back-top :show=\"showBackTopFlag\" type=\"info\" color=\"#8a2be2\" :right=\"20\" :bottom=\"20\" />\r\n        <n-button @click=\"scrollToTop(90);\" size=\"large\" secondary strong>Back To Top</n-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 直接导入组件并使用它。这种情况下，只有导入的组件才会被打包。\r\nimport { NButton, NBackTop, NIcon, NDivider, NColorPicker, } from 'naive-ui'\r\nimport Header from \"@/components/Header.vue\";\r\nimport Drawer from \"@/components/Drawer.vue\";\r\nimport { defineComponent, reactive } from 'vue'\r\nimport { useCookies } from \"vue3-cookies\";// https://github.com/KanHarI/vue3-cookies\r\nimport { SettingsOutline } from '@vicons/ionicons5'\r\n\r\nexport default defineComponent({\r\n    name: \"BookShelf\",\r\n    props: ['book', 'nowTemplate'],\r\n    emits: [\"setTemplate\"],\r\n    components: {\r\n        Header,//自定义页头，有点丑\r\n        Drawer,//自定义抽屉，还行\r\n        NButton,//按钮，来自:https://www.naiveui.com/zh-CN/os-theme/components/button\r\n        NBackTop,//回到顶部按钮，来自:https://www.naiveui.com/zh-CN/os-theme/components/back-top\r\n        // NDrawer,//抽屉，可以从上下左右4个方向冒出. https://www.naiveui.com/zh-CN/os-theme/components/drawer\r\n        // NDrawerContent,//抽屉内容\r\n        // NSpace,//间距 https://www.naiveui.com/zh-CN/os-theme/components/space\r\n        // NSlider,//滑动选择  Slider https://www.naiveui.com/zh-CN/os-theme/components/slider\r\n        // NSwitch,//开关   https://www.naiveui.com/zh-CN/os-theme/components/switch\r\n        // NRadio,//单选  https://www.naiveui.com/zh-CN/os-theme/components/radio\r\n        // NRadioButton,//单选  用按钮显得更优雅一点\r\n        // NInputNumber,//数字输入 https://www.naiveui.com/zh-CN/os-theme/components/input-number\r\n        // NRadioGroup,\r\n        // NLayout,//布局 https://www.naiveui.com/zh-CN/os-theme/components/layout\r\n        // NLayoutSider,\r\n        // NLayoutContent,\r\n        NIcon,//图标  https://www.naiveui.com/zh-CN/os-theme/components/icon\r\n        // NPageHeader,//页头 https://www.naiveui.com/zh-CN/os-theme/components/page-header\r\n        // NAvatar, //头像 https://www.naiveui.com/zh-CN/os-theme/components/avatar\r\n\r\n        SettingsOutline,//图标,来自 https://www.xicons.org/#/   需要安装（npm i -D @vicons/ionicons5）\r\n        NDivider,//分割线  https://www.naiveui.com/zh-CN/os-theme/components/divider\r\n        NColorPicker,\r\n    },\r\n    setup() {\r\n        //此处不能使用this\r\n        const { cookies } = useCookies();\r\n        //背景颜色，颜色选择器用\r\n        const model = reactive({\r\n            color: \"#E0D9CD\",\r\n        });\r\n\r\n        //单选按钮绑定的数值\r\n        // const checkedValueRef = ref(null)\r\n        return {\r\n            cookies,\r\n            //背景色\r\n            model,\r\n            //开关的颜色\r\n            railStyle: ({ focused, checked }) => {\r\n                const style = {}\r\n                if (checked) {\r\n                    style.background = '#d03050'\r\n                    if (focused) {\r\n                        style.boxShadow = '0 0 0 2px #d0305040'\r\n                    }\r\n                } else {\r\n                    style.background = '#2080f0'\r\n                    if (focused) {\r\n                        style.boxShadow = '0 0 0 2px #2080f040'\r\n                    }\r\n                }\r\n                return style\r\n            },\r\n            //滑动选择用建议值\r\n            marks: {\r\n                30: '25%',\r\n                50: '50%',\r\n                75: '75%',\r\n                95: '95%',\r\n            },\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            drawerActive: false,\r\n            drawerPlacement: 'right',\r\n            //开发模式 还没有做的功能与设置，设置Debug以后才能见到\r\n            debugModeFlag: true,\r\n            //书籍数据，需要从远程拉取\r\n            //是否显示顶部页头\r\n            showHeaderFlag: true,\r\n            //是否显示页数\r\n            showPageNumFlag_BookShelf: false,\r\n            //是否显示回到顶部按钮\r\n            showBackTopFlag: false,\r\n            //是否正在向下滚动\r\n            scrollDownFlag: false,\r\n            //存储现在滚动的位置\r\n            scrollTopSave: 0,\r\n            //同步滚动，目前还没做\r\n            syncScrollFlag: false,\r\n            //鼠标点击或触摸的位置\r\n            clickX: 0,\r\n            clickY: 0,\r\n            //可见范围是否是横向\r\n            isLandscapeMode: true,\r\n            isPortraitMode: false,\r\n            imageMaxWidth: 10,\r\n            //屏幕宽横比，inLandscapeMode的判断依据\r\n            aspectRatio: 1.2,\r\n\r\n            //状态驱动的动态 CSS!!!!!\r\n            // https://v3.cn.vuejs.org/api/sfc-style.html#%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-css\r\n            //图片宽度的单位，是否使用百分比\r\n            imageWidth_usePercentFlag: false,\r\n\r\n            //横屏(Landscape)状态的漫画页宽度，百分比\r\n            singlePageWidth_Percent: 50,\r\n            doublePageWidth_Percent: 95,\r\n\r\n            //横屏(Landscape)状态的漫画页宽度，PX\r\n            singlePageWidth_PX: 720,\r\n            doublePageWidth_PX: 1080,\r\n\r\n            //可见范围宽高的具体值\r\n            clientWidth: 0,\r\n            clientHeight: 0,\r\n        };\r\n    },\r\n    //Vue3生命周期:  https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#beforecreate\r\n    // created : 在绑定元素的属性或事件监听器被应用之前调用。\r\n    // beforeMount : 指令第一次绑定到元素并且在挂载父组件之前调用。\r\n    // mounted : 在绑定元素的父组件被挂载后调用。\r\n    // beforeUpdate: 在更新包含组件的 VNode 之前调用。。\r\n    // updated: 在包含组件的 VNode 及其子组件的 VNode 更新后调用。\r\n    // beforeUnmount: 当指令与在绑定元素父组件卸载之前时，只调用一次。\r\n    // unmounted: 当指令与元素解除绑定且父组件已卸载时，只调用一次。\r\n\r\n    created() {\r\n        window.addEventListener(\"scroll\", this.onScroll);\r\n        //文档视图调整大小时会触发 resize 事件。 https://developer.mozilla.org/zh-CN/docs/Web/API/Window/resize_event\r\n        window.addEventListener(\"resize\", this.onResize);\r\n        this.imageMaxWidth = window.innerWidth;\r\n        //根据cookie初始化默认值,或初始化cookie值,cookie读取出来的都是字符串，不要直接用\r\n        //是否显示顶部页头\r\n        if (localStorage.getItem(\"showHeaderFlag\") === \"true\") {\r\n            this.showHeaderFlag = true;\r\n        } else if (localStorage.getItem(\"showHeaderFlag\") === \"false\") {\r\n            this.showHeaderFlag = false;\r\n        }\r\n        //console.log(\"读取cookie并初始化: showHeaderFlag=\" + this.showHeaderFlag);\r\n\r\n        //是否显示页数\r\n        if (localStorage.getItem(\"showPageNumFlag_BookShelf\") === \"true\") {\r\n            this.showPageNumFlag_BookShelf = true;\r\n        } else if (localStorage.getItem(\"showPageNumFlag_BookShelf\") === \"false\") {\r\n            this.showPageNumFlag_BookShelf = false;\r\n        }\r\n        //console.log(\"读取cookie并初始化: showPageNumFlag_BookShelf=\" + this.showPageNumFlag_BookShelf);\r\n\r\n        //宽度是否使用百分比\r\n        if (localStorage.getItem(\"imageWidth_usePercentFlag\") === \"true\") {\r\n            this.imageWidth_usePercentFlag = true;\r\n        } else if (localStorage.getItem(\"imageWidth_usePercentFlag\") === \"false\") {\r\n            this.imageWidth_usePercentFlag = false;\r\n        }\r\n\r\n        //javascript 数字类型转换：https://www.runoob.com/js/js-type-conversion.html\r\n        // NaN不能通过相等操作符（== 和 ===）来判断\r\n\r\n        //漫画页宽度，Percent\r\n        if (localStorage.getItem(\"singlePageWidth_Percent\") != null) {\r\n            let saveNum = Number(localStorage.getItem(\"singlePageWidth_Percent\"));\r\n            if (!isNaN(saveNum)) {\r\n                this.singlePageWidth_Percent = saveNum;\r\n            }\r\n        }\r\n\r\n        if (localStorage.getItem(\"doublePageWidth_Percent\") != null) {\r\n            let saveNum = Number(localStorage.getItem(\"doublePageWidth_Percent\"));\r\n            if (!isNaN(saveNum)) {\r\n                this.doublePageWidth_Percent = saveNum;\r\n            }\r\n        }\r\n\r\n        //漫画页宽度，PX\r\n        if (localStorage.getItem(\"singlePageWidth_PX\") != null) {\r\n            let saveNum = Number(localStorage.getItem(\"singlePageWidth_PX\"));\r\n            if (!isNaN(saveNum)) {\r\n                this.singlePageWidth_PX = saveNum;\r\n            }\r\n        }\r\n        if (localStorage.getItem(\"doublePageWidth_PX\") != null) {\r\n            let saveNum = Number(localStorage.getItem(\"doublePageWidth_PX\"));\r\n            if (!isNaN(saveNum)) {\r\n                this.doublePageWidth_PX = saveNum;\r\n            }\r\n        }\r\n\r\n        //当前颜色\r\n        if (localStorage.getItem(\"BookShelfDefaultColor\") != null) {\r\n            this.model.color = localStorage.getItem(\"BookShelfDefaultColor\");\r\n        }\r\n\r\n    },\r\n\r\n    // //挂载前\r\n    beforeMount() {\r\n\r\n    },\r\n    onMounted() {\r\n        //console.log('mounted in the composition api!')\r\n        this.isLandscapeMode = this.inLandscapeModeCheck();\r\n        this.isPortraitMode = !this.inLandscapeModeCheck();\r\n        // https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#beforemount\r\n        this.$nextTick(function () {\r\n            //视图渲染之后运行的代码\r\n        })\r\n    },\r\n    //卸载前\r\n    beforeUnmount() {\r\n        //组件销毁前，销毁监听事件\r\n        window.removeEventListener(\"scroll\", this.onScroll);\r\n        window.removeEventListener('resize', this.onResize)\r\n    },\r\n    methods: {\r\n        //打开抽屉\r\n        drawerActivate(place) {\r\n            this.drawerActive = true\r\n            this.drawerPlacement = place\r\n        },\r\n        //关闭抽屉\r\n        drawerDeactivate() {\r\n            this.drawerActive = false\r\n        },\r\n        //开始素描模式\r\n        startSketchMode() {\r\n            this.$emit(\"setTemplate\", \"sketch\");\r\n        },\r\n        //接收Draw的参数，继续往父组件传\r\n        OnSetTemplate(value) {\r\n            this.$emit(\"setTemplate\", value);\r\n        },\r\n        //如果在一个组件上使用了 v-model:xxx，应该使用 @update:xxx  https://www.naiveui.com/zh-CN/os-theme/docs/common-issues\r\n        saveConfigToCookie() {\r\n            // 储存cookie\r\n            localStorage.setItem(\"showHeaderFlag\", this.showHeaderFlag);\r\n            localStorage.setItem(\"showPageNumFlag_BookShelf\", this.showPageNumFlag_BookShelf);\r\n            localStorage.setItem(\"imageWidth_usePercentFlag\", this.imageWidth_usePercentFlag);\r\n            localStorage.setItem(\"singlePageWidth_Percent\", this.singlePageWidth_Percent);\r\n            localStorage.setItem(\"doublePageWidth_Percent\", this.doublePageWidth_Percent);\r\n            localStorage.setItem(\"singlePageWidth_PX\", this.singlePageWidth_PX);\r\n            localStorage.setItem(\"doublePageWidth_PX\", this.doublePageWidth_PX);\r\n            localStorage.setItem(\"BookShelfDefaultColor\", this.model.color);\r\n        },\r\n        setShowHeaderChange(value) {\r\n            console.log(\"value:\" + value);\r\n            this.showHeaderFlag = value;\r\n            localStorage.setItem(\"showHeaderFlag\", value);\r\n            console.log(\"cookie设置完毕: showHeaderFlag=\" + localStorage.getItem(\"showHeaderFlag\"));\r\n        },\r\n        setShowPageNumChange(value) {\r\n            console.log(\"value:\" + value);\r\n            this.showPageNumFlag_BookShelf = value;\r\n            localStorage.setItem(\"showPageNumFlag_BookShelf\", value);\r\n            console.log(\"cookie设置完毕: showPageNumFlag_BookShelf=\" + localStorage.getItem(\"showPageNumFlag_BookShelf\"));\r\n        },\r\n\r\n        setImageWidthUsePercentFlag(value) {\r\n            console.log(\"value:\" + value);\r\n            this.imageWidth_usePercentFlag = value;\r\n            localStorage.setItem(\"imageWidth_usePercentFlag\", value);\r\n            console.log(\"cookie设置完毕: imageWidth_usePercentFlag=\" + this.imageWidth_usePercentFlag);\r\n        },\r\n\r\n        //可见区域变化的时候改变页面状态\r\n        onResize() {\r\n            this.imageMaxWidth = window.innerWidth\r\n            // document.querySelectorAll(\".name\");\r\n            this.clientWidth = document.documentElement.clientWidth\r\n            this.clientHeight = document.documentElement.clientHeight\r\n            // var aspectRatio = window.innerWidth / window.innerHeight\r\n            this.aspectRatio = this.clientWidth / this.clientHeight\r\n            //console.log(\"OnReSize,aspectRatio=\" + this.aspectRatio);\r\n            // 为了调试的时候方便，阈值是正方形\r\n            if (this.aspectRatio > (19 / 19)) {\r\n                this.isLandscapeMode = true\r\n                this.isPortraitMode = false\r\n            } else {\r\n                this.isLandscapeMode = false\r\n                this.isPortraitMode = true\r\n            }\r\n        },\r\n        //页面滚动的时候改变各种值\r\n        onScroll() {\r\n            let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n            this.scrollDownFlag = scrollTop > this.scrollTopSave;\r\n            //防手抖，小于一定数值状态就不变\r\n            let step = Math.abs(this.scrollTopSave - scrollTop);\r\n            // console.log(\"step:\", step);\r\n            this.scrollTopSave = scrollTop\r\n            if (step > 5) {\r\n                this.showBackTopFlag = scrollTop > 400 && !this.scrollDownFlag;\r\n            }\r\n        },\r\n        //获取鼠标位置，决定是否打开设置面板\r\n        onMouseClick(e) {\r\n            this.clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n            this.clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n            //浏览器的视口，不包括工具栏和滚动条:\r\n            let innerWidth = window.innerWidth\r\n            let innerHeight = window.innerHeight\r\n            let MinX = innerWidth * 0.4\r\n            let MaxX = innerWidth * 0.6\r\n            let MinY = innerHeight * 0.4\r\n            let MaxY = innerHeight * 0.6\r\n            if ((this.clickX > MinX && this.clickX < MaxX) && (this.clickY > MinY && this.clickY < MaxY)) {\r\n                //alert(\"点中了设置区域！\")\r\n                //console.log(\"点中了设置区域！\");\r\n                this.drawerActivate('right')\r\n            }\r\n        },\r\n\r\n        onMouseMove(e) {\r\n            this.clickX = e.x //获取鼠标的X坐标（鼠标与屏幕左侧的距离，单位为px）\r\n            this.clickY = e.y //获取鼠标的Y坐标（鼠标与屏幕顶部的距离，单位为px）\r\n            //浏览器的视口，不包括工具栏和滚动条:\r\n            let innerWidth = window.innerWidth\r\n            let innerHeight = window.innerHeight\r\n            let MinX = innerWidth * 0.4\r\n            let MaxX = innerWidth * 0.6\r\n            let MinY = innerHeight * 0.4\r\n            let MaxY = innerHeight * 0.6\r\n            if ((this.clickX > MinX && this.clickX < MaxX) && (this.clickY > MinY && this.clickY < MaxY)) {\r\n                //console.log(\"在设置区域！\");\r\n                e.currentTarget.style.cursor = 'url(/images/SettingsOutline.png), pointer';\r\n            } else {\r\n                e.currentTarget.style.cursor = '';\r\n            }\r\n        },\r\n        onMouseLeave(e) {\r\n            //离开区域的时候，清空鼠标样式\r\n            e.currentTarget.style.cursor = '';\r\n        },\r\n\r\n        scrollToTop(scrollDuration) {\r\n            let scrollStep = -window.scrollY / (scrollDuration / 15),\r\n                scrollInterval = setInterval(function () {\r\n                    if (window.scrollY !== 0) {\r\n                        window.scrollBy(0, scrollStep);\r\n                    }\r\n                    else clearInterval(scrollInterval);\r\n                }, 15);\r\n        },\r\n        //根据可视区域(viewport)长宽比，确认是横屏还是竖屏\r\n        // aspect-ratio https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/aspect-ratio\r\n        // window.innerWidth  不是响应式依赖，所以不能用计算属性\r\n        inLandscapeModeCheck() {\r\n            this.aspectRatio = window.innerWidth / window.innerHeight\r\n            // 为了测试方便，阈值是正方形\r\n            return this.aspectRatio > (19 / 19);\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        sPWL() {\r\n            if (this.imageWidth_usePercentFlag) {\r\n                return this.singlePageWidth_Percent + '%';\r\n            } else {\r\n                return this.singlePageWidth_PX + 'px';\r\n            }\r\n        },\r\n        dPWL() {\r\n            if (this.imageWidth_usePercentFlag) {\r\n                return this.doublePageWidth_Percent + '%';\r\n            } else {\r\n                return this.doublePageWidth_PX + 'px';\r\n            }\r\n        },\r\n        sPWP() {\r\n            if (this.imageWidth_usePercentFlag) {\r\n                return this.singlePageWidth_Percent + '%';\r\n            } else {\r\n                return this.singlePageWidth_PX + 'px';\r\n            }\r\n        },\r\n        dPWP() {\r\n            if (this.imageWidth_usePercentFlag) {\r\n                return this.doublePageWidth_Percent + '%';\r\n            } else {\r\n                return this.doublePageWidth_PX + 'px';\r\n            }\r\n        },\r\n    }\r\n});\r\n</script>\r\n\r\n<style></style>\r\n\r\n<style scoped>\r\n.manga {\r\n    max-width: 100%;\r\n    background: v-bind(\"model.color\");\r\n}\r\n\r\n.header {\r\n    padding: 0px;\r\n    width: 100%;\r\n    height: 7vh;\r\n}\r\n\r\n/* https://developer.mozilla.org/zh-CN/docs/Web/CSS/object-fit */\r\n.manga img {\r\n    margin: auto;\r\n    /* object-fit: scale-down; */\r\n    padding: 3px 0px;\r\n    border-radius: 7px;\r\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.page_hint {\r\n    /* 文字颜色 */\r\n    color: #7e6e6e;\r\n    /* 文字阴影：https://www.w3school.com.cn/css/css3_shadows.asp*/\r\n    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\r\n}\r\n\r\n.LoadingImage {\r\n    width: 90vw;\r\n    max-width: 90vw;\r\n}\r\n.ErrorImage {\r\n    width: 90vw;\r\n    max-width: 90vw;\r\n}\r\n\r\n/* 横屏（显示区域）时的CSS样式，IE无效 */\r\n@media screen and (min-aspect-ratio: 19/19) {\r\n    .SinglePageImage {\r\n        width: v-bind(sPWL);\r\n        max-width: 100%;\r\n    }\r\n    .DoublePageImage {\r\n        width: v-bind(dPWL);\r\n        max-width: 100%;\r\n    }\r\n}\r\n\r\n/* 竖屏(显示区域)CSS样式，IE无效 */\r\n@media screen and (max-aspect-ratio: 19/19) {\r\n    .SinglePageImage {\r\n        /* width: 100%; */\r\n        width: v-bind(sPWP);\r\n        max-width: 100%;\r\n    }\r\n    .DoublePageImage {\r\n        /* width: 100%; */\r\n        width: v-bind(dPWP);\r\n        max-width: 100%;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./BookShelf.vue?vue&type=template&id=21fde148&scoped=true\"\nimport script from \"./BookShelf.vue?vue&type=script&lang=js\"\nexport * from \"./BookShelf.vue?vue&type=script&lang=js\"\n\nimport \"./BookShelf.vue?vue&type=style&index=0&id=21fde148&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-21fde148\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=31a4c7b2\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=31a4c7b2&lang=css\"\n\nimport exportComponent from \"D:\\\\cvgo\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\r\n\r\n// 1. 定义路由组件.\r\n// 也可以从其他文件导入\r\n// import Home from '../views/Home.vue'\r\n\r\nimport FlipMode from '@/views/FlipMode.vue'\r\n\r\nimport ScrollMode from '@/views/ScrollMode.vue'\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'FlipMode',\r\n    component: FlipMode\r\n  },\r\n  {\r\n    path: '/scroll',\r\n    name: 'ScrollMode',\r\n    component: ScrollMode\r\n  },\r\n  {\r\n    path: '/flip',\r\n    name: 'About',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import('@/components/About.vue')\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  // history: createWebHistory(process.env.BASE_URL),\r\n    // 4. 内部提供了 history 模式的实现。为了简单起见，我们在这里使用 hash 模式。\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createStore } from 'vuex'\r\nimport axios from 'axios'\r\n\r\nconst store = createStore({\r\n  //开启严格模式，避免直接的修改\r\n  // strict :true,\r\n  //state 存放所有组件的共用数据\r\n  state: {\r\n    count: 0,\r\n    todos: [\r\n      { id: 1, text: \"...\", done: true },\r\n      { id: 2, text: \"...\", done: false },\r\n    ],\r\n    now_page: 1,\r\n    book: {\r\n      name: \"loading\",\r\n      all_page_num: 1,\r\n      pages: [\r\n        {\r\n          height: 500,\r\n          width: 449,\r\n          url: \"/images/loading.jpg\",\r\n          class: \"Vertical\",\r\n        },\r\n      ],\r\n    },\r\n    bookshelf: {},\r\n    setting: {\r\n      template: \"scroll\",\r\n      sketch_count_seconds: 30,\r\n    },\r\n    message: {\r\n      user_uuid: \"\",\r\n      server_status: \"\",\r\n      now_book_uuid: \"\",\r\n      read_percent: 0.0,\r\n      msg: \"\",\r\n    },\r\n  },\r\n  //mutaitions改变 只能执行同步操作。不能直接调用。需要使用 store.commit('函数名') 方法\r\n  mutations: {\r\n    change_template_to_scroll(state) {\r\n      state.setting.template = \"scroll\";\r\n      console.log(\"change_template_to_scroll:\" + state.setting.template);\r\n    },\r\n    change_template_to_flip(state) {\r\n      state.setting.template = \"flip\";\r\n      console.log(\"change_template_to_flip:\" + state.setting.template);\r\n    },\r\n    change_template_to_sketch(state) {\r\n      state.setting.template = \"sketch\";\r\n      console.log(\"change_template_to_sketch:\" + state.setting.template);\r\n    },\r\n    increment(state) {\r\n      state.count++;\r\n    },\r\n    //使用mutation()函数（store.commit('')）的时候，还可以传入额外的参数，也就是载荷payload\r\n    syncSettingData(state, payload) {\r\n      state.setting = payload.message;\r\n    },\r\n    syncBookData(state, payload) {\r\n      state.book = payload.message;\r\n    },\r\n    syncBookShelfData(state, payload) {\r\n      state.bookshelf = payload.message;\r\n    },\r\n  },\r\n  //actions 可以包含任意异步操作，通过 store.dispatch 方法触发\r\n  //接收context，与store具有相同方法与属性，不是store本身，\r\n  //context可以访问state与getter，还可以用context.dispatch调用其他Action\r\n  actions: {\r\n    incrementAction(context) {\r\n      context.commit(\"increment\");\r\n    },\r\n    //拉取远程设定数据\r\n    async syncSettingDataAction(context) {\r\n      const msg = await axios.get(\"/setting.json\").then(\r\n        (res) => res.data,\r\n        () => \"\"\r\n      );\r\n      const payload = {\r\n        message: msg,\r\n      };\r\n      context.commit(\"syncSettingData\", payload);\r\n      console.log(\"syncSettingData!\");\r\n    },\r\n    //拉取当前阅读书籍数据\r\n    async syncBookDataAction(context) {\r\n      const msg = await axios.get(\"/book.json\").then(\r\n        (res) => res.data,\r\n        () => \"\"\r\n      );\r\n      const payload = {\r\n        message: msg,\r\n      };\r\n      context.commit(\"syncBookData\", payload);\r\n      console.log(\"syncBookData!\");\r\n    },\r\n    //拉取书架数据\r\n    async syncBookShelfDataAction(context) {\r\n      const msg = await axios.get(\"/bookshelf.json\").then(\r\n        (res) => res.data,\r\n        () => \"\"\r\n      );\r\n      const payload = {\r\n        message: msg,\r\n      };\r\n      context.commit(\"syncBookShelfData\", payload);\r\n      console.log(\"syncBookShelfData!\");\r\n    },\r\n  },\r\n  //相当于store的计算属性，会被缓存，变化的时候才重新计算\r\n  getters: {\r\n    doneTodos: (state) => {\r\n      return state.todos.filter((todo) => todo.done);\r\n    },\r\n    now_page: (state) => {\r\n      return state.now_page;\r\n    },\r\n    book: (state) => {\r\n      return state.book;\r\n    },\r\n    bookshelf: (state) => {\r\n      return state.bookshelf;\r\n    },\r\n    setting: (state) => {\r\n      return state.setting;\r\n    },\r\n    message: (state) => {\r\n      return state.message;\r\n    },\r\n  },\r\n  modules: {\r\n  }\r\n})\r\n\r\n\r\nexport default store","// 参考：https://www.i4k.xyz/article/weixin_42174938/119764352\r\nimport {createI18n} from 'vue-i18n'\r\nimport enLocale from './en.json'\r\nimport cnLocale from './zh_CN.json'\r\nimport jaLocale from './ja.json'\r\nconst messages = {\r\n  en: {\r\n    ...enLocale\r\n  },\r\n  zh: {\r\n    ...cnLocale\r\n  },\r\n  ja: {\r\n    ...jaLocale\r\n  },\r\n}\r\nconst i18n = new createI18n({\r\n  locale: localStorage.getItem('lang') || 'zh',\r\n  globalInjection: true,\r\n  messages\r\n})\r\nexport default i18n","import { createApp } from \"vue\";\r\nimport VueAxios from \"vue-axios\";\r\nimport axios from \"axios\";\r\nimport App from \"@/App.vue\";\r\nimport router from \"@/router\"; //vue-router\r\nimport store from \"@/store\"; //VueX\r\n// import VueCookies from \"vue3-cookies\";\r\nimport VueLazyLoad from \"vue3-lazyload\";\r\nimport i18n from '@/locales'\r\n// 后端改成 /api/book/:id的形式\r\naxios.defaults.baseURL = \"/api\"\r\n\r\n// createApp(App).use(store).use(router).use(VueAxios,axios).mount('#app')\r\nconst app = createApp(App);\r\napp.use(i18n)\r\napp.use(VueAxios, axios);\r\napp.use(store);\r\napp.use(router);\r\n\r\n// // 通用字体\r\n// import 'vfonts/Lato.css'\r\n// // 等宽字体\r\n// import 'vfonts/FiraCode.css'\r\n// vue3-lazyload\r\n// https://github.com/murongg/vue3-lazyload\r\napp.use(VueLazyLoad, {\r\n    //懒加载相关设置\r\n    //https://www.cnblogs.com/niuzijie/p/13703710.html\r\n    preLoad: 1.9,//预加载高度比例,默认1.3\r\n    loading: \"/images/loading.jpg\",\r\n    error: \"/images/error.jpg\",\r\n    attempt: 4,//尝试加载图片数量，默认3\r\n    observerOptions: { rootMargin: '200px', threshold: 0.1},\r\n    lifecycle: {\r\n        loading: (el) => {\r\n            el.setAttribute(\"class\", \"LoadingImage\");\r\n            // console.log(\"loading\", el);\r\n        },\r\n        error: (el) => {\r\n            el.setAttribute(\"class\", \"ErrorImage\");\r\n            // console.log(\"error\", el);\r\n        },\r\n        //可以在这里插入判断分辨率的函数\r\n        loaded: (el) => {\r\n            let image = new Image();\r\n            image.src = el.src;\r\n\t\t\t// 图片是否完全加载完成。\r\n\t\t\t//https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement/complete\r\n            if (image.complete) {\r\n                el.setAttribute(\"w\", image.width);\r\n                el.setAttribute(\"h\", image.height);\r\n                if (image.width < image.height) {\r\n                    el.setAttribute(\"class\", \"SinglePageImage\");\r\n                } else {\r\n                    el.setAttribute(\"class\", \"DoublePageImage\");\r\n                }\r\n            } else {\r\n                el.setAttribute(\"class\", \"SinglePageImage\");\r\n            }\r\n            // console.log(\"loaded\", el);\r\n        },\r\n    },\r\n});\r\n\r\napp.mount(\"#app\"); // look index.html:  <div id=\"app\"></div>","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ScrollMode.vue?vue&type=style&index=0&id=f2b889c0&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BookShelf.vue?vue&type=style&index=0&id=21fde148&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Header.vue?vue&type=style&index=0&id=bf37a460&scoped=true&lang=css\""],"sourceRoot":""}