import{d as e,N as t,a as o,u as a,b as s,l,r as i,o as r,c as n,w as g,e as d,f as h,g as c,B as u,R as m,h as p,i as _,t as w,j as k,k as P,m as S,n as F,p as f,q as b,s as v,v as M,x as I,y as N,z as C,A as y,C as D,S as T,D as x,E as $,F as W,G as H,H as L,I as B,J as z,K as A,L as R,M as U,O as X,P as O,Q as E,T as j,U as V,V as Y,W as G,X as K,Y as q,Z as J,_ as Q}from"./vendor.99d94e2e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Z=(e,t)=>{const o=e.__vccOpts||e;for(const[a,s]of t)o[a]=s;return o};const ee=e({name:"ComigoHome",components:{NMessageProvider:t,NConfigProvider:o},setup(){const{cookies:e}=a();return{cookies:e,darkTheme:s,lightTheme:l}},data:()=>({selectTemplate:"",isAuthenticated:!1}),created(){this.$store.dispatch("syncSeverStatusDataAction"),this.selectTemplate=this.getDefaultTemplate},beforeMount(){null!=this.$store.state.server_status.ServerName&&(document.title=this.$store.state.server_status.ServerName)},methods:{goToDashboard(){this.isAuthenticated?this.$router.push("/dashboard"):this.$router.push("/login")},OnSetTemplate(e){localStorage.setItem("nowTemplate",e),this.selectTemplate=e},getNumber:function(e){this.page=e,console.log(e)}},computed:{username(){return this.$route.params.username},book(){return this.$store.state.book},setting(){return this.$store.state.setting},getDefaultTemplate:function(){var e=localStorage.getItem("nowTemplate");return null!==e?e:"scroll"}}}),te={class:"app"};var oe=Z(ee,[["render",function(e,t,o,a,s,l){const c=i("router-view"),u=i("n-message-provider"),m=i("n-config-provider");return r(),n(m,{theme:e.lightTheme},{default:g((()=>[d("div",te,[h(u,null,{default:g((()=>[h(c)])),_:1})])])),_:1},8,["theme"])}]]);const ae={};const se=e({name:"ComigoHeader",props:["setDownLoadLink","headerTitle","showReturnIcon"],components:{NIcon:c,BookOutline:u,ReturnUpBack:m},setup(){const{cookies:e}=a();return{cookies:e}},data:()=>({someflag:""}),methods:{onClickReturnIcon(){this.$router.back()},onClickToTop(){this.$router.push("/")}}}),le={class:"header p-1 m-0 h-12 flex justify-between content-center"},ie={class:"p-0 m-0 py-2 content-center truncate"},re={key:0,class:"text-lg"},ne={class:"text-lg text-blue-700 hover:underline"},ge=["href"];var de=Z(se,[["render",function(e,t,o,a,s,l){const c=i("return-up-back"),u=i("n-icon"),m=i("book-outline");return r(),p("header",le,[e.showReturnIcon?(r(),n(u,{key:0,class:"p-0 m-0",size:"40",onClick:t[0]||(t[0]=t=>e.onClickReturnIcon())},{default:g((()=>[h(c)])),_:1})):_("",!0),e.showReturnIcon?_("",!0):(r(),n(u,{key:1,class:"p-0 m-0",onClick:t[1]||(t[1]=t=>e.onClickToTop()),size:"40"},{default:g((()=>[h(m)])),_:1})),d("div",ie,[e.setDownLoadLink?_("",!0):(r(),p("span",re,w(e.headerTitle),1)),d("span",ne,[this.setDownLoadLink?(r(),p("a",{key:0,href:"raw/"+e.headerTitle},w(e.headerTitle),9,ge)):_("",!0)])]),k(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-3ee469b6"]]);var he=Z(e({name:"SettingsDrawer",props:["book","initDrawerActive","initDrawerPlacement","readerMode","sketching"],emits:["setRM","saveConfig","startSketch","stopSketch","closeDrawer"],components:{NDrawer:P,NDrawerContent:S,NDivider:F,NButton:f,NSelect:b,NPopconfirm:v},setup(){const{cookies:e}=a();return{handlePositiveClick(){localStorage.clear(),location.reload()},handleNegativeClick(){},cookies:e,languageOptions:[{label:"English",value:"en"},{label:"日本語",value:"ja"},{label:"中文",value:"zh"}]}},data:()=>({someflag:"",readModeLocal:""}),beforeMount(){var e=this.cookies.get("userLanguageSetting");e&&(this.$i18n.locale=e),this.readModeLocal=this.readMode},computed:{drawerActive(){return this.initDrawerActive},drawerPlacement(){return this.initDrawerPlacement}},methods:{onChangeReaderMode(){},OnChangeLanguage(e){this.cookies.set("userLanguageSetting",e)},saveConfigToCookie(e){0==e&&(this.$emit("closeDrawer"),this.$emit("saveConfig"))},startSketchMode(){this.$emit("startSketch")},stopSketchMode(){this.$emit("stopSketch")},onChangeTemplate(){"scroll"===this.readModeLocal&&this.$emit("setRM","scroll"),"flip"===this.readModeLocal&&this.$emit("setRM","flip"),"sketch"===this.readModeLocal&&this.$emit("setRM","sketch")}}}),[["render",function(e,t,o,a,s,l){const c=i("n-divider"),u=i("n-button"),m=i("n-popconfirm"),p=i("n-select"),P=i("n-drawer-content"),S=i("n-drawer");return r(),n(S,{show:e.drawerActive,"onUpdate:show":e.saveConfigToCookie,height:275,width:251,placement:e.drawerPlacement},{default:g((()=>[h(P,{closable:""},{header:g((()=>[d("span",null,w(e.$t("ReaderSettings")),1)])),footer:g((()=>[h(p,{placeholder:"select language",value:this.$i18n.locale,"onUpdate:value":[t[0]||(t[0]=e=>this.$i18n.locale=e),e.OnChangeLanguage],options:this.languageOptions},null,8,["value","options","onUpdate:value"]),0==this.sketching?(r(),n(u,{key:0,onClick:e.startSketchMode},{default:g((()=>[M(w(e.$t("startSketchMode")),1)])),_:1},8,["onClick"])):_("",!0),1==this.sketching?(r(),n(u,{key:1,onClick:e.stopSketchMode},{default:g((()=>[M(w(e.$t("stopSketchMode")),1)])),_:1},8,["onClick"])):_("",!0)])),default:g((()=>[k(e.$slots,"default"),h(c),h(m,{onPositiveClick:e.handlePositiveClick,onNegativeClick:e.handleNegativeClick},{trigger:g((()=>[h(u,null,{default:g((()=>[M(w(e.$t("reset_all_settings")),1)])),_:1})])),default:g((()=>[M(" "+w(e.$t("do_you_reset_all_settings")),1)])),_:1},8,["onPositiveClick","onNegativeClick"])])),_:3})])),_:3},8,["show","onUpdate:show","placement"])}]]);const ce=e({name:"ComigoBottom",props:["softVersion"],components:{},setup(){},data:()=>({someflag:""}),methods:{onClick(){}}}),ue={class:"bottom text-gray-900 h-12 py-4 space-x-2 text-base content-center"},me=d("span",{class:"text-base"},"Power by",-1),pe={href:"https://github.com/yumenaka/comi/releases",class:"text-blue-700 hover:underline font-semibold"};var _e=Z(ce,[["render",function(e,t,o,a,s,l){return r(),p("div",ue,[me,d("a",pe,w(e.softVersion),1)])}]]);const we=e({name:"ScrollMode",props:["test_prop"],emits:["setTemplate"],components:{Header:de,Drawer:he,Bottom:_e,NBackTop:I,NSpace:N,NSlider:C,NSwitch:y,NIcon:c,NInputNumber:D,SettingsOutline:T,NDivider:F,NButton:f},setup(){const{cookies:e}=a(),t=x({backgroundColor:"#E0D9CD",interfaceColor:"#f5f5e4"}),o=x({resize_width:-1,resize_height:-1,do_auto_resize:!1,resize_max_width:800,resize_max_height:-1,do_auto_crop:!1,auto_crop:1,gray:!1});return{cookies:e,model:t,imageParameters:o,imageParametersString:e=>{if("api/getfile?"==e.substr(0,12)){var t=document.location.toString().split("/"),a=t[0]+"//"+t[2]+"/"+e,s=o.resize_width>0?"&resize_width="+o.resize_width:"",l=o.resize_height>0?"&resize_height="+o.resize_height:"",i=o.gray?"&gray=true":"";return a+s+l+(o.do_auto_resize?"&resize_max_width="+o.resize_max_width:"")+(o.resize_max_height>0?"&resize_max_height="+o.resize_max_height:"")+(o.do_auto_crop?"&auto_crop="+o.auto_crop:"")+i}return e},railStyle:({focused:e,checked:t})=>{const o={};return t?(o.background="#d03050",e&&(o.boxShadow="0 0 0 2px #d0305040")):(o.background="#2080f0",e&&(o.boxShadow="0 0 0 2px #2080f040")),o},marks:{30:"25%",50:"50%",75:"75%",95:"95%"}}},data:()=>({readerMode:"scroll",book:{name:"loading",all_page_num:2,book_type:"dir",pages:[{height:500,width:449,url:"/images/loading.jpg"},{height:500,width:449,url:"/images/loading.jpg"}]},drawerActive:!1,drawerPlacement:"right",debugModeFlag:!0,showHeaderFlag:!0,showPageNumFlag_ScrollMode:!1,showBackTopFlag:!1,scrollDownFlag:!1,scrollTopSave:0,syncScrollFlag:!1,clickX:0,clickY:0,isLandscapeMode:!0,isPortraitMode:!1,imageMaxWidth:10,aspectRatio:1.2,imageWidth_usePercentFlag:!1,singlePageWidth_Percent:50,doublePageWidth_Percent:95,singlePageWidth_PX:720,doublePageWidth_PX:1080,clientWidth:0,clientHeight:0}),created(){if($.get("/getbook?id="+this.$route.params.id).then((e=>this.book=e.data)).finally((()=>{document.title=this.book.name})),this.$watch((()=>this.$route.params.id),(e=>{e&&$.get("/getbook?id="+this.$route.params.id).then((e=>this.book=e.data)).finally(console.log("路由参数改变,书籍ID:"+e))})),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),this.imageMaxWidth=window.innerWidth,"true"===localStorage.getItem("showHeaderFlag")?this.showHeaderFlag=!0:"false"===localStorage.getItem("showHeaderFlag")&&(this.showHeaderFlag=!1),"true"===localStorage.getItem("showPageNumFlag_ScrollMode")?this.showPageNumFlag_ScrollMode=!0:"false"===localStorage.getItem("showPageNumFlag_ScrollMode")&&(this.showPageNumFlag_ScrollMode=!1),"true"===localStorage.getItem("ImageParameters_Gray")?this.imageParameters.gray=!0:"false"===localStorage.getItem("ImageParameters_Gray")&&(this.imageParameters.gray=!1),"true"===localStorage.getItem("ImageParameters_DoAutoResize")?this.imageParameters.do_auto_resize=!0:"false"===localStorage.getItem("ImageParameters_DoAutoResize")&&(this.imageParameters.do_auto_resize=!1),null!=localStorage.getItem("ImageParametersResizeMaxWidth")){let e=Number(localStorage.getItem("ImageParametersResizeMaxWidth"));isNaN(e)||(this.imageParameters.resize_max_width=e)}if("true"===localStorage.getItem("ImageParameters_DoAutoCrop")?this.imageParameters.do_auto_crop=!0:"false"===localStorage.getItem("ImageParameters_DoAutoCrop")&&(this.imageParameters.do_auto_crop=!1),null!=localStorage.getItem("ImageParameters_DoAutoCrop")){let e=Number(localStorage.getItem("ImageParameters_DoAutoCrop"));isNaN(e)||(this.imageParameters.auto_crop=e)}if("true"===localStorage.getItem("imageWidth_usePercentFlag")?this.imageWidth_usePercentFlag=!0:"false"===localStorage.getItem("imageWidth_usePercentFlag")&&(this.imageWidth_usePercentFlag=!1),null!=localStorage.getItem("singlePageWidth_Percent")){let e=Number(localStorage.getItem("singlePageWidth_Percent"));isNaN(e)||(this.singlePageWidth_Percent=e)}if(null!=localStorage.getItem("doublePageWidth_Percent")){let e=Number(localStorage.getItem("doublePageWidth_Percent"));isNaN(e)||(this.doublePageWidth_Percent=e)}if(null!=localStorage.getItem("singlePageWidth_PX")){let e=Number(localStorage.getItem("singlePageWidth_PX"));isNaN(e)||(this.singlePageWidth_PX=e)}if(null!=localStorage.getItem("doublePageWidth_PX")){let e=Number(localStorage.getItem("doublePageWidth_PX"));isNaN(e)||(this.doublePageWidth_PX=e)}null!=localStorage.getItem("BackgroundColor")&&(this.model.backgroundColor=localStorage.getItem("BackgroundColor")),null!=localStorage.getItem("InterfaceColor")&&(this.model.interfaceColor=localStorage.getItem("InterfaceColor"))},beforeMount(){},onMounted(){this.isLandscapeMode=this.inLandscapeModeCheck(),this.isPortraitMode=!this.inLandscapeModeCheck(),this.$nextTick((function(){}))},beforeUnmount(){window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)},methods:{changeReaderModeToFlipMode(){localStorage.setItem("ReaderMode","flip"),this.$router.push({name:"FlipMode",replace:!0,params:{id:this.$route.params.id}})},needDownloadLink(){return"dir"!=this.book.book_type},drawerActivate(e){this.drawerActive=!0,this.drawerPlacement=e},drawerDeactivate(){this.drawerActive=!1},startSketchMode(){this.$emit("setTemplate","sketch")},OnSetTemplate(e){this.$emit("setTemplate",e)},onBackgroundColorChange(e){this.model.backgroundColor=e,localStorage.setItem("BackgroundColor",e)},saveConfigToLocalStorage(){localStorage.setItem("showHeaderFlag",this.showHeaderFlag),localStorage.setItem("showPageNumFlag_ScrollMode",this.showPageNumFlag_ScrollMode),localStorage.setItem("imageWidth_usePercentFlag",this.imageWidth_usePercentFlag),localStorage.setItem("singlePageWidth_Percent",this.singlePageWidth_Percent),localStorage.setItem("doublePageWidth_Percent",this.doublePageWidth_Percent),localStorage.setItem("singlePageWidth_PX",this.singlePageWidth_PX),localStorage.setItem("doublePageWidth_PX",this.doublePageWidth_PX),localStorage.setItem("BackgroundColor",this.model.backgroundColor),localStorage.setItem("ImageParameters_DoAutoCrop",this.imageParameters.auto_crop),localStorage.setItem("ImageParametersResizeMaxWidth",this.imageParameters.resize_max_width)},setShowHeaderChange(e){this.showHeaderFlag=e,localStorage.setItem("showHeaderFlag",e)},setShowPageNumChange(e){this.showPageNumFlag_ScrollMode=e,localStorage.setItem("showPageNumFlag_ScrollMode",e)},setImageParameters_Gray(e){this.imageParameters.gray=e,localStorage.setItem("ImageParameters_Gray",e)},setImageParameters_DoAutoResize(e){this.imageParameters.do_auto_resize=e,localStorage.setItem("ImageParameters_DoAutoResize",e)},setImageParameters_DoAutoCrop(e){this.imageParameters.do_auto_crop=e,localStorage.setItem("ImageParameters_DoAutoCrop",this.imageParameters.do_auto_crop)},setImageWidthUsePercentFlag(e){console.log("value:"+e),this.imageWidth_usePercentFlag=e,localStorage.setItem("imageWidth_usePercentFlag",e)},onResize(){this.imageMaxWidth=window.innerWidth,this.clientWidth=document.documentElement.clientWidth,this.clientHeight=document.documentElement.clientHeight,this.aspectRatio=this.clientWidth/this.clientHeight,this.aspectRatio>1?(this.isLandscapeMode=!0,this.isPortraitMode=!1):(this.isLandscapeMode=!1,this.isPortraitMode=!0)},onScroll(){let e=document.documentElement.scrollTop||document.body.scrollTop;this.scrollDownFlag=e>this.scrollTopSave;let t=this.scrollTopSave-e;this.scrollTopSave=e,t<-5&&t>5&&(this.showBackTopFlag=e>400&&!this.scrollDownFlag)},onMouseClick(e){this.clickX=e.x,this.clickY=e.y;let t=window.innerWidth,o=window.innerHeight,a=.4*t,s=.6*t,l=.4*o,i=.6*o;this.clickX>a&&this.clickX<s&&this.clickY>l&&this.clickY<i&&this.drawerActivate("right")},onMouseMove(e){this.clickX=e.x,this.clickY=e.y;let t=window.innerWidth,o=window.innerHeight,a=.4*t,s=.6*t,l=.4*o,i=.6*o;this.clickX>a&&this.clickX<s&&this.clickY>l&&this.clickY<i?e.currentTarget.style.cursor="url(/images/SettingsOutline.png), pointer":e.currentTarget.style.cursor=""},onMouseLeave(e){e.currentTarget.style.cursor=""},scrollToTop(e){let t=-window.scrollY/(e/15),o=setInterval((function(){0!==window.scrollY?window.scrollBy(0,t):clearInterval(o)}),15)},inLandscapeModeCheck(){return this.aspectRatio=window.innerWidth/window.innerHeight,this.aspectRatio>1}},computed:{sPWL(){return this.imageWidth_usePercentFlag?this.singlePageWidth_Percent+"%":this.singlePageWidth_PX+"px"},dPWL(){return this.imageWidth_usePercentFlag?this.doublePageWidth_Percent+"%":this.doublePageWidth_PX+"px"},sPWP(){return this.imageWidth_usePercentFlag?this.singlePageWidth_Percent+"%":this.singlePageWidth_PX+"px"},dPWP(){return this.imageWidth_usePercentFlag?this.doublePageWidth_Percent+"%":this.doublePageWidth_PX+"px"}}}),ke=()=>{W((e=>({"7a2d396a":e.model.interfaceColor,"824939d6":e.model.backgroundColor,"28e95a2d":e.sPWL,"28e2889c":e.dPWL,"28e95a31":e.sPWP,"28e288a0":e.dPWP})))},Pe=we.setup;we.setup=Pe?(e,t)=>(ke(),Pe(e,t)):ke;const Se=we,Fe=e=>(z("data-v-d48f705c"),e=e(),A(),e),fe={id:"ScrollMode",class:"manga"},be=["alt"],ve={key:0,class:"page_hint"},Me=M("%"),Ie=M("%"),Ne=M("px"),Ce=M("px"),ye=Fe((()=>d("p",null,null,-1))),De=Fe((()=>d("p",null,null,-1))),Te=M("px");var xe=Z(Se,[["render",function(e,t,o,a,s,l){const c=i("settings-outline"),u=i("n-icon"),m=i("Header"),k=i("n-button"),P=i("n-space"),S=i("n-divider"),F=i("n-input-number"),f=i("n-slider"),b=i("n-switch"),v=i("Drawer"),I=i("n-back-top"),N=i("Bottom"),C=H("lazy");return r(),p("div",fe,[this.showHeaderFlag?(r(),n(m,{key:0,setDownLoadLink:this.needDownloadLink(),headerTitle:e.book.name,showReturnIcon:!0},{default:g((()=>[h(u,{class:"p-0 m-0",size:"40",onClick:t[0]||(t[0]=t=>e.drawerActivate("right"))},{default:g((()=>[h(c)])),_:1})])),_:1},8,["setDownLoadLink","headerTitle"])):_("",!0),e.book?(r(!0),p(L,{key:1},B(e.book.pages,((o,a)=>(r(),p("div",{class:"main_manga",key:o.url,onClick:t[1]||(t[1]=t=>e.onMouseClick(t)),onMousemove:t[2]||(t[2]=(...t)=>e.onMouseMove&&e.onMouseMove(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[R((r(),p("img",{alt:a+1,key:a},null,8,be)),[[C,this.imageParametersString(o.url)]]),e.showPageNumFlag_ScrollMode?(r(),p("div",ve,w(a+1)+"/"+w(e.book.all_page_num),1)):_("",!0)],32)))),128)):_("",!0),h(v,{initDrawerActive:this.drawerActive,initDrawerPlacement:this.drawerPlacement,onSaveConfig:this.saveConfigToLocalStorage,onStartSketch:this.startSketchMode,onCloseDrawer:this.drawerDeactivate,onSetT:this.OnSetTemplate,readerMode:this.readerMode},{default:g((()=>[h(P,null,{default:g((()=>[h(k,{onClick:e.changeReaderModeToFlipMode},{default:g((()=>[M(w(e.$t("switch_to_flip_mode")),1)])),_:1},8,["onClick"])])),_:1}),h(S),h(P,{vertical:""},{default:g((()=>[this.imageWidth_usePercentFlag?(r(),n(F,{key:0,size:"small","show-button":!1,value:this.singlePageWidth_Percent,"onUpdate:value":t[4]||(t[4]=e=>this.singlePageWidth_Percent=e),max:100,min:10,"update-value-on-input":!1},{prefix:g((()=>[M(w(e.$t("singlePageWidth")),1)])),suffix:g((()=>[Me])),_:1},8,["value"])):_("",!0),this.imageWidth_usePercentFlag?(r(),n(f,{key:1,value:this.singlePageWidth_Percent,"onUpdate:value":t[5]||(t[5]=e=>this.singlePageWidth_Percent=e),step:1,max:100,min:10,"format-tooltip":e=>`${e}%`},null,8,["value","format-tooltip"])):_("",!0),this.imageWidth_usePercentFlag?(r(),n(F,{key:2,size:"small","show-button":!1,value:this.doublePageWidth_Percent,"onUpdate:value":t[6]||(t[6]=e=>this.doublePageWidth_Percent=e),max:100,min:10,"update-value-on-input":!1},{prefix:g((()=>[M(w(e.$t("doublePageWidth")),1)])),suffix:g((()=>[Ie])),_:1},8,["value"])):_("",!0),this.imageWidth_usePercentFlag?(r(),n(f,{key:3,value:this.doublePageWidth_Percent,"onUpdate:value":t[7]||(t[7]=e=>this.doublePageWidth_Percent=e),step:1,max:100,min:10,"format-tooltip":e=>`${e}%`},null,8,["value","format-tooltip"])):_("",!0),this.imageWidth_usePercentFlag?_("",!0):(r(),n(F,{key:4,size:"small","show-button":!1,value:this.singlePageWidth_PX,"onUpdate:value":t[8]||(t[8]=e=>this.singlePageWidth_PX=e),min:50,"update-value-on-input":!1},{prefix:g((()=>[M(w(e.$t("singlePageWidth")),1)])),suffix:g((()=>[Ne])),_:1},8,["value"])),this.imageWidth_usePercentFlag?_("",!0):(r(),n(f,{key:5,value:this.singlePageWidth_PX,"onUpdate:value":t[9]||(t[9]=e=>this.singlePageWidth_PX=e),step:10,max:1600,min:50,"format-tooltip":e=>`${e}px`},null,8,["value","format-tooltip"])),this.imageWidth_usePercentFlag?_("",!0):(r(),n(F,{key:6,size:"small","show-button":!1,value:this.doublePageWidth_PX,"onUpdate:value":t[10]||(t[10]=e=>this.doublePageWidth_PX=e),min:50,"update-value-on-input":!1},{prefix:g((()=>[M(w(e.$t("doublePageWidth")),1)])),suffix:g((()=>[Ce])),_:1},8,["value"])),this.imageWidth_usePercentFlag?_("",!0):(r(),n(f,{key:7,value:this.doublePageWidth_PX,"onUpdate:value":t[11]||(t[11]=e=>this.doublePageWidth_PX=e),step:10,max:1600,min:50,"format-tooltip":e=>`${e}px`},null,8,["value","format-tooltip"]))])),_:1}),ye,h(P,null,{default:g((()=>[h(b,{size:"large",value:this.imageWidth_usePercentFlag,"onUpdate:value":[t[12]||(t[12]=e=>this.imageWidth_usePercentFlag=e),this.setImageWidthUsePercentFlag],"rail-style":e.railStyle},{checked:g((()=>[M(w(e.$t("width_usePercent")),1)])),unchecked:g((()=>[M(w(e.$t("width_useFixedValue")),1)])),_:1},8,["value","rail-style","onUpdate:value"])])),_:1}),h(S),h(P,null,{default:g((()=>[h(b,{size:"large",value:this.showHeaderFlag,"onUpdate:value":[t[13]||(t[13]=e=>this.showHeaderFlag=e),e.setShowHeaderChange]},{checked:g((()=>[M(w(e.$t("showHeader")),1)])),unchecked:g((()=>[M(w(e.$t("showHeader")),1)])),_:1},8,["value","onUpdate:value"]),De])),_:1}),h(P,null,{default:g((()=>[h(b,{size:"large",value:this.showPageNumFlag_ScrollMode,"onUpdate:value":[t[14]||(t[14]=e=>this.showPageNumFlag_ScrollMode=e),e.setShowPageNumChange]},{checked:g((()=>[M(w(e.$t("showPageNum")),1)])),unchecked:g((()=>[M(w(e.$t("showPageNum")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(P,null,{default:g((()=>[h(b,{size:"large",value:this.imageParameters.gray,"onUpdate:value":[t[15]||(t[15]=e=>this.imageParameters.gray=e),e.setImageParameters_Gray]},{checked:g((()=>[M(w(e.$t("gray_image")),1)])),unchecked:g((()=>[M(w(e.$t("gray_image")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(S),h(P,null,{default:g((()=>[h(b,{size:"large",value:this.imageParameters.do_auto_crop,"onUpdate:value":[t[16]||(t[16]=e=>this.imageParameters.do_auto_crop=e),e.setImageParameters_DoAutoCrop]},{checked:g((()=>[M(w(e.$t("auto_crop")),1)])),unchecked:g((()=>[M(w(e.$t("auto_crop")),1)])),_:1},8,["value","onUpdate:value"]),this.imageParameters.do_auto_crop?(r(),n(F,{key:0,"show-button":!1,value:this.imageParameters.auto_crop,"onUpdate:value":t[17]||(t[17]=e=>this.imageParameters.auto_crop=e),max:10,min:0},{prefix:g((()=>[M(w(e.$t("energy_threshold")),1)])),_:1},8,["value"])):_("",!0)])),_:1}),h(P,null,{default:g((()=>[h(b,{size:"large","rail-style":e.railStyle,value:this.imageParameters.do_auto_resize,"onUpdate:value":[t[18]||(t[18]=e=>this.imageParameters.do_auto_resize=e),e.setImageParameters_DoAutoResize]},{checked:g((()=>[M(w(e.$t("image_width_limit")),1)])),unchecked:g((()=>[M(w(e.$t("raw_resolution")),1)])),_:1},8,["rail-style","value","onUpdate:value"]),this.imageParameters.do_auto_resize?(r(),n(F,{key:0,size:"small","show-button":!1,value:this.imageParameters.resize_max_width,"onUpdate:value":t[19]||(t[19]=e=>this.imageParameters.resize_max_width=e),min:100},{prefix:g((()=>[M(w(e.$t("max_width")),1)])),suffix:g((()=>[Te])),_:1},8,["value"])):_("",!0)])),_:1})])),_:1},8,["initDrawerActive","initDrawerPlacement","onSaveConfig","onStartSketch","onCloseDrawer","onSetT","readerMode"]),h(I,{show:e.showBackTopFlag,type:"info",color:"#8a2be2",right:20,bottom:20},null,8,["show"]),d("button",{class:"w-24 h-12 m-2 bg-blue-300 text-gray-900 hover:bg-blue-500 rounded",onClick:t[20]||(t[20]=t=>{e.scrollToTop(90)}),size:"large"},w(e.$t("back-to-top")),1),h(N,{softVersion:this.$store.state.server_status.ServerName?this.$store.state.server_status.ServerName:"Comigo"},null,8,["softVersion"])])}],["__scopeId","data-v-d48f705c"]]);const $e=e({name:"FlipMode",props:[],emits:["childMark"],components:{Header:de,Drawer:he,NSpace:N,NSlider:C,NSwitch:y,NIcon:c,SettingsOutline:T,NDivider:F,NInputNumber:D,NButton:f},setup(){const{cookies:e}=a(),t=x({backgroundColor:"#E0D9CD",interfaceColor:"#f5f5e4"});return{message:U(),model:t,cookies:e,railStyle:({focused:e,checked:t})=>{const o={};return t?(o.background="#18a058",e&&(o.boxShadow="0 0 0 2px #d0305040")):(o.background="#2080f0",e&&(o.boxShadow="0 0 0 2px #2080f040")),o},marks:{30:"30",60:"60",90:"90",120:"120"}}},data:()=>({readerMode:"flip",book:{name:"loading",id:"abcde",all_page_num:2,book_type:"dir",pages:[{height:500,width:449,url:"/images/loading.jpg"},{height:500,width:449,url:"/images/loading.jpg"}]},drawerActive:!1,drawerPlacement:"right",debugModeFlag:!0,showHeaderFlag_FlipMode:!0,showFooterFlag_FlipMode:!0,rightToLeftFlag:!1,simpleDoublePageModeFlag:!1,autoDoublePageModeFlag:!1,saveNowPageNumFlag_FlipMode:!0,nowPageNum:1,sketchModeFlag:!1,showPageHintFlag_FlipMode:!1,sketchFlipSecond:30,sketchSecondCount:0,interval:null,nowPageIsDouble:!1,nextPageIsDouble:!1,nowAndNextPageIsSingleFlag:!0}),created(){if($.get("/getbook?id="+this.$route.params.id).then((e=>this.book=e.data)).finally((()=>{document.title=this.book.name,console.log("成功获取书籍数据,书籍ID:"+this.$route.params.id)})),this.$watch((()=>this.$route.params.id),(e=>{$.get("/getbook?id="+this.$route.params.id).then((e=>this.book=e.data)).finally(console.log("路由参数改变,书籍ID:"+e))})),"true"==localStorage.getItem("debugModeFlag")?this.debugModeFlag=!0:"false"==localStorage.getItem("debugModeFlag")&&(this.debugModeFlag=!1),"true"==localStorage.getItem("showHeaderFlag_FlipMode")?this.showHeaderFlag_FlipMode=!0:"false"==localStorage.getItem("showHeaderFlag_FlipMode")&&(this.showHeaderFlag_FlipMode=!1),"true"==localStorage.getItem("showFooterFlag_FlipMode_FlipMode")?this.showFooterFlag_FlipMode=!0:"false"==localStorage.getItem("showFooterFlag_FlipMode_FlipMode")&&(this.showFooterFlag_FlipMode=!1),"true"==localStorage.getItem("showPageHintFlag_FlipMode")?this.showPageHintFlag_FlipMode=!0:"false"==localStorage.getItem("showPageHintFlag_FlipMode")&&(this.showPageHintFlag_FlipMode=!1),"true"==localStorage.getItem("rightToLeftFlag")?this.rightToLeftFlag=!0:"false"==localStorage.getItem("rightToLeftFlag")&&(this.rightToLeftFlag=!1),"true"==localStorage.getItem("simpleDoublePageModeFlag")?this.simpleDoublePageModeFlag=!0:"false"==localStorage.getItem("simpleDoublePageModeFlag")&&(this.simpleDoublePageModeFlag=!1),"true"==localStorage.getItem("autoDoublePageModeFlag")?this.autoDoublePageModeFlag=!0:"false"==localStorage.getItem("autoDoublePageModeFlag")&&(this.autoDoublePageModeFlag=!1),"true"==localStorage.getItem("saveNowPageNumFlag_FlipMode")?this.saveNowPageNumFlag_FlipMode=!0:"false"==localStorage.getItem("saveNowPageNumFlag_FlipMode")&&(this.saveNowPageNumFlag_FlipMode=!1),null!=localStorage.getItem("BackgroundColor")&&(this.model.backgroundColor=localStorage.getItem("BackgroundColor")),null!=localStorage.getItem("InterfaceColor")&&(this.model.interfaceColor=localStorage.getItem("InterfaceColor")),null!=localStorage.getItem("sketchFlipSecond")){let e=Number(localStorage.getItem("sketchFlipSecond"));isNaN(e)||(this.sketchFlipSecond=e)}},beforeMount(){window.addEventListener("keyup",this.handleKeyup),"sketch"==this.readerMode&&this.startSketchMode()},beforeUnmount(){window.removeEventListener("keyup",this.handleKeyup)},mounted(){setTimeout(this.setNowPageNumByLocalStorage,500)},updated(){},methods:{changeReaderModeToScrollMode(){localStorage.setItem("ReaderMode","scroll"),this.$router.replace({name:"ScrollMode",replace:!0,params:{id:this.$route.params.id}})},needDownloadLink(){return"dir"!=this.book.book_type},onBackgroundColorChange(e){this.model.backgroundColor=e,localStorage.setItem("BackgroundColor",e)},nowAndNextPageIsSingle(){return this.nowPageIsDouble=this.checkImageIsDoublePage_byPageNum(this.nowPageNum),this.nextPageIsDouble=this.checkImageIsDoublePage_byPageNum(this.nowPageNum+1),this.nowPageIsDouble||this.nextPageIsDouble?(this.nowAndNextPageIsSingleFlag=!1,!1):(this.nowAndNextPageIsSingleFlag=!1,!0)},setNowPageNumByLocalStorage(){if(this.saveNowPageNumFlag_FlipMode){let e=localStorage.getItem("nowPageNum"+this.book.id);if(null!=e){let t=Number(e);isNaN(t)?console.log("读取页数失败,this.nowPageNum="+this.nowPageNum):(this.nowPageNum=t,console.log("成功读取页数"+t))}else console.log("本队存储里没找到:nowPageNum"+this.book.id)}},OnSetTemplate(e){"scroll"==e?console.log("跳转到卷轴阅读模式"):"scroll"==this.readerMode&&this.$router.push({name:"ScrollMode",params:{id:this.book.id}})},drawerActivate(e){this.drawerActive=!0,this.drawerPlacement=e},drawerDeactivate(){this.drawerActive=!1},startSketchMode(){this.message.success(this.$t("startSketchMessage")),this.drawerActive=!1,this.sketchModeFlag=!0,this.showPageHintFlag_FlipMode=!0,this.showHeaderFlag_FlipMode=!1,this.showFooterFlag_FlipMode=!1,this.interval=setInterval(this.sketchCount,1e3)},resetSketchSecondCount(){this.sketchSecondCount=0},stopSketchMode(){this.message.success(this.$t("goodjob_and_byebye")),this.sketchModeFlag=!1,this.showPageHintFlag_FlipMode=!1,this.sketchSecondCount=0,this.showHeaderFlag_FlipMode=!0,this.showFooterFlag_FlipMode=!0,clearInterval(this.interval)},sketchCount(){0!=this.sketchModeFlag&&"sketch"==this.readerMode||this.stopSketchMode(),this.sketchSecondCount=this.sketchSecondCount+1,0==this.sketchSecondCount%this.sketchFlipSecond&&(this.nowPageNum<this.book.all_page_num?this.flipPage(1):this.toPage(1))},saveConfigToCookie(){localStorage.setItem("debugModeFlag",this.debugModeFlag),localStorage.setItem("showHeaderFlag_FlipMode",this.showHeaderFlag_FlipMode),localStorage.setItem("showFooterFlag_FlipMode",this.showFooterFlag_FlipMode),localStorage.setItem("showPageHintFlag_FlipMode",this.showPageHintFlag_FlipMode),localStorage.setItem("rightToLeftFlag",this.rightToLeftFlag),localStorage.setItem("simpleDoublePageModeFlag",this.simpleDoublePageModeFlag),localStorage.setItem("autoDoublePageModeFlag",this.autoDoublePageModeFlag),localStorage.setItem("saveNowPageNumFlag_FlipMode",this.saveNowPageNumFlag_FlipMode),localStorage.setItem("nowPageNum"+this.book.id,this.nowPageNum),localStorage.setItem("BackgroundColor",this.model.backgroundColor),localStorage.setItem("sketchFlipSecond",this.sketchFlipSecond)},randomBackgroundColor(){let e="rgb("+(Math.ceil(155*Math.random())+100)+","+(Math.ceil(155*Math.random())+100)+","+(Math.ceil(100*Math.random())+100)+")";this.model.backgroundColor=e},onMouseOver(){},onMouseEnter(){},onMouseLeave(e){e.currentTarget.style.cursor=""},onMouseMove(e){let t=e.x,o=e.y,a=window.innerWidth,s=window.innerHeight;t>.4*a&&t<.6*a&&o>.4*s&&o<.6*s?e.currentTarget.style.cursor="url(/images/SettingsOutline.png), pointer":t<.5*a?this.rightToLeftFlag&&1==this.nowPageNum?e.currentTarget.style.cursor="url(/images/Prohibited28Filled.png), pointer":this.rightToLeftFlag||this.nowPageNum!=this.book.all_page_num?e.currentTarget.style.cursor="url(/images/ArrowLeft.png), pointer":e.currentTarget.style.cursor="url(/images/Prohibited28Filled.png), pointer":this.rightToLeftFlag&&this.nowPageNum==this.book.all_page_num?e.currentTarget.style.cursor="url(/images/Prohibited28Filled.png), pointer":this.rightToLeftFlag||1!=this.nowPageNum?e.currentTarget.style.cursor="url(/images/ArrowRight.png), pointer":e.currentTarget.style.cursor="url(/images/Prohibited28Filled.png), pointer"},onMouseClick(e){let t=e.x,o=e.y,a=window.innerHeight,s=window.innerWidth;t>.4*s&&t<.6*s&&o>.4*a&&o<.6*a?this.drawerActivate("right"):t<.5*s?1==this.rightToLeftFlag?this.toPerviousPage():this.toNextPage():1==this.rightToLeftFlag?this.toNextPage():this.toPerviousPage()},toNextPage(){if(this.simpleDoublePageModeFlag)return this.nowPageNum<this.book.all_page_num-1?void this.flipPage(2):void this.flipPage(1);this.autoDoublePageModeFlag&&this.checkMergedStatus_ByPageNum(this.nowPageNum)&&this.nowPageNum<this.book.all_page_num-1?this.flipPage(2):this.flipPage(1)},toPerviousPage(){if(this.nowPageNum<=1)return void console.log("Error toPerviousPage");if(this.simpleDoublePageModeFlag)return this.nowPageNum-2>0?void this.flipPage(-2):void this.flipPage(-1);if(2==this.nowPageNum||!this.autoDoublePageModeFlag)return void this.flipPage(-1);this.checkImageIsDoublePage_byPageNum(this.nowPageNum-1)||this.checkImageIsDoublePage_byPageNum(this.nowPageNum-2)?this.flipPage(-1):this.flipPage(-2)},checkMergedStatus_ByPageNum(e){if(!this.autoDoublePageModeFlag)return!1;if(e<=0||e>=this.book.all_page_num)return console.log("Error pageNum :"+e),!1;if(e==this.book.all_page_num)return!1;let t=this.checkImageIsDoublePage_byPageNum(e),o=this.checkImageIsDoublePage_byPageNum(e+1);return!(t||o)},checkImageIsDoublePage_byPageNum(e){if(e<=0||e>this.book.all_page_num)return void console.log("Error checkImageIsDoublePage_byPageNum:"+e);if("SinglePage"==this.book.pages[e-1].image_type)return!1;if("DoublePage"==this.book.pages[e-1].image_type)return!0;let t=new Image,o=!1;return t.src=this.book.pages[e-1].url,t.complete?t.width>=t.height:(t.onload=function(){t.width<t.height?(t.onload=null,o=!1):(t.onload=null,o=!0)},o)},flipPage:function(e){this.nowPageNum+e<=this.book.all_page_num&&this.nowPageNum+e>=1?this.nowPageNum=this.nowPageNum+e:e>0?this.message.info(this.$t("hintLastPage")):this.message.info(this.$t("hintFirstPage")),this.saveNowPageNumOnUpdate(this.nowPageNum)},saveNowPageNumOnUpdate(e){this.saveNowPageNumFlag_FlipMode&&localStorage.setItem("nowPageNum"+this.book.id,e)},toPage:function(e){e<=this.book.all_page_num&&e>=1&&(this.nowPageNum=e),this.saveNowPageNumFlag_FlipMode&&localStorage.setItem("nowPageNum"+this.book.id,this.nowPageNum)},handleKeyup(e){const t=e||window.event;if(t)switch(t.key){case"ArrowUp":case"PageUp":case"ArrowLeft":this.flipPage(-1);break;case"Space":case"ArrowDown":case"PageDown":case"ArrowRight":this.flipPage(1);break;case"Home":this.toPage(1);break;case"End":this.toPage(this.book.all_page_num)}},setShowHeaderChange(e){console.log("value:"+e),this.showHeaderFlag_FlipMode=e,localStorage.setItem("showHeaderFlag_FlipMode",e),console.log("cookie设置完毕: showHeaderFlag_FlipMode="+localStorage.getItem("showHeaderFlag_FlipMode"))},setShowFooterFlagChange(e){console.log("value:"+e),this.showFooterFlag_FlipMode=e,localStorage.setItem("showFooterFlag_FlipMode",e),console.log("cookie设置完毕: showFooterFlag_FlipMode="+localStorage.getItem("showFooterFlag_FlipMode"))},setShowPageNumChange(e){console.log("value:"+e),this.showPageHintFlag_FlipMode=e,localStorage.setItem("showPageHintFlag_FlipMode",e),console.log("cookie设置完毕: showPageHintFlag_FlipMode="+localStorage.getItem("showPageHintFlag_FlipMode"))},setFlipScreenFlag(e){console.log("value:"+e),this.rightToLeftFlag=e,localStorage.setItem("rightToLeftFlag",e),console.log("cookie设置完毕: rightToLeftFlag="+localStorage.getItem("rightToLeftFlag"))},setSavePageNumFlag(e){console.log("value:"+e),this.saveNowPageNumFlag_FlipMode=e,localStorage.setItem("saveNowPageNumFlag_FlipMode",e),console.log("cookie设置完毕: saveNowPageNumFlag_FlipMode="+localStorage.getItem("saveNowPageNumFlag_FlipMode"))},setDebugModeFlag(e){console.log("value:"+e),this.debugModeFlag=e,0==e&&(this.autoDoublePageModeFlag=!1),localStorage.setItem("debugModeFlag",e),console.log("cookie设置完毕: debugModeFlag="+localStorage.getItem("debugModeFlag"))},setAutoDoublePage_FlipMode(e){console.log("value:"+e),this.autoDoublePageModeFlag=e,1==e&&(this.simpleDoublePageModeFlag=!1),localStorage.setItem("autoDoublePageModeFlag",e),console.log("cookie设置完毕: autoDoublePageModeFlag="+localStorage.getItem("autoDoublePageModeFlag"))},setSimpleDoublePage_FlipMode(e){console.log("value:"+e),this.simpleDoublePageModeFlag=e,1==e&&(this.autoDoublePageModeFlag=!1),localStorage.setItem("simpleDoublePageModeFlag",e),console.log("cookie设置完毕: simpleDoublePageModeFlag="+localStorage.getItem("simpleDoublePageModeFlag"))}},computed:{pageNumOrSketchHint(){if(this.sketchModeFlag){let e=this.sketchSecondCount%this.sketchFlipSecond+1,t=parseInt(this.sketchSecondCount/this.sketchFlipSecond),o=parseInt((this.sketchSecondCount+1)/60),a="";a=0==parseInt(o/60)?o+this.$t("minute"):parseInt(o/60)+this.$t("hour")+o%60+this.$t("minute");let s=a+(this.sketchSecondCount+1)%60+this.$t("second");return this.$t("now_is")+e+this.$t("second")+"  "+this.$t("total_is")+t+this.$t("page")+"  "+this.$t("totalTime")+s+"  "+this.$t("interval")+this.sketchFlipSecond+this.$t("second")}return this.nowPageNum+"/"+this.book.all_page_num},mangaAreaHeight(){let e=95;return this.showFooterFlag_FlipMode&&this.showHeaderFlag_FlipMode&&(e=95),this.showFooterFlag_FlipMode&&!this.showHeaderFlag_FlipMode&&(e=95),!this.showFooterFlag_FlipMode&&this.showHeaderFlag_FlipMode&&(e=95),this.showFooterFlag_FlipMode||this.showHeaderFlag_FlipMode||(e=100),e+"vh"},mangaImageHeight(){let e=95;return this.showFooterFlag_FlipMode&&this.showHeaderFlag_FlipMode&&(e=95),this.showFooterFlag_FlipMode&&!this.showHeaderFlag_FlipMode&&(e=95),!this.showFooterFlag_FlipMode&&this.showHeaderFlag_FlipMode&&(e=95),this.showFooterFlag_FlipMode||this.showHeaderFlag_FlipMode||(e=100),this.showPageHintFlag_FlipMode&&("sketch"==this.readerMode?e-=6:e-=3),e+"vh"},sketchHintHeight(){return"sketch"==this.readerMode?"6vh":"3vh"},sketchHintFontSize(){return"sketch"==this.readerMode?"24px":"16px"},get_flex_direction(){return 1==this.rightToLeftFlag?"row":"row-reverse"}}}),We=()=>{W((e=>({"560725d3":e.model.interfaceColor,"5e3f03cc":e.model.backgroundColor,"236021a4":e.mangaAreaHeight,"8a4d8af4":e.get_flex_direction,"14f076d2":e.mangaImageHeight,"6809d01e":e.sketchHintHeight,"517003b2":e.sketchHintFontSize})))},He=$e.setup;$e.setup=He?(e,t)=>(We(),He(e,t)):We;const Le={class:"main"},Be={class:"manga_area_img_div"},ze=["src","alt"],Ae=["src","alt"],Re=["src","alt"],Ue={key:0,class:"sketch_hint"},Xe={key:0,class:"footer"},Oe={key:0},Ee={key:1};var je=Z($e,[["render",function(e,t,o,a,s,l){const c=i("settings-outline"),u=i("n-icon"),m=i("Header"),k=i("n-slider"),P=i("n-button"),S=i("n-space"),F=i("n-divider"),f=i("n-switch"),b=i("n-input-number"),v=i("Drawer");return r(),p(L,null,[this.showHeaderFlag_FlipMode?(r(),n(m,{key:0,class:"header",setDownLoadLink:this.needDownloadLink(),headerTitle:e.book.name,showReturnIcon:!0},{default:g((()=>[h(u,{size:"40",onClick:t[0]||(t[0]=t=>e.drawerActivate("right"))},{default:g((()=>[h(c)])),_:1})])),_:1},8,["setDownLoadLink","headerTitle"])):_("",!0),d("div",Le,[d("div",{class:"manga_area",id:"MangaMain",onClick:t[1]||(t[1]=X(((...t)=>e.onMouseClick&&e.onMouseClick(...t)),["stop"])),onMousemove:t[2]||(t[2]=X(((...t)=>e.onMouseMove&&e.onMouseMove(...t)),["stop"])),onMouseleave:t[3]||(t[3]=X(((...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),["stop"]))},[d("div",Be,[d("img",{src:this.book.pages[e.nowPageNum-1].url,alt:e.nowPageNum},null,8,ze),!this.autoDoublePageModeFlag&&this.simpleDoublePageModeFlag&&this.nowPageNum<this.book.all_page_num?(r(),p("img",{key:0,src:this.book.pages[e.nowPageNum].url,alt:e.nowPageNum+1},null,8,Ae)):_("",!0),this.autoDoublePageModeFlag&&this.nowPageNum<this.book.all_page_num&&this.nowAndNextPageIsSingle()?(r(),p("img",{key:1,src:this.book.pages[e.nowPageNum].url,alt:e.nowPageNum+1},null,8,Re)):_("",!0)]),this.showPageHintFlag_FlipMode?(r(),p("div",Ue,w(e.pageNumOrSketchHint),1)):_("",!0)],32),this.showFooterFlag_FlipMode?(r(),p("div",Xe,[this.rightToLeftFlag?(r(),p("div",Oe,[d("span",null,w(this.nowPageNum),1),h(k,{value:e.nowPageNum,"onUpdate:value":[t[4]||(t[4]=t=>e.nowPageNum=t),this.saveNowPageNumOnUpdate],max:this.book.all_page_num,min:1,step:1,"format-tooltip":e=>`${e}`},null,8,["value","max","format-tooltip","onUpdate:value"]),d("span",null,w(this.book.all_page_num),1)])):_("",!0),this.rightToLeftFlag?_("",!0):(r(),p("div",Ee,[d("span",null,w(this.book.all_page_num),1),h(k,{reverse:"",value:e.nowPageNum,"onUpdate:value":[t[5]||(t[5]=t=>e.nowPageNum=t),this.saveNowPageNumOnUpdate],max:this.book.all_page_num,min:1,step:1,"format-tooltip":e=>`${e}`},null,8,["value","max","format-tooltip","onUpdate:value"]),d("span",null,w(this.nowPageNum),1)]))])):_("",!0)]),h(v,{initDrawerActive:this.drawerActive,initDrawerPlacement:this.drawerPlacement,onSaveConfig:this.saveConfigToCookie,onStartSketch:this.startSketchMode,onStopSketch:this.stopSketchMode,onCloseDrawer:this.drawerDeactivate,readerMode:this.readerMode},{default:g((()=>[h(S,null,{default:g((()=>[h(P,{onClick:e.changeReaderModeToScrollMode},{default:g((()=>[M(w(e.$t("switch_to_scrolling_mode")),1)])),_:1},8,["onClick"])])),_:1}),h(F),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.showHeaderFlag_FlipMode,"onUpdate:value":[t[6]||(t[6]=e=>this.showHeaderFlag_FlipMode=e),e.setShowHeaderChange]},{checked:g((()=>[M(w(e.$t("showHeader")),1)])),unchecked:g((()=>[M(w(e.$t("showHeader")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.showFooterFlag_FlipMode,"onUpdate:value":[t[7]||(t[7]=e=>this.showFooterFlag_FlipMode=e),e.setShowFooterFlagChange]},{checked:g((()=>[M(w(e.$t("readingProgressBar")),1)])),unchecked:g((()=>[M(w(e.$t("readingProgressBar")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.showPageHintFlag_FlipMode,"onUpdate:value":[t[8]||(t[8]=e=>this.showPageHintFlag_FlipMode=e),e.setShowPageNumChange]},{checked:g((()=>[M(w(e.$t("showPageNum")),1)])),unchecked:g((()=>[M(w(e.$t("showPageNum")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(F),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.saveNowPageNumFlag_FlipMode,"onUpdate:value":[t[9]||(t[9]=e=>this.saveNowPageNumFlag_FlipMode=e),this.setSavePageNumFlag]},{checked:g((()=>[M(w(e.$t("savePageNum")),1)])),unchecked:g((()=>[M(w(e.$t("savePageNum")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.rightToLeftFlag,"onUpdate:value":[t[10]||(t[10]=e=>this.rightToLeftFlag=e),this.setFlipScreenFlag],"rail-style":e.railStyle},{unchecked:g((()=>[M(w(e.$t("rightScreenToNext")),1)])),checked:g((()=>[M(w(e.$t("leftScreenToNext")),1)])),_:1},8,["value","rail-style","onUpdate:value"])])),_:1}),h(S,null,{default:g((()=>[h(f,{size:"large",value:this.simpleDoublePageModeFlag,"onUpdate:value":[t[11]||(t[11]=e=>this.simpleDoublePageModeFlag=e),this.setSimpleDoublePage_FlipMode]},{checked:g((()=>[M(w(e.$t("simpleDoublePage")),1)])),unchecked:g((()=>[M(w(e.$t("simpleDoublePage")),1)])),_:1},8,["value","onUpdate:value"])])),_:1}),h(F),"sketch"==this.readerMode?(r(),n(F,{key:0})):_("",!0),"sketch"==this.readerMode?(r(),n(b,{key:1,size:"small","show-button":!1,value:this.sketchFlipSecond,"onUpdate:value":[t[12]||(t[12]=e=>this.sketchFlipSecond=e),this.resetSketchSecondCount],max:65535,min:1,"update-value-on-input":!1},{prefix:g((()=>[M(w(e.$t("pageTurningSeconds")),1)])),suffix:g((()=>[M(w(e.$t("second")),1)])),_:1},8,["value","onUpdate:value"])):_("",!0),"sketch"==this.readerMode?(r(),n(k,{key:2,value:this.sketchFlipSecond,"onUpdate:value":[t[13]||(t[13]=e=>this.sketchFlipSecond=e),this.resetSketchSecondCount],step:1,max:120,min:1,marks:e.marks,"format-tooltip":e=>`${e}s`},null,8,["value","marks","format-tooltip","onUpdate:value"])):_("",!0)])),_:1},8,["initDrawerActive","initDrawerPlacement","onSaveConfig","onStartSketch","onStopSketch","onCloseDrawer","readerMode"])],64)}],["__scopeId","data-v-97a551ee"]]);const Ve=e({name:"BookCover",props:["title","image_src","id","readerMode","showTitle","childBookNum"],components:{},setup(){const{cookies:e}=a();return{cookies:e}},computed:{shortTitle(){return this.title.length<=17?this.title:`${this.title.substr(0,17)}…`}},data:()=>({resize_str:"&resize_width=256&resize_height=360&resize_cut=true"}),methods:{onBackTop(){this.$router.push("/")},getBackgroundImageStyle(){return`background-image: url(${this.getThumbnailsImageUrl()});`},getThumbnailsImageUrl(){return"api"===this.image_src.split("/")[0]?`${this.image_src}&resize_width=256&resize_height=360&resize_cut=true`:this.image_src},getHref(){const e=document.location.toString().split("/");if("flip"===this.readerMode){const t=`${e[0]}//${e[2]}/#f/${this.id}`;return console.log(t),t}if("scroll"===this.readerMode){const t=`${e[0]}//${e[2]}/#s/${this.id}`;return console.log(t),t}}}}),Ye={key:0,class:"absolute inset-x-0 top-0 text-right"},Ge={class:"text-2xl text-yellow-500 font-extrabold text-shadow"},Ke={key:1,class:"absolute inset-x-0 bottom-0 h-1/4 bg-gray-200 bg-opacity-70 font-semibold border-blue-800 rounded-b"},qe={class:"absolute inset-x-0 bottom-0 align-middle"};const Je=e({name:"BookShelf",props:["testProp"],emits:["setTemplate"],components:{Header:de,Drawer:he,BookCard:Z(Ve,[["render",function(e,t,o,a,s,l){return r(),p("div",{class:"relative w-32 h-44 mx-3 my-4 text-gray-800 dark:text-gray-300 rounded shadow-xl hover:shadow-2xl ring-1 ring-gray-400 hover:ring hover:ring-blue-500 .bg-top bg-cover",style:O(e.getBackgroundImageStyle())},[""!=this.childBookNum?(r(),p("div",Ye,[d("span",Ge,w(this.childBookNum),1)])):_("",!0),this.showTitle?(r(),p("div",Ke,[d("span",qe,w(this.shortTitle),1)])):_("",!0)],4)}]]),Bottom:_e,NSpace:N,NSwitch:y,NIcon:c,SettingsOutline:T,NDivider:F,NColorPicker:E},setup(){const{cookies:e}=a();return{cookies:e,model:x({backgroundColor:"#E0D9CD",interfaceColor:"#f5f5e4"}),railStyle:({focused:e,checked:t})=>{const o={};return t?(o.background="#d03050",e&&(o.boxShadow="0 0 0 2px #d0305040")):(o.background="#2080f0",e&&(o.boxShadow="0 0 0 2px #2080f040")),o},marks:{30:"25%",50:"50%",75:"75%",95:"95%"}}},data:()=>({readerMode:"scroll",readerModeIsScroll:!0,bookShelfTitle:"loading",headerShowReturnIcon:!1,bookCardShowTitleFlag:!0,maxDepth:1,bookshelf:[{name:"loading",all_page_num:1,id:"12345",book_type:"dir",parent_folder:"",depth:1,pages:[{height:500,width:449,url:"/images/loading.jpg"}],cover:{filename:"loading.jpg",height:500,width:449,url:"/images/loading.jpg"}}],drawerActive:!1,drawerPlacement:"right",debugModeFlag:!0,showHeaderFlag:!0,syncScrollFlag:!1,clickX:0,clickY:0,isLandscapeMode:!0,isPortraitMode:!1,imageMaxWidth:10,aspectRatio:1.2,clientWidth:0,clientHeight:0}),created(){this.getBookShelfData(),this.refreshReadMode(),this.$watch((()=>this.$route.params),(()=>{this.refreshReadMode(),this.setBookShelfTitle(),this.getBookShelfData()})),"true"===localStorage.getItem("BookCardShowTitleFlag")?this.bookCardShowTitleFlag=!0:"false"===localStorage.getItem("BookCardShowTitleFlag")&&(this.bookCardShowTitleFlag=!1),"true"===localStorage.getItem("showHeaderFlag")?this.showHeaderFlag=!0:"false"===localStorage.getItem("showHeaderFlag")&&(this.showHeaderFlag=!1),null!=localStorage.getItem("BackgroundColor")&&(this.model.backgroundColor=localStorage.getItem("BackgroundColor")),null!=localStorage.getItem("InterfaceColor")&&(this.model.interfaceColor=localStorage.getItem("InterfaceColor"))},beforeMount(){},mounted(){this.isLandscapeMode=this.inLandscapeModeCheck(),this.isPortraitMode=!this.inLandscapeModeCheck(),this.$nextTick((function(){}))},beforeUnmount(){},methods:{onOpenBook(e,t){"book_group"!=t?("flip"!=this.readerMode&&"sketch"!=this.readerMode||this.$router.push({name:"FlipMode",params:{id:e}}),"scroll"==this.readerMode&&this.$router.push({name:"ScrollMode",params:{id:e}})):this.$router.push({name:"ChildBookShelf",params:{group_id:e}})},refreshReadMode(){"true"==localStorage.getItem("ReaderModeIsScroll")&&(this.readerModeIsScroll=!0,this.readerMode="scroll",localStorage.setItem("ReaderMode","scroll")),"false"==localStorage.getItem("ReaderModeIsScroll")&&(this.readerModeIsScroll=!1,this.readerMode="flip",localStorage.setItem("ReaderMode","flip"))},setReaderModeIsScroll(e){this.readerModeIsScroll=e,1==this.readerModeIsScroll?(this.readerMode="scroll",localStorage.setItem("ReaderMode","scroll")):(this.readerMode="flip",localStorage.setItem("ReaderMode","flip")),localStorage.setItem("ReaderModeIsScroll",e)},onBackgroundColorChange(e){this.model.backgroundColor=e,localStorage.setItem("BackgroundColor",e)},onInterfaceColorChange(e){this.model.interfaceColor=e,localStorage.setItem("InterfaceColor",e)},setBookCardShowTitleFlag(e){this.bookCardShowTitleFlag=e,localStorage.setItem("BookCardShowTitleFlag",e)},getBookShelfData(){this.$route.params.group_id?(this.getBooksGroupByBookID(this.$route.params.group_id),this.headerShowReturnIcon=!0):(this.initBookShelf(),this.headerShowReturnIcon=!1)},initBookShelf(){$.get("getlist?max_depth=1").then((e=>this.bookshelf=e.data)).finally((()=>{this.setBookShelfTitle()}))},getBooksGroupByBookID(e){$.get("getlist?book_group_book_id="+e).then((e=>{null!=e.data[0].name&&(this.bookshelf=e.data)})).finally((()=>{this.setBookShelfTitle()}))},setBookShelfTitle(){null==this.$route.params.id&&(null!=this.bookshelf[0].depth&&(this.max_depth=this.bookshelf[0].depth),null!=this.bookshelf[0].parent_folder&&""!=this.bookshelf[0].parent_folder&&(document.title=this.bookshelf[0].parent_folder,this.bookShelfTitle=this.bookshelf[0].parent_folder))},drawerActivate(e){this.drawerActive=!0,this.drawerPlacement=e},drawerDeactivate(){this.drawerActive=!1},startSketchMode(){},OnSetReaderMode(e){"scroll"!=e&&"scroll"!=e||(this.readerMode=e)},saveConfigToCookie(){localStorage.setItem("showHeaderFlag",this.showHeaderFlag),localStorage.setItem("BackgroundColor",this.model.backgroundColor)},setShowHeaderChange(e){console.log("value:"+e),this.showHeaderFlag=e,localStorage.setItem("showHeaderFlag",e),console.log("cookie设置完毕: showHeaderFlag="+localStorage.getItem("showHeaderFlag"))},inLandscapeModeCheck(){return this.aspectRatio=window.innerWidth/window.innerHeight,this.aspectRatio>1}},computed:{}}),Qe=()=>{W((e=>({"6149db07":e.model.interfaceColor,"895a15d0":e.model.backgroundColor})))},Ze=Je.setup;Je.setup=Ze?(e,t)=>(Qe(),Ze(e,t)):Qe;const et={id:"BookShelf"},tt={class:"shelf"},ot={class:"flex flex-row flex-wrap"};var at=Z(Je,[["render",function(e,t,o,a,s,l){const c=i("settings-outline"),u=i("n-icon"),m=i("Header"),k=i("BookCard"),P=i("n-color-picker"),S=i("n-divider"),F=i("n-switch"),f=i("n-space"),b=i("Drawer"),v=i("Bottom");return r(),p("div",et,[this.showHeaderFlag?(r(),n(m,{key:0,bookIsFolder:!1,headerTitle:this.bookShelfTitle,showReturnIcon:this.headerShowReturnIcon,setDownLoadLink:!1},{default:g((()=>[h(u,{size:"40",onClick:t[0]||(t[0]=t=>e.drawerActivate("right"))},{default:g((()=>[h(c)])),_:1})])),_:1},8,["headerTitle","showReturnIcon"])):_("",!0),d("div",tt,[d("div",ot,[(r(!0),p(L,null,B(this.bookshelf,((t,o)=>(r(),n(k,{key:o,title:t.name,id:t.id,image_src:t.cover.url,readerMode:this.readerMode,showTitle:this.bookCardShowTitleFlag,childBookNum:t.child_book_num?"x"+t.child_book_num:"",onClick:o=>e.onOpenBook(t.id,t.book_type)},null,8,["title","id","image_src","readerMode","showTitle","childBookNum","onClick"])))),128))])]),h(b,{initDrawerActive:this.drawerActive,initDrawerPlacement:this.drawerPlacement,onSaveConfig:this.saveConfigToCookie,onStartSketch:this.startSketchMode,onCloseDrawer:this.drawerDeactivate,onSetRM:this.OnSetReaderMode,readerMode:this.readerMode,sketching:!1},{default:g((()=>[d("span",null,w(e.$t("setInterfaceColor")),1),h(P,{modelValue:e.model.interfaceColor,"onUpdate:modelValue":t[1]||(t[1]=t=>e.model.interfaceColor=t),modes:["rgb"],"show-alpha":!1,"onUpdate:value":e.onInterfaceColorChange},null,8,["modelValue","onUpdate:value"]),d("span",null,w(e.$t("setBackColor")),1),h(P,{value:e.model.backgroundColor,"onUpdate:value":[t[2]||(t[2]=t=>e.model.backgroundColor=t),e.onBackgroundColorChange],modes:["rgb"],"show-alpha":!1},null,8,["value","onUpdate:value"]),h(S),h(f,null,{default:g((()=>[h(F,{size:"large","rail-style":e.railStyle,value:this.readerModeIsScroll,"onUpdate:value":[t[3]||(t[3]=e=>this.readerModeIsScroll=e),e.setReaderModeIsScroll]},{checked:g((()=>[M(w(e.$t("scroll_mode")),1)])),unchecked:g((()=>[M(w(e.$t("flip_mode")),1)])),_:1},8,["rail-style","value","onUpdate:value"])])),_:1}),h(f,null,{default:g((()=>[h(F,{size:"large",value:this.bookCardShowTitleFlag,"onUpdate:value":[t[4]||(t[4]=e=>this.bookCardShowTitleFlag=e),e.setBookCardShowTitleFlag]},{checked:g((()=>[M(w(e.$t("show_book_titles")),1)])),unchecked:g((()=>[M(w(e.$t("show_book_titles")),1)])),_:1},8,["value","onUpdate:value"])])),_:1})])),_:1},8,["initDrawerActive","initDrawerPlacement","onSaveConfig","onStartSketch","onCloseDrawer","onSetRM","readerMode"]),h(v,{softVersion:this.$store.state.server_status.ServerName?this.$store.state.server_status.ServerName:"Comigo"},null,8,["softVersion"])])}],["__scopeId","data-v-4d1d8e3e"]]);const st=e({name:"404Page",components:{NButton:f,NResult:j},setup(){const{cookies:e}=a();return{cookies:e}},methods:{onBackTop(){this.$router.push("/")}}}),lt=M('回首页╮(￣▽￣")╭');const it=[{path:"/",component:at,name:"BookShelf"},{path:"/child_shelf/:group_id",component:at,name:"ChildBookShelf"},{path:"/scroll/:id",component:xe,name:"ScrollMode"},{path:"/flip/:id",component:je,name:"FlipMode"},{path:"/about",component:()=>{return e=()=>import("./About.32541291.js"),(t=["assets/About.32541291.js","assets/About.0e723274.css","assets/vendor.99d94e2e.js"])&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in ae)return;ae[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,o)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e();var e,t},name:"About"},{path:"/:pathMatch(.*)*",name:"NotFound",component:Z(st,[["render",function(e,t,o,a,s,l){const d=i("n-button"),c=i("n-result");return r(),n(c,{status:"404",title:"404 资源不存在",description:"没找到你想要的东西"},{footer:g((()=>[h(d,{onClick:t[0]||(t[0]=t=>e.onBackTop())},{default:g((()=>[lt])),_:1})])),_:1})}],["__scopeId","data-v-26a09047"]])}],rt=V({history:Y(),routes:it}),nt=G({state:{count:0,todos:[{id:1,text:"...",done:!0},{id:2,text:"...",done:!1}],now_page:1,book:{name:"loading",all_page_num:1,pages:[{height:500,width:449,url:"/images/loading.jpg"}]},bookshelf:[{name:"loading",all_page_num:1,pages:[{height:500,width:449,url:"/images/loading.jpg"}]}],server_status:{template:"scroll",sketch_count_seconds:30},message:{user_id:"",server_status:"",now_book_id:"",read_percent:0,msg:""}},mutations:{increment(e){e.count++},syncSeverStatusData(e,t){e.server_status=t.message},syncBookData(e,t){e.book=t.message},syncBookShelfData(e,t){e.bookshelf=t.message}},actions:{incrementAction(e){e.commit("increment")},async syncSeverStatusDataAction(e){const t={message:await $.get("getstatus").then((e=>e.data),(()=>"")).finally((()=>{}))};e.commit("syncSeverStatusData",t),console.log("syncSeverStatusData!")},async syncBookDataAction(e){const t={message:await $.get("book.json").then((e=>e.data),(()=>""))};e.commit("syncBookData",t),console.log("syncBookData!")},async syncBookShelfDataAction(e){const t={message:await $.get("getshelf").then((e=>e.data),(()=>""))};e.commit("syncBookShelfData",t),console.log("syncBookShelfData!")}},getters:{doneTodos:e=>e.todos.filter((e=>e.done)),now_page:e=>e.now_page,book:e=>e.book,bookshelf:e=>e.bookshelf,setting:e=>e.setting,message:e=>e.message},modules:{}});const gt={en:{...{test:"test",debugMode:"Debug Mode",ReaderSettings:"Reader Settings",scroll_mode:"Scroll Mode",flip_mode:"FlipMode",singlePageWidth:"singlePageWidth:",doublePageWidth:"doublePageWidth:",width_usePercent:"Width:Percent",width_useFixedValue:"Width:Fixed value",showHeader:"Header Shown",showPageNum:"show PageNumber",setBackColor:"Background Color:",readingProgressBar:"Reading Progress Bar",savePageNum:"Save Reading Progress",rightScreenToNext:"RightToLeft-Manga",leftScreenToNext:"RightToLeft-Comic",startSketchMode:"Start Sketch",stopSketchMode:"Stop Sketch",hintFirstPage:"Now is the first page, can not turn forward",hintLastPage:"Now is the last page, can not turn the page",now_is:"now: ",second:"second",minute:"minute",total_is:"total: ",interval:"interval: ",page:"page",totalTime:"Total time: ",hour:"hour",pageTurningSeconds:"interval: ",startSketchMessage:"The countdown begins, Have a nice day.",goodjob_and_byebye:"Goodjob,bye.",simpleDoublePage:"DoublePage",autoDoublePage:"DoublePage(beta)",gray_image:"gray image",image_width_limit:"Limit size (width)",auto_crop:"Auto white cut",max_width:"max width:",energy_threshold:"Energy Threshold:","back-to-top":"Back To Top",raw_resolution:"Raw Resolution",reset_all_settings:"Reset all settings",do_you_reset_all_settings:" Do you want to reset to the default settings?",original_image:"Original Image",setInterfaceColor:"InterfaceColor:",show_book_titles:"Show book titles",switch_to_scrolling_mode:"Switch to scroll mode",switch_to_flip_mode:"switch to flip mode"}},zh:{...{test:"测试",debugMode:"Debug Mode",scroll_mode:"卷轴模式",flip_mode:"翻页模式",ReaderSettings:"阅读器设定",singlePageWidth:"单页漫画宽度:",doublePageWidth:"双开页漫画宽:",width_usePercent:"宽度:百分比%",width_useFixedValue:"宽度:固定值px",showHeader:"显示标题",showPageNum:"显示页数",setBackColor:"背景色:",readingProgressBar:"阅读进度条",savePageNum:"保存阅读进度",rightScreenToNext:"右开本（日漫）",leftScreenToNext:"左开本（美漫）",startSketchMode:"开始速写",stopSketchMode:"停止速写",hintFirstPage:"现在是第一页,无法向前翻页",hintLastPage:"现在是最后一页，无法往后翻页",now_is:"现在:",second:"秒",minute:"分",total_is:"完成:",interval:"翻页间隔:",page:"张",totalTime:"经过时间:",hour:"小时",pageTurningSeconds:"翻页间隔:",startSketchMessage:"开始倒计时速写，祝你心情愉快。",goodjob_and_byebye:"做得不错，再见~",simpleDoublePage:"合并双页",autoDoublePage:"合并双页（beta）",original_image:"显示原图",gray_image:"黑白化",image_width_limit:"限制尺寸(宽)",raw_resolution:"原始分辨率",auto_crop:"自动切边",max_width:"最大宽度：",energy_threshold:"切边强度：","back-to-top":"回到页首",reset_all_settings:"重置所有设定",do_you_reset_all_settings:"是否要重置为默认设定？",setInterfaceColor:"UI颜色:",show_book_titles:"显示书名",switch_to_scrolling_mode:"切换到卷轴模式",switch_to_flip_mode:"切换到翻页模式"}},ja:{...{test:"test",debugMode:"Debug Mode",ReaderSettings:"リーダー設定",scroll_mode:"スクロール",flip_mode:"ページめくり",singlePageWidth:"1ページ漫画横幅:",doublePageWidth:"見開きページの幅:",width_usePercent:"横幅:パーセント",width_useFixedValue:"横幅:固定値",showHeader:"タイトル表示",showPageNum:"ページ数表示",setBackColor:"背景色を指定する:",readingProgressBar:"プログレスバー",savePageNum:"読書進捗の保存",rightScreenToNext:"左右の向き:マンガ",leftScreenToNext:"左右の向き:Comic",startSketchMode:"クロッキー開始",stopSketchMode:"クロッキー終了",hintFirstPage:"最初のページで、進めることはできません",hintLastPage:"最後のページです",now_is:"今:",second:"秒",minute:"分",total_is:"合計:",interval:"間隔:",page:"ページ",totalTime:"合計時間:",hour:"時間",pageTurningSeconds:"ページをめくる秒数:",startSketchMessage:"クロッキーが始まりました、良い一日を。",goodjob_and_byebye:"お疲れ様でした、バイバイ。",simpleDoublePage:"ページ合併",autoDoublePage:"ページ合併(beta)",gray_image:"モノクロ化",image_width_limit:"サイズ（幅）を制限",auto_crop:"余白自動トリミング",max_width:"最大幅:",energy_threshold:"エネルギー閾値：","back-to-top":"ページのトップへ戻る",raw_resolution:"元の解像度",reset_all_settings:" 初期設定に戻す",do_you_reset_all_settings:"初期設定に戻すか？",original_image:"元の解像度",setInterfaceColor:"UIカラー:",show_book_titles:"本のタイトルを表示する",switch_to_scrolling_mode:"スクロールモードへ",switch_to_flip_mode:"めくりモードへ"}}},dt=new K.exports.createI18n({locale:localStorage.getItem("lang")||"zh",globalInjection:!0,messages:gt});$.defaults.baseURL="/api";const ht=q(oe);ht.use(dt),ht.use(J,$),ht.use(nt),ht.use(rt),ht.use(Q,{preLoad:1.9,loading:"/images/loading.jpg",error:"/images/error.jpg",attempt:4,observerOptions:{rootMargin:"200px",threshold:.1},lifecycle:{loading:e=>{e.setAttribute("class","LoadingImage")},error:e=>{e.setAttribute("class","ErrorImage")},loaded:e=>{let t=new Image;t.src=e.src,t.complete?(e.setAttribute("w",t.width),e.setAttribute("h",t.height),t.width<t.height?e.setAttribute("class","SinglePageImage"):e.setAttribute("class","DoublePageImage")):e.setAttribute("class","SinglePageImage")}}}),ht.mount("#app");export{Z as _};
